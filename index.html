<html lang="zh-TW"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>æ—¥æœ¬é—œè¥¿8å¤©è‡ªé§•éŠè¡Œç¨‹è¡¨ ğŸ‡¯ğŸ‡µ</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #202020;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            border-radius: 0 0 16px 16px;
            margin-bottom: 30px;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }

        .header-content {
            padding: 16px 20px;
        }

        .title {
            font-size: 28px;
            font-weight: 700;
            color: #202020;
            margin-bottom: 6px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
            margin-bottom: 12px;
        }

        .nav-btn {
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #202020;
            -webkit-tap-highlight-color: rgba(102, 126, 234, 0.2);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
            min-height: 44px;
            min-width: 44px;
        }

        .nav-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .nav-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .action-buttons {
            display: flex;
            gap: 6px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
            -webkit-tap-highlight-color: rgba(76, 175, 80, 0.2);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
            min-height: 44px;
        }

        .action-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .action-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .action-btn.secondary {
            background: #FF9800;
        }

        .action-btn.secondary:hover {
            background: #F57C00;
        }

        .action-btn.info {
            background: #2196F3;
        }

        .action-btn.info:hover {
            background: #1976D2;
        }

        .day-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 32px;
            margin-bottom: 24px;
            scroll-margin-top: 200px;
            transition: all 0.3s ease;
        }

        .day-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .day-header {
            padding: 20px 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .day-1 { background: linear-gradient(135deg, #FFE5E5 0%, #FFD1D1 100%); }
        .day-2 { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
        .day-3 { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
        .day-4 { background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); }
        .day-5 { background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); }
        .day-6 { background: linear-gradient(135deg, #ECEFF1 0%, #CFD8DC 100%); }
        .day-7 { background: linear-gradient(135deg, #FFE0B2 0%, #FFCC80 100%); }
        .day-8 { background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%); }

        .day-title {
            font-size: 26px;
            font-weight: 700;
            color: #202020;
        }

        .day-date {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .timeline-item {
            margin-bottom: 32px;
            position: relative;
            padding-left: 40px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 8px;
            bottom: -32px;
            width: 3px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .time-badge {
            font-size: 18px;
            font-weight: 700;
            color: #202020;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time-badge::before {
            content: '';
            position: absolute;
            left: 6px;
            width: 16px;
            height: 16px;
            background: #667eea;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #667eea;
        }

        .location-box {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .location-box:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .location-name {
            font-size: 20px;
            font-weight: 700;
            color: #202020;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .location-details {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .detail-row {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .map-code {
            background: #FF5252;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .phone-link {
            background: #4CAF50;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .phone-link:hover {
            background: #45a049;
        }

        .copy-btn, .nav-map-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover, .nav-map-btn:hover {
            background: #1976D2;
        }

        .copy-btn.copied {
            background: #4CAF50;
        }

        .meal-info {
            background: #FFF3E0;
            border-left: 4px solid #FF9800;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 12px;
        }

        .meal-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .meal-item:last-child {
            margin-bottom: 0;
        }

        .sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            height: -webkit-fill-available; /* iOS Safariå„ªåŒ– */
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            z-index: 2000;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch; /* iOSå¹³æ»‘æ»¾å‹• */
            padding: 24px;
        }

        .sidebar.open {
            right: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e0e0e0;
        }

        .sidebar-title {
            font-size: 24px;
            font-weight: 700;
            color: #202020;
        }

        .close-btn {
            background: #f5f5f5;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #e0e0e0;
        }

        .reminder-section {
            margin-bottom: 24px;
        }

        .reminder-section-title {
            font-size: 18px;
            font-weight: 700;
            color: #202020;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reminder-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .reminder-item:hover {
            background: #f0f0f0;
        }

        .reminder-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-top: 2px;
        }

        .reminder-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.5;
        }

        .reminder-item.checked .reminder-text {
            text-decoration: line-through;
            color: #999;
        }

        .payment-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .payment-item.paid {
            background: #E8F5E9;
            border-left: 4px solid #4CAF50;
        }

        .payment-item.unpaid {
            background: #FFF3E0;
            border-left: 4px solid #FF9800;
        }

        .payment-amount {
            font-weight: 700;
            font-size: 16px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-to-top:hover {
            background: #764ba2;
            transform: translateY(-4px);
        }

        .back-to-top.show {
            display: flex;
        }

        .drive-time {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #E3F2FD;
            color: #1976D2;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 8px;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge.reserved {
            background: #E8F5E9;
            color: #4CAF50;
        }

        .badge.option {
            background: #FFF3E0;
            color: #FF9800;
        }

        .emergency-box {
            background: #FFEBEE;
            border: 2px solid #EF5350;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .emergency-title {
            font-size: 18px;
            font-weight: 700;
            color: #C62828;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* èŠ±è²»è¨˜éŒ„æ¨£å¼å„ªåŒ– */
        .expense-day-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .expense-day-section:hover {
            border-color: #2196F3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.1);
        }

        .expense-entry {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid #e0e0e0;
            transition: all 0.2s ease;
        }

        .expense-entry:hover {
            border-color: #2196F3;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.15);
            transform: translateY(-1px);
        }

        .expense-category,
        .expense-amount,
        .expense-currency {
            transition: all 0.2s ease;
        }

        .expense-category:focus,
        .expense-amount:focus,
        .expense-currency:focus {
            outline: none;
            border-color: #2196F3 !important;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .expense-category:hover,
        .expense-amount:hover,
        .expense-currency:hover {
            border-color: #90CAF9;
        }

        .hkd-display {
            background: #E3F2FD;
            padding: 6px 10px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 12px;
            color: #1976D2;
            text-align: right;
            font-weight: 600;
        }

        .expense-entries {
            min-height: 40px;
        }

        .expense-entries:empty::after {
            content: 'é»æ“Šã€Œæ–°å¢ã€æŒ‰éˆ•ä¾†è¨˜éŒ„èŠ±è²»';
            display: block;
            text-align: center;
            color: #999;
            font-size: 13px;
            padding: 20px;
            font-style: italic;
        }

        /* èŠ±è²»è¨˜éŒ„å„ªåŒ–æ¨£å¼ */
        .expense-day-section {
            background: #f9f9f9;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .expense-day-section:hover {
            border-color: #2196F3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.1);
        }

        .expense-entry {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid #e0e0e0;
            transition: all 0.2s ease;
        }

        .expense-entry:hover {
            border-color: #2196F3;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.15);
            transform: translateY(-2px);
        }

        .expense-category,
        .expense-amount,
        .expense-currency {
            transition: all 0.2s ease;
        }

        .expense-category:focus,
        .expense-amount:focus,
        .expense-currency:focus {
            border-color: #2196F3 !important;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
            outline: none;
        }

        .expense-category:hover,
        .expense-amount:hover,
        .expense-currency:hover {
            border-color: #90CAF9;
        }

        .hkd-display {
            background: #E3F2FD;
            padding: 6px 10px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 12px;
            color: #1976D2;
            text-align: right;
            font-weight: 600;
        }

        /* èŠ±è²»è¨˜éŒ„å„ªåŒ–æ¨£å¼ */
        .expense-day-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .expense-day-section:hover {
            border-color: #2196F3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.1);
        }

        .expense-entry {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .expense-entry:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .expense-category,
        .expense-amount,
        .expense-currency {
            transition: all 0.2s ease;
        }

        .expense-category:hover,
        .expense-amount:hover,
        .expense-currency:hover {
            border-color: #2196F3 !important;
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);
        }

        .expense-category:focus,
        .expense-amount:focus,
        .expense-currency:focus {
            outline: none;
            border-color: #2196F3 !important;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .hkd-display {
            background: #E8F5E9;
            padding: 6px 10px;
            border-radius: 6px;
            border-left: 3px solid #4CAF50;
        }

        /* é–‹æ”¯è¨˜éŒ„å°ˆç”¨æ¨£å¼ */
        .add-expense-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-expense-btn:hover {
            background: #45a049;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
        }

        .add-expense-btn:active {
            transform: scale(0.95);
        }

        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .expense-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
            animation: slideIn 0.3s ease;
        }

        .expense-item.group-expense {
            border-color: #4CAF50;
            background: #F1F8F4;
        }

        .expense-item.personal-expense {
            border-color: #2196F3;
            background: #F0F7FF;
        }

        .expense-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .expense-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .expense-item-header select,
        .expense-item-header input {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.2s ease;
        }

        .expense-item-header select:focus,
        .expense-item-header input:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .delete-expense-btn {
            background: #F44336;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .delete-expense-btn:hover {
            background: #D32F2F;
            transform: scale(1.05);
        }

        .expense-item-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .expense-field {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .expense-field label {
            font-size: 11px;
            color: #666;
            font-weight: 600;
        }

        .expense-field input,
        .expense-field select {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
        }

        .expense-field.full-width {
            grid-column: 1 / -1;
        }

        .person-summary-card {
            background: white;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .person-summary-card h6 {
            font-size: 16px;
            font-weight: 700;
            color: #1976D2;
            margin: 0 0 8px 0;
        }

        .person-summary-card .amount-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 14px;
            color: #666;
        }

        .person-summary-card .amount-row .label {
            font-weight: 600;
        }

        .person-summary-card .amount-row .value {
            font-weight: 700;
            color: #2196F3;
        }

        .split-result-card {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #FF9800;
        }

        .split-result-card.positive {
            border-left-color: #4CAF50;
            background: #F1F8F4;
        }

        .split-result-card.negative {
            border-left-color: #F44336;
            background: #FFEBEE;
        }

        .split-result-card .person-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .split-result-card .amount {
            font-size: 18px;
            font-weight: 700;
        }

        .split-result-card .description {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .title {
                font-size: 24px;
            }

            .day-card {
                padding: 20px;
            }

            .day-title {
                font-size: 22px;
            }

            .sidebar {
                width: 100%;
                right: -100%;
            }

            .header-content {
                padding: 12px 16px;
            }

            .title {
                font-size: 24px;
                margin-bottom: 4px;
            }

            .subtitle {
                font-size: 12px;
                margin-bottom: 10px;
            }

            .nav-buttons {
                gap: 4px;
                margin-bottom: 10px;
            }

            .nav-btn {
                padding: 5px 10px;
                font-size: 12px;
                border-radius: 5px;
            }

            .action-buttons {
                gap: 4px;
            }

            .action-btn {
                padding: 7px 12px;
                font-size: 12px;
            }

            .action-btn i {
                font-size: 12px;
            }

            .detail-row {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        .kuse-branding {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #666;
            margin-top: 20px;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            justify-content: center;
        }

        .kuse-branding:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .kuse-branding svg {
            height: 1.2em;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        /* èŠ±è²»è¨˜éŒ„å°ˆç”¨æ¨£å¼ */
        .expense-day-section {
            background: #f9f9f9;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .expense-entry {
            transition: all 0.2s ease;
        }

        .expense-entry:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .expense-category option {
            padding: 8px;
        }

        .expense-amount:focus,
        .expense-category:focus,
        .expense-currency:focus {
            outline: none;
            border-color: #667eea !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .expense-entry button:hover {
            background: #D32F2F !important;
            transform: scale(1.05);
        }

        .expense-day-section button:hover {
            background: #45a049 !important;
            transform: scale(1.05);
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn, .close-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            cursor: pointer;
            position: relative;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active,
            .close-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn, .close-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ - åƒ…åœ¨ç§»å‹•è¨­å‚™ä¸Šç”Ÿæ•ˆ */
        @media (hover: none) and (pointer: coarse) {
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active,
            .close-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ - iOSæ¨è–¦æœ€å°44px */
            .nav-btn,
            .action-btn {
                min-height: 44px;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        /* iOS è§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn, .close-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            cursor: pointer;
            position: relative;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active,
            .close-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }

            /* ç¦ç”¨hoveræ•ˆæœåœ¨è§¸æ§è¨­å‚™ä¸Š */
            .nav-btn:hover,
            .action-btn:hover,
            .expense-entry:hover {
                transform: none;
            }
        }

        /* iOSè§¸æ§å„ªåŒ– */
        button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* ç¢ºä¿æŒ‰éˆ•åœ¨iOSä¸Šå¯é»æ“Š */
        button, .nav-btn, .action-btn {
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        /* ä¿®å¾©iOSä¸Šçš„activeç‹€æ…‹ */
        button:active, .nav-btn:active, .action-btn:active {
            opacity: 0.8;
        }

        /* iOSè§¸æ§åé¥‹ */
        @media (hover: none) and (pointer: coarse) {
            /* ç§»å‹•è¨­å‚™å°ˆç”¨æ¨£å¼ */
            .nav-btn:active,
            .action-btn:active,
            .copy-btn:active,
            .nav-map-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* å¢å¤§æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .nav-btn,
            .action-btn {
                min-height: 44px; /* iOSæ¨è–¦çš„æœ€å°è§¸æ§å°ºå¯¸ */
                padding: 8px 16px;
            }
        }

        @media print {
            .header {
                position: relative;
            }
            .action-buttons, .sidebar, .back-to-top, .overlay {
                display: none !important;
            }
            .day-card {
                page-break-inside: avoid;
            }
        }

        /* èŠ±è²»è¨˜éŒ„å°ˆç”¨æ¨£å¼ */
        .expense-day-section {
            background: #f9f9f9;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .expense-entry {
            transition: all 0.2s ease;
        }

        .expense-entry:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .expense-category option {
            padding: 8px;
        }

        .expense-amount:focus,
        .expense-currency:focus,
        .expense-category:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* æ–°å¢æŒ‰éˆ•hoveræ•ˆæœ */
        .expense-day-section button:hover {
            background: #45a049 !important;
            transform: scale(1.05);
        }

        /* åˆªé™¤æŒ‰éˆ•hoveræ•ˆæœ */
        .expense-entry button:hover {
            background: #e53935 !important;
            transform: scale(1.05);
        }

        /* æ¸¯å¹£æ›ç®—é¡¯ç¤ºå‹•ç•« */
        .hkd-display {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* èŠ±è²»è¨˜éŒ„å’Œè²»ç”¨çµç®—æŒ‰éˆ•iOSå„ªåŒ– */
        .delete-expense-btn,
        .reset-expenses-btn,
        .recalculate-settlement-btn {
            -webkit-tap-highlight-color: rgba(244, 67, 54, 0.2);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
            position: relative;
            z-index: 1;
        }

        /* iOSè§¸æ§åé¥‹ - åƒ…åœ¨ç§»å‹•è¨­å‚™ä¸Šç”Ÿæ•ˆ */
        @media (hover: none) and (pointer: coarse) {
            .delete-expense-btn:active,
            .reset-expenses-btn:active,
            .recalculate-settlement-btn:active {
                transform: scale(0.95);
                opacity: 0.8;
                transition: transform 0.1s ease, opacity 0.1s ease;
            }

            /* ç¦ç”¨hoveræ•ˆæœåœ¨è§¸æ§è¨­å‚™ä¸Š */
            .delete-expense-btn:hover,
            .reset-expenses-btn:hover,
            .recalculate-settlement-btn:hover {
                transform: none;
            }
        }

        /* é–‹æ”¯è¨˜éŒ„å°ˆç”¨æ¨£å¼ */
        .add-expense-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-expense-btn:hover {
            background: #45a049;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
        }

        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .expense-item {
            background: white;
            padding: 16px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
            animation: slideIn 0.3s ease;
        }

        .expense-item.group-expense {
            border-left: 4px solid #4CAF50;
        }

        .expense-item.personal-expense {
            border-left: 4px solid #2196F3;
        }

        .expense-item:hover {
            border-color: #2196F3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
            transform: translateY(-2px);
        }

        .expense-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .expense-item-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .expense-field {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .expense-field label {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }

        .expense-field select,
        .expense-field input {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .expense-field select:focus,
        .expense-field input:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .expense-field select:hover,
        .expense-field input:hover {
            border-color: #90CAF9;
        }

        .delete-expense-btn {
            background: #F44336;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .delete-expense-btn:hover {
            background: #D32F2F;
            transform: scale(1.05);
        }

        .expense-converted {
            background: #E3F2FD;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            color: #1976D2;
            margin-top: 8px;
            text-align: right;
            font-weight: 600;
        }

        .person-summary-card {
            background: white;
            padding: 16px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .person-summary-card:hover {
            border-color: #2196F3;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
        }

        .person-name {
            font-weight: 700;
            font-size: 16px;
            color: #1976D2;
            margin-bottom: 8px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 14px;
            color: #666;
        }

        .summary-total {
            font-weight: 700;
            font-size: 16px;
            color: #2E7D32;
            padding-top: 8px;
            border-top: 2px solid #e0e0e0;
            margin-top: 8px;
        }

        .split-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .split-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
        }

        .split-total {
            font-size: 20px;
            font-weight: 700;
            text-align: center;
            padding: 16px 0;
            border-top: 2px solid rgba(255,255,255,0.3);
            margin-top: 12px;
        }

        .settlement-card {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .settlement-person {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .settlement-amount {
            font-size: 18px;
            font-weight: 700;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
        }

        .settlement-amount.positive {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .settlement-amount.negative {
            background: #FFEBEE;
            color: #C62828;
        }

        .settlement-amount.zero {
            background: #E3F2FD;
            color: #1976D2;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
<style id="kgp-selected-style">
  [data-kgp-selected]::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    width: 100%;
    height: 100%;
    box-sizing: content-box;
    padding: 4px;
    border-radius: 4px;
    outline: 3px solid #FF6B35 !important;
    box-shadow: 0 0 0 1px rgba(255, 107, 53, 0.3), 0 0 10px rgba(255, 107, 53, 0.4) !important;
    z-index: 10000;
    pointer-events: none;
  }

  [data-kgp-selected] {
    position: relative;
    outline: none;
    cursor: default;
  }

  img[data-kgp-selected],
  img[data-kgp-hover-selected],
  [data-kgp-hover-selected],
  [item-kgp-click-selected],
  [item-kgp-selected] {
    border: 3px solid #FF6B35 !important;
    box-shadow: 0 0 0 1px rgba(255, 107, 53, 0.3), 0 0 15px rgba(255, 107, 53, 0.5) !important;
    border-radius: 4px;
  }

  [data-kgp-hover-selected]::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    width: 100%;
    height: 100%;
    box-sizing: content-box;
    padding: 2px;
    border-radius: 4px;
    outline: 2px solid #FFA366 !important;
    box-shadow: 0 0 0 1px rgba(255, 163, 102, 0.3), 0 0 8px rgba(255, 163, 102, 0.4) !important;
    z-index: 9999;
    pointer-events: none;
  }

  [data-kgp-hover-selected] {
    position: relative;
    outline: none;
  }
</style><style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}</style><style id="kgp-selected-style">
  [data-kgp-selected]::before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    width: 100%;
    height: 100%;
    box-sizing: content-box;
    padding: 4px;
    border-radius: 4px;
    outline: 3px solid #FF6B35 !important;
    box-shadow: 0 0 0 1px rgba(255, 107, 53, 0.3), 0 0 10px rgba(255, 107, 53, 0.4) !important;
    z-index: 10000;
    pointer-events: none;
  }

  [data-kgp-selected] {
    position: relative;
    outline: none;
    cursor: default;
  }

  img[data-kgp-selected],
  img[data-kgp-hover-selected],
  [data-kgp-hover-selected],
  [item-kgp-click-selected],
  [item-kgp-selected] {
    border: 3px solid #FF6B35 !important;
    box-shadow: 0 0 0 1px rgba(255, 107, 53, 0.3), 0 0 15px rgba(255, 107, 53, 0.5) !important;
    border-radius: 4px;
  }

  [data-kgp-hover-selected]::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    width: 100%;
    height: 100%;
    box-sizing: content-box;
    padding: 2px;
    border-radius: 4px;
    outline: 2px solid #FFA366 !important;
    box-shadow: 0 0 0 1px rgba(255, 163, 102, 0.3), 0 0 8px rgba(255, 163, 102, 0.4) !important;
    z-index: 9999;
    pointer-events: none;
  }

  [data-kgp-hover-selected] {
    position: relative;
    outline: none;
  }
</style></head>
<body>
    <div class="overlay" id="overlay"></div>

    <div class="header">
        <div class="header-content">
            <h1 class="title">æ—¥æœ¬é—œè¥¿8å¤©è‡ªé§•éŠè¡Œç¨‹è¡¨ ğŸ‡¯ğŸ‡µ</h1>
            <p class="subtitle">2026å¹´1æœˆ25æ—¥ - 2æœˆ1æ—¥ | 4äººåŒéŠ</p>

            <div class="nav-buttons" id="dayNav">
                <button class="nav-btn" onclick="scrollToDay(1)">Day 1</button>
                <button class="nav-btn" onclick="scrollToDay(2)">Day 2</button>
                <button class="nav-btn" onclick="scrollToDay(3)">Day 3</button>
                <button class="nav-btn" onclick="scrollToDay(4)">Day 4</button>
                <button class="nav-btn" onclick="scrollToDay(5)">Day 5</button>
                <button class="nav-btn" onclick="scrollToDay(6)">Day 6</button>
                <button class="nav-btn" onclick="scrollToDay(7)">Day 7</button>
                <button class="nav-btn" onclick="scrollToDay(8)">Day 8</button>
            </div>

            <div class="action-buttons">
                <button class="action-btn" onclick="toggleSidebar('reminders')">
                    <i class="fas fa-bell"></i> æé†’äº‹é …
                </button>
                <button class="action-btn info" onclick="toggleSidebar('mapcode')">
                    <i class="fas fa-map-marked-alt"></i> åœ°åœ–ç¸½è¦½
                </button>

                <button class="action-btn" style="background: #00BCD4;" onclick="toggleSidebar('currency')">
                    <i class="fas fa-yen-sign"></i> åŒ¯ç‡è¨ˆç®—
                </button>
                <button class="action-btn" style="background: #795548;" onclick="toggleSidebar('route')">
                    <i class="fas fa-route"></i> è·¯ç·šç¸½è¦½
                </button>

                <button class="action-btn" style="background: #FF5722;" onclick="toggleSidebar('budget')">
                    <i class="fas fa-wallet"></i> é–‹æ”¯é ç®—
                </button>

                <button class="action-btn" style="background: #9C27B0;" onclick="toggleSidebar('expenses')">
                    <i class="fas fa-money-bill-wave"></i> é–‹æ”¯è¨˜éŒ„
                </button>

            </div>

        </div>
    </div>

    <div class="container">
        <!-- Day 1 -->
        <div class="day-card" id="day1">
            <div class="day-header day-1">
                <div>
                    <h2 class="day-title">Day 1 - æŠµé”å¤§é˜ª</h2>
                    <p class="day-date">1æœˆ25æ—¥ï¼ˆæ˜ŸæœŸæ—¥ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">âœˆï¸ 08:20 å‡ºç™¼</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-plane-departure"></i> èˆªç­ CX 596
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span><strong>èµ·é£›ï¼š</strong>08:20 é¦™æ¸¯</span>
                            <span><strong>æŠµé”ï¼š</strong>12:45 å¤§é˜ªé—œè¥¿æ©Ÿå ´</span>
                        </div>
                        <div class="badge reserved">
                            <i class="fas fa-check-circle"></i> å·²ç¢ºèª
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸš‡ 13:00 æ©Ÿå ´åˆ°å¸‚å€äº¤é€š</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-train"></i> é—œè¥¿æ©Ÿå ´ â†’ å¿ƒé½‹æ©‹
                    </div>
                    <div class="location-details">
                        <div style="padding: 16px; background: #E8F5E9; border-radius: 8px; border-left: 4px solid #4CAF50; margin-bottom: 12px;">
                            <div style="font-weight: 700; font-size: 16px; color: #2E7D32; margin-bottom: 12px;">
                                <i class="fas fa-train"></i> é¸é …Aï¼šå—æµ·é›»éµç‰¹æ€¥Rapi:tï¼ˆæ¨è–¦ï¼‰
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šé—œè¥¿æ©Ÿå ´ç«™ â†’ é›£æ³¢ç«™ï¼ˆç´„40åˆ†é˜ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,450/äºº<br>
                                â€¢ è½‰ä¹˜ï¼šé›£æ³¢ç«™è½‰åœ°éµå¾¡å ‚ç­‹ç·šè‡³å¿ƒé½‹æ©‹ç«™ï¼ˆ2åˆ†é˜ï¼‰<br>
                                â€¢ <strong>å»ºè­°å‡ºå£ï¼š</strong>é›£æ³¢ç«™ã€ŒåŒ—æ”¹æœ­å£ã€â†’ å¾¡å ‚ç­‹ç·šæœˆå°<br>
                                â€¢ <strong>å¿ƒé½‹æ©‹ç«™å»ºè­°å‡ºå£ï¼š</strong>6è™Ÿå‡ºå£ï¼ˆæœ€è¿‘é…’åº—ï¼‰<br>
                                <strong style="color: #2E7D32;">ç¸½æ™‚é–“ï¼šç´„50åˆ†é˜</strong>
                            </div>
                        </div>

                        <div style="padding: 16px; background: #E3F2FD; border-radius: 8px; border-left: 4px solid #2196F3; margin-bottom: 12px;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-train"></i> é¸é …Bï¼šJRé—œç©ºå¿«é€Ÿ
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šé—œè¥¿æ©Ÿå ´ç«™ â†’ å¤©ç‹å¯ºç«™ â†’ è½‰åœ°éµè‡³å¿ƒé½‹æ©‹<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,100/äºº<br>
                                <strong style="color: #1976D2;">ç¸½æ™‚é–“ï¼šç´„1å°æ™‚</strong>
                            </div>
                        </div>

                        <div style="padding: 16px; background: #FFF3E0; border-radius: 8px; border-left: 4px solid #FF9800;">
                            <div style="font-weight: 700; font-size: 16px; color: #F57C00; margin-bottom: 12px;">
                                <i class="fas fa-bus"></i> é¸é …Cï¼šæ©Ÿå ´å·´å£«
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šç›´é”é›£æ³¢OCATï¼ˆç´„50åˆ†é˜ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,100/äºº<br>
                                â€¢ æ­¥è¡Œè‡³å¿ƒé½‹æ©‹ç´„10åˆ†é˜
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¨ å…¥ä½é…’åº—</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-hotel"></i> å¤§é˜ªå¿ƒé½‹æ©‹æ˜†æ³°è–©æ¼«ç•«å’Œæ›¸é…’åº—
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">1 286 374*21</span>
                            <button class="copy-btn" onclick="copyMapCode('1 286 374*21', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:+81-6-6282-5551" class="phone-link">
                                <i class="fas fa-phone"></i> +81-6-6282-5551
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºæ±å¿ƒæ–æ©‹1-8-21')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºæ±å¿ƒæ–æ©‹1-8-21
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ›ï¸ ä¸‹åˆ-æ™šä¸Š</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-shopping-bag"></i> å¿ƒé½‹æ©‹ã€é›£æ³¢é“é “å €
                    </div>
                    <div class="location-details">
                        <p style="color: #666;">è‡ªç”±æ´»å‹•ï¼šè³¼ç‰©ã€ç¾é£Ÿæ¢ç´¢</p>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>åˆé¤ï¼š</strong>å¾…å®š
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤ï¼š</strong>å¾…å®š
                </div>
            </div>
        </div>

        <!-- Day 2 -->
        <div class="day-card" id="day2">
            <div class="day-header day-2">
                <div>
                    <h2 class="day-title">Day 2 - äº¬éƒ½ä»»å¤©å ‚ â†’ æ´¥å¸‚</h2>
                    <p class="day-date">1æœˆ26æ—¥ï¼ˆæ˜ŸæœŸä¸€ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸš— 10:00 å–è»Š</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-car"></i> Toyota Rent a Car å¿ƒé½‹æ©‹åº—
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">1 728 843*63</span>
                            <button class="copy-btn" onclick="copyMapCode('1 728 843*63', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0598-26-4457" class="phone-link">
                                <i class="fas fa-phone"></i> 0598-26-4457
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('34.678155626496135, 135.50507366924012')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºåšåŠ´ç”º2-3-9
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ® 12:00 ä»»å¤©å ‚åšç‰©é¤¨</div>

                <!-- é®®æ˜é ç´„æé†’æ¡† -->
                <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 3px solid #FF9800; box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <i class="fas fa-clock" style="font-size: 28px; color: #F57C00; animation: pulse 2s infinite;"></i>
                        <div style="font-size: 20px; font-weight: 700; color: #E65100;">é‡è¦æé†’ï¼šå·²é ç´„ 12:00ï¼Œå»ºè­° 10:45 å¾é…’åº—å‡ºç™¼</div>
                    </div>
                    <div style="font-size: 16px; margin-left: 40px; color: #E65100;">
                        â° å»ºè­°å‡ºç™¼æ™‚é–“ï¼š10:45<br>
                        ğŸš— éœ€æ™‚ç´„1å°æ™‚è»Šç¨‹
                    </div>
                </div>

                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-gamepad"></i> ä»»å¤©å ‚åšç‰©é¤¨
                    </div>
                    <div class="location-details">
                        <!-- ğŸ†• åšç‰©é¤¨ä¸»è¦åœ°å€å’Œå°èˆª -->
                        <div style="background: #FFF3E0; padding: 16px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #FF9800;">
                            <div style="font-weight: 700; font-size: 16px; color: #E65100; margin-bottom: 12px;">
                                <i class="fas fa-gamepad"></i> ä»»å¤©å ‚åšç‰©é¤¨ä¸»é¤¨
                            </div>
                            <div class="detail-row">
                                <button class="nav-map-btn" onclick="openGoogleMaps('34.89297487358924, 135.78435911706623')" style="width: 100%;">
                                    <i class="fas fa-route"></i> å°èˆªåˆ°ä»»å¤©å ‚åšç‰©é¤¨
                                </button>
                            </div>
                            <div style="margin-top: 8px; color: #666; font-size: 14px;">
                                <i class="fas fa-map-marker-alt"></i> äº¬éƒ½åºœå®‡æ²»å¸‚å°å€‰ç”ºç¥æ¥½ç”°33-1
                            </div>
                            <div style="margin-top: 8px; color: #666; font-size: 13px;">
                                ğŸ“ åæ¨™ï¼š34.89297, 135.78436
                            </div>
                        </div>

                        <!-- åœè»Šå ´é¸é …A -->
                        <div style="background: #E8F5E9; padding: 16px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #4CAF50;">
                            <div style="font-weight: 700; font-size: 16px; color: #2E7D32; margin-bottom: 12px;">
                                <i class="fas fa-parking"></i> åœè»Šå ´é¸é …A
                            </div>
                            <div class="detail-row">
                                <span class="map-code">7 199 668*31</span>
                                <button class="copy-btn" onclick="copyMapCode('7 199 668*31', this)">
                                    <i class="fas fa-copy"></i> è¤‡è£½
                                </button>
                            </div>
                            <div class="detail-row">
                                <button class="nav-map-btn" onclick="openGoogleMaps('Kaguraden-23 Oguracho, Uji, Kyoto 611-0042æ—¥æœ¬')">
                                    <i class="fas fa-map-marker-alt"></i> å°èˆª
                                </button>
                            </div>
                            <div style="margin-top: 8px; color: #666; font-size: 14px;">
                                <i class="fas fa-map-marker-alt"></i> Kaguraden-23 Oguracho, Uji, Kyoto 611-0042æ—¥æœ¬
                            </div>
                        </div>

                        <!-- åœè»Šå ´é¸é …B -->
                        <div style="background: #E3F2FD; padding: 16px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #2196F3;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-parking"></i> åœè»Šå ´é¸é …B
                            </div>
                            <div class="detail-row">
                                <span class="map-code">7 199 736*61</span>
                                <button class="copy-btn" onclick="copyMapCode('7 199 736*61', this)">
                                    <i class="fas fa-copy"></i> è¤‡è£½
                                </button>
                            </div>
                            <div class="detail-row">
                                <button class="nav-map-btn" onclick="openGoogleMaps('Tenno-54-ç•ª Oguracho, Uji, Kyoto 611-0042æ—¥æœ¬')">
                                    <i class="fas fa-map-marker-alt"></i> å°èˆª
                                </button>
                            </div>
                            <div style="margin-top: 8px; color: #666; font-size: 14px;">
                                <i class="fas fa-map-marker-alt"></i> Tenno-54-ç•ª Oguracho, Uji, Kyoto 611-0042æ—¥æœ¬
                            </div>
                        </div>

                        <!-- åŸæœ‰çš„é›»è©±å’Œå…¶ä»–è³‡è¨Š -->
                        <div class="detail-row">
                            <a href="tel:0774-24-0999" class="phone-link">
                                <i class="fas fa-phone"></i> 0774-24-0999
                            </a>
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„1å°æ™‚
                        </div>
                        <div class="badge reserved">
                            <i class="fas fa-ticket-alt"></i> é–€ç¥¨å·²ä»˜ JPY 13,200ï¼ˆç´„ HKD 726ï¼‰
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¨ å‚æ™šå…¥ä½</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-hotel"></i> Hotel Global View Tsu
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">531 511 373*46</span>
                            <button class="copy-btn" onclick="copyMapCode('531 511 373*46', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:059-227-8333" class="phone-link">
                                <i class="fas fa-phone"></i> 059-227-8333
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('ä¸‰é‡çœŒæ´¥å¸‚åºƒæ˜ç”º345-4')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> ä¸‰é‡çœŒæ´¥å¸‚åºƒæ˜ç”º345-4
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„1.5å°æ™‚
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ—©é¤ï¼š</strong>å¾…å®š
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>åˆé¤ï¼š</strong>å¾…å®š
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤é¸é …ï¼š</strong>æ´¥å¸‚ä¸­å¿ƒçƒå†¬/é°»é­šï¼ˆæ­¥è¡Œç´„5åˆ†é˜åˆ°æ´¥ç«™ï¼‰
                </div>
            </div>
        </div>

        <!-- Day 3 -->
        <div class="day-card" id="day3">
            <div class="day-header day-3">
                <div>
                    <h2 class="day-title">Day 3 - Hotel Vison éŠç©</h2>
                    <p class="day-date">1æœˆ27æ—¥ï¼ˆæ˜ŸæœŸäºŒï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸœ åˆé¤é¸é …</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-utensils"></i> ã™ãç„¼ã ç‰›ã—ã‚ƒã¶ æ¾é‡
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">531 511 713*55</span>
                            <button class="copy-btn" onclick="copyMapCode('531 511 713*55', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:059-229-0298" class="phone-link">
                                <i class="fas fa-phone"></i> 059-229-0298
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’514-0009 Mie, Tsu, Hadokorocho, 381 ã‚¢ãƒãƒƒã‚¯ã‚¹ 1F ä¸‰äº¤ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> æ—¥æœ¬ã€’514-0009 Mie, Tsu, Hadokorocho, 381 ã‚¢ãƒãƒƒã‚¯ã‚¹ 1F ä¸‰äº¤ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„3åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> å¯é¸
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¨ åˆå¾Œå…¥ä½</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-hotel"></i> Hotel Visonï¼ˆå…¥ä½2æ™šï¼‰
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">255 737 756*30</span>
                            <button class="copy-btn" onclick="copyMapCode('255 737 756*30', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0598-39-3090" class="phone-link">
                                <i class="fas fa-phone"></i> 0598-39-3090
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('Japan, ã€’519-2170 Mie, Taki District, Taki, Vison, 672ç•ª1')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> Japan, ã€’519-2170 Mie, Taki District, Taki, Vison, 672ç•ª1
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„45åˆ†é˜
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ‰ ä¸­åˆ-ä¸‹åˆ</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-store"></i> é…’åº—å•†åº—è¡—éŠç©
                    </div>
                    <div class="location-details">
                        <p style="color: #666;">æ¢ç´¢Hotel Visonå•†åº—è¡—ã€ç¾é£Ÿã€æ™¯è§€</p>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ– æ™šé¤</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-fire"></i> ä¸€å‡ç“¶ å®®ç”ºåº—ï¼ˆæ¾é˜ªç‡’è‚‰ï¼‰
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">80 260 766*01</span>
                            <button class="copy-btn" onclick="copyMapCode('80 260 766*01', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0598-50-1200" class="phone-link">
                                <i class="fas fa-phone"></i> 0598-50-1200
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('ä¸‰é‡çœŒæ¾é˜ªå¸‚å®®ç”º144-5')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> ä¸‰é‡çœŒæ¾é˜ªå¸‚å®®ç”º144-5
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> å¾€è¿”è»Šç¨‹å„ç´„30åˆ†é˜
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ—©é¤ï¼š</strong>å¾…å®š
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>åˆé¤ï¼š</strong>æ´¥å¸‚é¸æ“‡ æˆ– æ¾é‡å£½å–œç‡’
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤ï¼š</strong>ä¸€å‡ç“¶æ¾é˜ªç‡’è‚‰
                </div>
            </div>
        </div>

        <!-- Day 4 -->
        <div class="day-card" id="day4">
            <div class="day-header day-4">
                <div>
                    <h2 class="day-title">Day 4 - æµ·å¥³é«”é©— + æ°´æ—é¤¨/ç¥å®® + æ—¥è½</h2>
                    <p class="day-date">1æœˆ28æ—¥ï¼ˆæ˜ŸæœŸä¸‰ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¦ 11:30 æµ·å¥³å°å±‹</div>

                <!-- é®®æ˜é ç´„æé†’æ¡† -->
                <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 3px solid #FF9800; box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <i class="fas fa-clock" style="font-size: 28px; color: #F57C00; animation: pulse 2s infinite;"></i>
                        <div style="font-size: 20px; font-weight: 700; color: #E65100;">é‡è¦æé†’ï¼šå·²é ç´„ 11:30ï¼Œå»ºè­° 10:30 å¾é…’åº—å‡ºç™¼</div>
                    </div>
                    <div style="font-size: 16px; margin-left: 40px; color: #E65100;">
                        â° å»ºè­°å‡ºç™¼æ™‚é–“ï¼š10:30<br>
                        ğŸš— éœ€æ™‚ç´„1å°æ™‚è»Šç¨‹<br>
                        ğŸ’° ç¾å ´ä»˜æ¬¾ï¼šJPY 30,800ï¼ˆç´„ HKD 1,694ï¼‰
                    </div>
                </div>

                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-fish"></i> æµ·å¥³å°å±‹ç›¸å·®ç«ˆ
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">338 499 193</span>
                            <button class="copy-btn" onclick="copyMapCode('338 499 193', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0599-33-7453" class="phone-link">
                                <i class="fas fa-phone"></i> 0599-33-7453
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’517-0032 Mie, Toba, Osatsucho, å‰ã®æµœ')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> æ—¥æœ¬ã€’517-0032 Mie, Toba, Osatsucho, å‰ã®æµœ
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„1å°æ™‚
                        </div>
                        <div class="badge reserved">
                            <i class="fas fa-check-circle"></i> å·²é ç´„ 11:30 | JPY 30,800ï¼ˆæœªä»˜ï¼‰
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ›ï¸ ä¸­åˆè¡Œç¨‹ï¼ˆäºŒé¸ä¸€ï¼‰</div>

                <div class="location-box" style="margin-bottom: 12px;">
                    <div class="location-name">
                        <i class="fas fa-torii-gate"></i> é¸é …Aï¼šä¼Šå‹¢ç¥å®®å…§å®® + æ‰˜ç¦æ©«ä¸
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">118 431 598*36</span>
                            <button class="copy-btn" onclick="copyMapCode('118 431 598*36', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0596-28-1150" class="phone-link">
                                <i class="fas fa-phone"></i> 0596-28-1150
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’516-0024 Mie, Ise, Ujiimazaikecho, ï¼™ï¼“')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> æ—¥æœ¬ã€’516-0024 Mie, Ise, Ujiimazaikecho, ï¼™ï¼“
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„45åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> é¸é …A
                        </div>
                    </div>
                </div>

                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-water"></i> é¸é …Bï¼šé³¥ç¾½æ°´æ—é¤¨
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">118 536 237*73</span>
                            <button class="copy-btn" onclick="copyMapCode('118 536 237*73', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0599-25-2555" class="phone-link">
                                <i class="fas fa-phone"></i> 0599-25-2555
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('3 Chome-3-1484-111 Toba, Mie 517-0011æ—¥æœ¬')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> 3 Chome-3-1484-111 Toba, Mie 517-0011æ—¥æœ¬
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„30åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> é¸é …B
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸŒ… 17:00å‰ æ—¥è½ï¼ˆäºŒé¸ä¸€ï¼‰</div>

                <!-- é®®æ˜æ—¥è½æé†’ -->
                <div style="background: linear-gradient(135deg, #FF5252 0%, #F44336 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 3px solid #C62828; box-shadow: 0 4px 12px rgba(198, 40, 40, 0.3);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 28px; animation: pulse 2s infinite;"></i>
                        <div style="font-size: 20px; font-weight: 700;">é‡è¦æé†’ï¼šå¿…é ˆ5é»å‰åˆ°é”è§€è³æ—¥è½ï¼</div>
                    </div>
                    <div style="font-size: 16px; margin-left: 40px;">
                        â° å»ºè­°æœ€é²16:00å‡ºç™¼å‰å¾€æ—¥è½æ™¯é»<br>
                        ğŸŒ… æ—¥è½æ™‚é–“ç´„17:00-17:30ï¼ŒéŒ¯éå°‡ç„¡æ³•è§€è³
                    </div>
                </div>

                <div class="location-box" style="margin-bottom: 12px;">
                    <div class="location-name">
                        <i class="fas fa-sun"></i> é¸é …Aï¼šäºŒè¦‹èˆˆç‰ç¥ç¤¾
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">118 619 558*46</span>
                            <button class="copy-btn" onclick="copyMapCode('118 619 558*46', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0596-43-2020" class="phone-link">
                                <i class="fas fa-phone"></i> 0596-43-2020
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('34.50853922164895, 136.7856158427696')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> 566-14 Futamicho Chaya, Ise, Mie 519-0609æ—¥æœ¬
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„30åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> é¸é …A
                        </div>
                    </div>
                </div>

                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-mountain"></i> é¸é …Bï¼šé³¥ç¾½å±•æœ›å°
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">338 620 752*17</span>
                            <button class="copy-btn" onclick="copyMapCode('338 620 752*17', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0599-33-6201" class="phone-link">
                                <i class="fas fa-phone"></i> 0599-33-6201
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('34.42705758237021, 136.91454580934243')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> Kuzakicho, Toba, Mie 517-0031æ—¥æœ¬
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„45åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> é¸é …B
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¶ æ™šé¤é¸é …</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-utensils"></i> ãŸã‹å±‹ä¼Šå‹¢é…’å ´
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">118 520 895*70</span>
                            <button class="copy-btn" onclick="copyMapCode('118 520 895*70', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0596-63-6040" class="phone-link">
                                <i class="fas fa-phone"></i> 0596-63-6040
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('34.48641540063828, 136.71257744526096')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> 1 Chome-16 Iwabuchi, Ise, Mie 516-0037æ—¥æœ¬
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„20åˆ†é˜ | å›é…’åº—ç´„25åˆ†é˜
                        </div>
                        <div class="badge option">
                            <i class="fas fa-question-circle"></i> å¯é¸
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ—©åˆé¤ï¼š</strong>æµ·å¥³å°å±‹ç›¸å·®ç«ˆï¼ˆ11:30å·²é ç´„ï¼‰
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤ï¼š</strong>ãŸã‹å±‹ä¼Šå‹¢é…’å ´ï¼ˆå¯é¸ï¼‰æˆ–å¾…å®š
                </div>
            </div>
        </div>

        <!-- Day 5 -->
        <div class="day-card" id="day5">
            <div class="day-header day-5">
                <div>
                    <h2 class="day-title">Day 5 - BBQ + å›å¤§é˜ª</h2>
                    <p class="day-date">1æœˆ29æ—¥ï¼ˆæ˜ŸæœŸå››ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ›ï¸ ä¸Šåˆ</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-shopping-basket"></i> Hotel Visonå•†åº—è¡—è³¼ç‰©
                    </div>
                    <div class="location-details">
                        <p style="color: #666;">æœ€å¾Œæ¢ç´¢ã€è³¼è²·ä¼´æ‰‹ç¦®</p>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ– 13:00 BBQåˆé¤</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-fire-alt"></i> Grill Eight BBQ
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">255 737 756*30</span>
                            <button class="copy-btn" onclick="copyMapCode('255 737 756*30', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0598-39-3190" class="phone-link">
                                <i class="fas fa-phone"></i> 0598-39-3190
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('Japan, ã€’519-2170 Mie, Taki District, Taki, Vison, 672ç•ª1')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> Japan, ã€’519-2170 Mie, Taki District, Taki, Vison, 672ç•ª1
                        </div>
                        <div class="badge reserved">
                            <i class="fas fa-check-circle"></i> å·²é ç´„ 13:00-15:00
                        </div>
                        <div class="badge unpaid" style="background: #FFF3E0; color: #F57C00; margin-top: 8px;">
                            <i class="fas fa-exclamation-triangle"></i> æœªä»˜æ¬¾ JPY 24,000 (HKD 1,320)
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸš— 19:30 é‚„è»Š</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-car"></i> Toyota Rent a Car é‚„è»Š
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span class="map-code">1 728 843*63</span>
                            <button class="copy-btn" onclick="copyMapCode('1 728 843*63', this)">
                                <i class="fas fa-copy"></i> è¤‡è£½
                            </button>
                        </div>
                        <div class="detail-row">
                            <a href="tel:0598-26-4457" class="phone-link">
                                <i class="fas fa-phone"></i> 0598-26-4457
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('34.678155626496135, 135.50507366924012')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºåšåŠ´ç”º2-3-9
                        </div>
                        <div class="drive-time">
                            <i class="fas fa-car"></i> è»Šç¨‹ç´„2.5-3å°æ™‚
                        </div>
                        <div class="badge unpaid" style="background: #FFF3E0; color: #F57C00;">
                            <i class="fas fa-exclamation-triangle"></i> é‚„è»Šä»˜æ¬¾ JPY 47,000
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¨ æ™šä¸Šå…¥ä½</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-hotel"></i> HOTEL HILLARYS Shinsaibashiï¼ˆå…¥ä½3æ™šï¼‰
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <a href="tel:+81-6-6282-3910" class="phone-link">
                                <i class="fas fa-phone"></i> +81-6-6282-3910
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('1 Chome-17-11 Higashishinsaibashi, Chuo Ward, Osaka, 542-0083æ—¥æœ¬')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> 1 Chome-17-11 Higashishinsaibashi, Chuo Ward, Osaka, 542-0083æ—¥æœ¬
                        </div>
                        <div style="margin-top: 12px; padding: 12px; background: #E8F5E9; border-radius: 8px; color: #666;">
                            <i class="fas fa-info-circle" style="color: #4CAF50;"></i> ä½æ–¼å¿ƒé½‹æ©‹å•†åº—è¡—å…§ï¼Œæ­¥è¡Œå³å¯åˆ°é”
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>åˆé¤ï¼š</strong>Grill Eight BBQï¼ˆ13:00-15:00å·²é ç´„ï¼‰
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤ï¼š</strong>å¾…å®š
                </div>
            </div>
        </div>

        <!-- Day 6 -->
        <div class="day-card" id="day6">
            <div class="day-header day-6">
                <div>
                    <h2 class="day-title">Day 6 - æ¢…ç”°è‡ªç”±æ´»å‹•</h2>
                    <p class="day-date">1æœˆ30æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ™ï¸ ä¸Šåˆ-ä¸‹åˆ</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-city"></i> å‰å¾€æ¢…ç”°è‡ªç”±æ´»å‹•
                    </div>
                    <div class="location-details">
                        <!-- å»ºè­°äº¤é€šæ–¹å¼ -->
                        <div style="padding: 16px; background: #E3F2FD; border-radius: 8px; border-left: 4px solid #2196F3; margin-bottom: 16px;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-subway"></i> å»ºè­°äº¤é€šæ–¹å¼
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                <strong>ğŸš‡ åœ°éµå¾¡å ‚ç­‹ç·šï¼ˆæ¨è–¦ï¼‰ï¼š</strong><br>
                                â€¢ å¾HOTEL HILLARYSæ­¥è¡Œè‡³å¿ƒé½‹æ©‹ç«™ï¼ˆç´„3åˆ†é˜ï¼‰<br>
                                â€¢ <strong>å¿ƒé½‹æ©‹ç«™å»ºè­°å…¥å£ï¼š</strong>6è™Ÿå‡ºå£ï¼ˆæœ€è¿‘é…’åº—ï¼‰<br>
                                â€¢ æ­ä¹˜å¾¡å ‚ç­‹ç·šå¾€åƒé‡Œä¸­å¤®æ–¹å‘<br>
                                â€¢ å¿ƒé½‹æ©‹ç«™ â†’ æ¢…ç”°ç«™ï¼ˆç´„5åˆ†é˜ï¼Œ2ç«™ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šJPY 230/äºº<br>
                                â€¢ <strong>æ¢…ç”°ç«™å»ºè­°å‡ºå£ï¼š</strong>ä¸­å¤®æ”¹æœ­å£ â†’ ä¾ç›®çš„åœ°é¸æ“‡å‡ºå£<br>
                                â€¢ é˜ªæ€¥ç™¾è²¨/HEP FIVEï¼šå—å£<br>
                                â€¢ è—å¤©å¤§å»ˆï¼šä¸­å¤®åŒ—å£<br>
                                â€¢ Grand Frontï¼šåŒ—å£<br>
                                <strong style="color: #1976D2;">ç¸½æ™‚é–“ï¼šç´„10åˆ†é˜</strong>
                            </div>
                        </div>

                        <div style="margin-top: 12px;">
                            <strong style="font-size: 16px; color: #202020;">æ¨è–¦æ´»å‹•ï¼š</strong>
                            <ul style="margin-left: 20px; color: #666; line-height: 1.8; margin-top: 8px;">
                                <li>æ¢…ç”°è—å¤©å¤§å»ˆç©ºä¸­åº­åœ’å±•æœ›å°</li>
                                <li>Grand Front Osakaè³¼ç‰©</li>
                                <li>é˜ªæ€¥ç™¾è²¨åº—</li>
                                <li>HEP FIVEæ‘©å¤©è¼ª</li>
                                <li>æ¢…ç”°åœ°ä¸‹è¡—æ¢ç´¢</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ­ 19:30 æ™šé¤ç§€</div>

                <!-- é®®æ˜é ç´„æé†’æ¡† -->
                <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 3px solid #FF9800; box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <i class="fas fa-clock" style="font-size: 28px; color: #F57C00; animation: pulse 2s infinite;"></i>
                        <div style="font-size: 20px; font-weight: 700; color: #E65100;">é‡è¦æé†’ï¼šå·²é ç´„ 19:30ï¼Œå»ºè­° 18:45 å¾æ¢…ç”°å‡ºç™¼</div>
                    </div>
                    <div style="font-size: 16px; margin-left: 40px; color: #E65100;">
                        â° å»ºè­°å‡ºç™¼æ™‚é–“ï¼š18:45<br>
                        ğŸ“ é è¨‚ç·¨è™Ÿï¼š52981<br>
                        ğŸ’° ç¾å ´ä»˜æ¬¾ï¼šJPY 35,200ï¼ˆç´„ HKD 1,936ï¼‰
                    </div>
                </div>

                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-theater-masks"></i> Burlesque Osaka
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <a href="tel:06-6345-4567" class="phone-link">
                                <i class="fas fa-phone"></i> 06-6345-4567
                            </a>
                            <button class="nav-map-btn" onclick="openGoogleMaps('å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ›½æ ¹å´æ–°åœ°1-3-8 ãã‚‰ã‚“ã±ã‚Œå£±ç•ªé¤¨4F')">
                                <i class="fas fa-map-marker-alt"></i> å°èˆª
                            </button>
                        </div>
                        <div style="margin-top: 8px; color: #666;">
                            <i class="fas fa-map-marker-alt"></i> å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ›½æ ¹å´æ–°åœ°1-3-8 ãã‚‰ã‚“ã±ã‚Œå£±ç•ªé¤¨4F
                        </div>

                        <!-- å»ºè­°äº¤é€šæ–¹å¼ -->
                        <div style="margin-top: 16px; padding: 16px; background: #E3F2FD; border-radius: 8px; border-left: 4px solid #2196F3;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-subway"></i> å»ºè­°äº¤é€šæ–¹å¼
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                <strong>ğŸš‡ JRæ±è¥¿ç·šï¼ˆæœ€ç°¡å–®ï¼‰ï¼š</strong><br>
                                â€¢ å¾æ¢…ç”°ç«™æ­ä¹˜JRæ±è¥¿ç·š<br>
                                â€¢ <strong>æ¢…ç”°ç«™å»ºè­°å…¥å£ï¼š</strong>ä¸­å¤®æ”¹æœ­å£ â†’ JRæ±è¥¿ç·šæœˆå°<br>
                                â€¢ æ¢…ç”°ç«™ â†’ åŒ—æ–°åœ°ç«™ï¼ˆ1ç«™ï¼Œç´„2åˆ†é˜ï¼‰<br>
                                â€¢ <strong>åŒ—æ–°åœ°ç«™å»ºè­°å‡ºå£ï¼š</strong>11-21è™Ÿå‡ºå£ï¼ˆå¾€æ›¾æ ¹å´æ–°åœ°æ–¹å‘ï¼‰<br>
                                â€¢ æ­¥è¡Œ3åˆ†é˜åˆ°é”<br>
                                <strong style="color: #1976D2;">ç¸½æ™‚é–“ï¼šç´„10åˆ†é˜</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ¨ æ™šä¸Šå›é…’åº—</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-hotel"></i> è¿”å› HOTEL HILLARYS Shinsaibashi
                    </div>
                    <div class="location-details">
                        <!-- å»ºè­°äº¤é€šæ–¹å¼ -->
                        <div style="padding: 16px; background: #E3F2FD; border-radius: 8px; border-left: 4px solid #2196F3;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-subway"></i> å»ºè­°äº¤é€šæ–¹å¼
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                <strong>ğŸš‡ å¾¡å ‚ç­‹ç·šï¼ˆæ¨è–¦ï¼‰ï¼š</strong><br>
                                â€¢ å¾åŒ—æ–°åœ°æ­¥è¡Œè‡³æ¢…ç”°ç«™ï¼ˆç´„5åˆ†é˜ï¼‰<br>
                                â€¢ <strong>æ¢…ç”°ç«™å»ºè­°å…¥å£ï¼š</strong>ä¸­å¤®æ”¹æœ­å£ â†’ å¾¡å ‚ç­‹ç·šæœˆå°<br>
                                â€¢ æ­ä¹˜å¾¡å ‚ç­‹ç·šå¾€é›£æ³¢æ–¹å‘<br>
                                â€¢ æ¢…ç”°ç«™ â†’ å¿ƒé½‹æ©‹ç«™ï¼ˆ2ç«™ï¼Œç´„5åˆ†é˜ï¼‰<br>
                                â€¢ <strong>å¿ƒé½‹æ©‹ç«™å»ºè­°å‡ºå£ï¼š</strong>6è™Ÿå‡ºå£ï¼ˆæœ€è¿‘é…’åº—ï¼‰<br>
                                â€¢ æ­¥è¡Œå›é…’åº—ï¼ˆç´„3åˆ†é˜ï¼‰<br>
                                <strong style="color: #1976D2;">ç¸½æ™‚é–“ï¼šç´„15åˆ†é˜</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ—©åˆé¤ï¼š</strong>æ¢…ç”°è‡ªç”±å®‰æ’
                </div>
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ™šé¤ï¼š</strong>Burlesque Osakaï¼ˆ19:30å·²é ç´„ï¼‰
                </div>
            </div>
        </div>

        <!-- Day 7 -->
        <div class="day-card" id="day7">
            <div class="day-header day-7">
                <div>
                    <h2 class="day-title">Day 7 - å¤§é˜ªè‡ªç”±æ´»å‹•</h2>
                    <p class="day-date">1æœˆ31æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸŒ å…¨æ—¥</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-map-marked-alt"></i> å¤§é˜ªè‡ªç”±æ´»å‹•
                    </div>
                    <div class="location-details">
                        <p style="color: #666;">æœ€å¾Œè³¼ç‰©ã€ç¾é£Ÿã€è§€å…‰è‡ªç”±å®‰æ’</p>
                        <div style="margin-top: 8px;">
                            <strong>æ¨è–¦æ´»å‹•ï¼š</strong>
                            <ul style="margin-left: 20px; color: #666;">
                                <li>å¤§é˜ªåŸå…¬åœ’</li>
                                <li>é»‘é–€å¸‚å ´</li>
                                <li>å¿ƒé½‹æ©‹ã€é“é “å €æœ€å¾Œè³¼ç‰©</li>
                                <li>é›£æ³¢å…«é˜ªç¥ç¤¾</li>
                                <li>é€šå¤©é–£ã€æ–°ä¸–ç•Œ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="meal-info">
                <div class="meal-item">
                    <i class="fas fa-utensils"></i> <strong>æ—©åˆæ™šé¤ï¼š</strong>è‡ªç”±å®‰æ’
                </div>
            </div>
        </div>

        <!-- Day 8 -->
        <div class="day-card" id="day8">
            <div class="day-header day-8">
                <div>
                    <h2 class="day-title">Day 8 - é›¢é–‹æ—¥æœ¬</h2>
                    <p class="day-date">2æœˆ1æ—¥ï¼ˆæ˜ŸæœŸæ—¥ï¼‰</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸ›ï¸ ä¸Šåˆ-ä¸‹åˆ</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-shopping-bag"></i> æœ€å¾Œè³¼ç‰©æ™‚é–“
                    </div>
                    <div class="location-details">
                        <p style="color: #666;">æ•´ç†è¡Œæã€æœ€å¾Œè³¼ç‰©</p>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">ğŸš‡ 15:15 å‰å¾€æ©Ÿå ´</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-train"></i> å¿ƒé½‹æ©‹ â†’ é—œè¥¿æ©Ÿå ´
                    </div>
                    <div class="location-details">
                        <!-- é®®æ˜æé†’æ¡† -->
                        <div style="background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%); padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 3px solid #EF5350; box-shadow: 0 4px 12px rgba(239, 83, 80, 0.3);">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <i class="fas fa-exclamation-triangle" style="font-size: 28px; color: #C62828; animation: pulse 2s infinite;"></i>
                                <div style="font-size: 20px; font-weight: 700; color: #C62828;">é‡è¦ï¼šå»ºè­°16:05å‰åˆ°é”æ©Ÿå ´ï¼ˆèµ·é£›å‰3å°æ™‚ï¼‰</div>
                            </div>
                            <div style="font-size: 16px; margin-left: 40px; color: #C62828;">
                                â° å»ºè­°å‡ºç™¼æ™‚é–“ï¼š15:15 å¾é…’åº—å‡ºç™¼<br>
                                âœˆï¸ é ç•™å……è¶³æ™‚é–“è¾¦ç†ç™»æ©Ÿæ‰‹çºŒ
                            </div>
                        </div>

                        <div style="padding: 16px; background: #E8F5E9; border-radius: 8px; border-left: 4px solid #4CAF50; margin-bottom: 12px;">
                            <div style="font-weight: 700; font-size: 16px; color: #2E7D32; margin-bottom: 12px;">
                                <i class="fas fa-train"></i> é¸é …Aï¼šå—æµ·é›»éµç‰¹æ€¥Rapi:tï¼ˆæ¨è–¦ï¼‰
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šé›£æ³¢ç«™ â†’ é—œè¥¿æ©Ÿå ´ç«™ï¼ˆç´„40åˆ†é˜ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,450/äºº<br>
                                â€¢ å¾é…’åº—ï¼šæ­¥è¡Œè‡³å¿ƒé½‹æ©‹ç«™ï¼Œè½‰åœ°éµè‡³é›£æ³¢ç«™ï¼ˆ5åˆ†é˜ï¼‰<br>
                                <strong style="color: #2E7D32;">ç¸½æ™‚é–“ï¼šç´„50åˆ†é˜</strong><br>
                                <strong style="color: #C62828;">å»ºè­°15:15å¾é…’åº—å‡ºç™¼</strong>
                            </div>
                        </div>

                        <div style="padding: 16px; background: #E3F2FD; border-radius: 8px; border-left: 4px solid #2196F3; margin-bottom: 12px;">
                            <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px;">
                                <i class="fas fa-train"></i> é¸é …Bï¼šJRé—œç©ºå¿«é€Ÿ
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šé›£æ³¢/å¤©ç‹å¯º â†’ é—œè¥¿æ©Ÿå ´ç«™ï¼ˆç´„50åˆ†é˜ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,100/äºº<br>
                                <strong style="color: #1976D2;">ç¸½æ™‚é–“ï¼šç´„1å°æ™‚</strong><br>
                                <strong style="color: #C62828;">å»ºè­°15:00å¾é…’åº—å‡ºç™¼</strong>
                            </div>
                        </div>

                        <div style="padding: 16px; background: #FFF3E0; border-radius: 8px; border-left: 4px solid #FF9800;">
                            <div style="font-weight: 700; font-size: 16px; color: #F57C00; margin-bottom: 12px;">
                                <i class="fas fa-bus"></i> é¸é …Cï¼šæ©Ÿå ´å·´å£«
                            </div>
                            <div style="color: #666; line-height: 1.8;">
                                â€¢ è·¯ç·šï¼šé›£æ³¢OCAT â†’ é—œè¥¿æ©Ÿå ´ï¼ˆç´„50åˆ†é˜ï¼‰<br>
                                â€¢ ç¥¨åƒ¹ï¼šç´„ JPY 1,100/äºº<br>
                                <strong style="color: #C62828;">å»ºè­°15:15å¾é…’åº—å‡ºç™¼</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="time-badge">âœˆï¸ 19:05 èµ·é£›</div>
                <div class="location-box">
                    <div class="location-name">
                        <i class="fas fa-plane"></i> èˆªç­ CX 569
                    </div>
                    <div class="location-details">
                        <div class="detail-row">
                            <span><strong>èµ·é£›ï¼š</strong>19:05 é—œè¥¿æ©Ÿå ´ Terminal 1</span>
                            <span><strong>æŠµé”ï¼š</strong>22:40 é¦™æ¸¯</span>
                        </div>
                        <div class="badge reserved">
                            <i class="fas fa-check-circle"></i> å·²ç¢ºèª
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‰“åŒ…æ¸…å–® -->
        <div class="container" style="margin-top: 40px; margin-bottom: 40px;">
            <div class="day-card" style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border: 2px solid #FF9800;">
                <div style="text-align: center; padding: 20px 0; border-bottom: 2px solid #FF9800;">
                    <h2 style="font-size: 28px; font-weight: 700; color: #F57C00; margin-bottom: 8px;">
                        ğŸ’ æ‰“åŒ…æ¸…å–®
                    </h2>
                    <p style="color: #666; font-size: 14px;">
                        å‡ºç™¼å‰å¿…å‚™ç‰©å“æª¢æŸ¥æ¸…å–®
                    </p>
                </div>

                <div style="padding: 24px;">
                    <!-- è­‰ä»¶é¡ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #2196F3;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #1976D2; margin-bottom: 16px;">
                            <i class="fas fa-passport"></i> è­‰ä»¶é¡
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è­·ç…§(æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>åœ‹éš›é§•ç…§</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é¦™æ¸¯é§•ç…§</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ä¿¡ç”¨å¡(Visa/Master)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ç¾é‡‘(æ—¥åœ“)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ä¿éšªå–®å½±æœ¬</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- é›»å­ç”¢å“ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #4CAF50;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #2E7D32; margin-bottom: 16px;">
                            <i class="fas fa-mobile-alt"></i> é›»å­ç”¢å“
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ‰‹æ©Ÿ + å……é›»å™¨</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è¡Œå‹•é›»æº</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ç›¸æ©Ÿ + è¨˜æ†¶å¡</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è½‰æ¥é ­(æ—¥æœ¬Aå‹)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è€³æ©Ÿ</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>WiFiåˆ†äº«å™¨/SIMå¡</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- è¡£ç‰©é¡ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #9C27B0;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #7B1FA2; margin-bottom: 16px;">
                            <i class="fas fa-tshirt"></i> è¡£ç‰©é¡(1æœˆåº•å†¬å­£)
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ä¿æš–å¤–å¥—(åš)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é•·è¢–ä¸Šè¡£(æ•¸ä»¶)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é•·è¤²(æ•¸ä»¶)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ä¿æš–å…§è¡£</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>åœå·¾</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ‰‹å¥—</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è¥ªå­(æ•¸é›™)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>å…§è¡£è¤²(æ•¸å¥—)</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>èˆ’é©é‹å­</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>å®¤å…§æ‹–é‹</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- ç›¥æ´—ç”¨å“ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #00BCD4;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #0097A7; margin-bottom: 16px;">
                            <i class="fas fa-soap"></i> ç›¥æ´—ç”¨å“
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ç‰™åˆ· + ç‰™è†</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ´—é¢ä¹³</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ²æµ´ä¹³ + æ´—é«®ç²¾</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è­·è†šå“</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é˜²æ›¬ä¹³</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ¯›å·¾</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>åŒ–å¦å“</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è¡›ç”Ÿç”¨å“</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- è—¥å“é¡ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #F44336;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #C62828; margin-bottom: 16px;">
                            <i class="fas fa-pills"></i> è—¥å“é¡
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>å¸¸ç”¨è—¥ç‰©</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ„Ÿå†’è—¥</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æ­¢ç—›è—¥</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è…¸èƒƒè—¥</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>OKç¹ƒ</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>æšˆè»Šè—¥</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- å…¶ä»–ç”¨å“ -->
                    <div style="background: white; padding: 20px; border-radius: 12px; border-left: 4px solid #FF9800;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #F57C00; margin-bottom: 16px;">
                            <i class="fas fa-box"></i> å…¶ä»–ç”¨å“
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é›¨å‚˜ / é›¨è¡£</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>å¤ªé™½çœ¼é¡</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ç’°ä¿è¢‹</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ä¿æº«ç“¶</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>ç­†è¨˜æœ¬ + ç­†</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>é›¶é£Ÿ</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è¡Œç¨‹è¡¨åˆ—å°ç‰ˆ</span>
                                </label>
                            </div>
                            <div style="padding: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 8px; width: 18px; height: 18px;">
                                    <span>è³¼ç‰©è¢‹(è£æˆ°åˆ©å“)</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- æº«é¦¨æç¤º -->
                    <div style="background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #2196F3; margin-top: 20px;">
                        <div style="font-weight: 700; color: #1976D2; margin-bottom: 8px;">
                            <i class="fas fa-lightbulb"></i> æº«é¦¨æç¤º
                        </div>
                        <ul style="color: #666; font-size: 14px; line-height: 1.8; padding-left: 20px;">
                            <li>1æœˆåº•é—œè¥¿åœ°å€æ°£æº«ç´„5-10Â°C,è«‹æº–å‚™è¶³å¤ ä¿æš–è¡£ç‰©</li>
                            <li>æ—¥æœ¬å†¬å­£å®¤å…§æš–æ°£å……è¶³,å»ºè­°æ´‹è”¥å¼ç©¿æ­æ–¹ä¾¿èª¿æ•´</li>
                            <li>å†¬å­£å¤šé›¨,å‹™å¿…æ”œå¸¶é›¨å…·</li>
                            <li>æ—¥æœ¬é›»å£“100V,æ’é ­ç‚ºAå‹(æ‰å¹³é›™å­”),å»ºè­°æ”œå¸¶è½‰æ¥é ­</li>
                            <li>è‡ªé§•éŠå»ºè­°æ”œå¸¶è»Šç”¨å……é›»å™¨</li>
                            <li>è³¼ç‰©æ™‚å»ºè­°é ç•™è¡Œæç©ºé–“è£æˆ°åˆ©å“</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emergency Contact Box -->
        <div class="emergency-box">
            <div class="emergency-title">
                <i class="fas fa-phone-volume"></i> ç·Šæ€¥è¯çµ¡è³‡è¨Š
            </div>
            <div style="display: grid; gap: 12px;">
                <div>
                    <strong>æ—¥æœ¬ç·Šæ€¥é›»è©±ï¼š</strong>
                    <div style="margin-top: 4px;">
                        <a href="tel:110" style="color: #C62828; text-decoration: none; margin-right: 16px;">
                            <i class="fas fa-shield-alt"></i> è­¦å¯Ÿï¼š110
                        </a>
                        <a href="tel:119" style="color: #C62828; text-decoration: none;">
                            <i class="fas fa-ambulance"></i> æ¶ˆé˜²/æ•‘è­·ï¼š119
                        </a>
                    </div>
                </div>
                <div>
                    <strong>ä¸­åœ‹é§å¤§é˜ªç¸½é ˜äº‹é¤¨ï¼š</strong>
                    <a href="tel:+81-6-6445-9481" style="color: #1976D2; text-decoration: none; display: block; margin-top: 4px;">
                        <i class="fas fa-phone"></i> +81-6-6445-9481
                    </a>
                </div>
                <div>
                    <strong>ç§Ÿè»Šå…¬å¸ï¼š</strong>
                    <a href="tel:0598-26-4457" style="color: #1976D2; text-decoration: none; display: block; margin-top: 4px;">
                        <i class="fas fa-car"></i> Toyota Rent a Car: 0598-26-4457
                    </a>
                </div>
            </div>
        </div>

        <!-- Kuse Branding -->
        <a href="https://kuse.ai" target="_blank" class="kuse-branding" style="">
            <span>made with</span>
            <svg viewBox="0,0,160,44" xmlns="http://www.w3.org/2000/svg"><path d="m.01,20.65C-.43,8.25,9.3-2.03,22.04.34,34.78,2.72,43.29,8.32,43.29,22.9s-8.66,19.01-22.03,20.3C7.9,44.5.46,33.05.01,20.65z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m146.76,7.94c8.07,0,13.24,6.15,13.24,14.58v1.39h-20.75c.45,4.05,3.51,7.37,8.57,7.37,2.62,0,5.73-1.05,7.62-2.94l2.67,3.83c-2.67,2.55-6.62,3.88-10.9,3.88-8.07,0-14.08-5.6-14.08-14.08,0-7.76,5.67-14.02,13.63-14.02zm0,4.77c-5.01,0-7.29,3.83-7.57,7.1h15.13c-.11-3.16-2.28-7.1-7.57-7.1z" fill="currentColor"></path><path d="m86.64,24.49c0,4.15,2.39,6.84,6.84,6.84,4.4,0,6.84-2.69,6.84-6.84V8.55h5.37v16.33c0,6.7-4.06,11.14-12.21,11.14-8.21,0-12.21-4.5-12.21-11.09V8.55h5.37v15.94zm32.99-16.55c4.49,0,8.06,1.47,10.6,3.86l-2.59,3.81c-2.05-2-5.28-3.08-8.06-3.08-2.88,0-4.84,1.37-4.84,3.32,0,1.91,2.64,2.54,5.81,3.27,4.59,1.08,10.26,2.4,10.26,8.46,0,4.94-3.76,8.41-11.14,8.41-4.98,0-8.94-1.76-11.24-4.11l2.54-4.11c1.86,1.91,5.18,3.67,8.84,3.67,3.91,0,5.57-1.66,5.57-3.62,0-2.3-2.88-2.98-6.21-3.76-4.54-1.08-9.87-2.3-9.87-8.06,0-4.5,4.2-8.06,10.31-8.06zM60.79,20.82,71.44,8.55h6.5L66.46,21.26,78.82,35.44h-6.5l-9.28-11.1-2.25,2.49v8.6h-5.33V8.55h5.33v12.27z" fill="currentColor"></path></svg>
        </a>
    </div>

    <!-- Reminders Sidebar -->
    <div class="sidebar" id="remindersSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ“‹ æé†’äº‹é …</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-suitcase-rolling"></i> å‡ºç™¼å‰æº–å‚™æ¸…å–®
            </h4>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep1" onchange="saveReminders()">
                <label for="prep1" class="reminder-text">è­·ç…§æª¢æŸ¥ï¼ˆæœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Šï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep2" onchange="saveReminders()">
                <label for="prep2" class="reminder-text">æ©Ÿç¥¨ç¢ºèªï¼ˆCX 596/569ï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep3" onchange="saveReminders()">
                <label for="prep3" class="reminder-text">æ‰€æœ‰é…’åº—é è¨‚ç¢ºèª</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep4" onchange="saveReminders()">
                <label for="prep4" class="reminder-text">ç§Ÿè»Šé è¨‚ç¢ºèª</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep5" onchange="saveReminders()">
                <label for="prep5" class="reminder-text">æ—¥å…ƒç¾é‡‘æº–å‚™</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep6" onchange="saveReminders()">
                <label for="prep6" class="reminder-text">ä¿¡ç”¨å¡é€šçŸ¥éŠ€è¡Œ</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep7" onchange="saveReminders()">
                <label for="prep7" class="reminder-text">åœ‹éš›é§•ç…§æº–å‚™</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="prep8" onchange="saveReminders()">
                <label for="prep8" class="reminder-text">æ—…éŠä¿éšªè³¼è²·</label>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-clock"></i> æ¯æ—¥æé†’
            </h4>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="daily1" onchange="saveReminders()">
                <label for="daily1" class="reminder-text"><strong>Day 1:</strong> â° 05:20 æ©Ÿå ´é›†åˆï¼ˆèµ·é£›å‰3å°æ™‚ï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="daily2" onchange="saveReminders()">
                <label for="daily2" class="reminder-text"><strong>Day 2:</strong> â° 09:00 æº–å‚™å–è»Š | â° 11:00 å‰å¾€ä»»å¤©å ‚åšç‰©é¤¨</label>
            </div>
            <div class="reminder-item" style="background: #FFEBEE; border-left: 4px solid #D32F2F; padding: 12px; border-radius: 8px;">
                <input type="checkbox" class="reminder-checkbox" id="daily3" onchange="saveReminders()">
                <label for="daily3" class="reminder-text"><strong>Day 4:</strong> â° 10:30 å‰å¾€æµ·å¥³å°å±‹ | <span style="color: #D32F2F; font-weight: 700;">âš ï¸ 16:00 å¿…é ˆå‰å¾€æ—¥è½æ™¯é»ï¼ˆ17:00å‰åˆ°é”ï¼ï¼‰</span></label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="daily4" onchange="saveReminders()">
                <label for="daily4" class="reminder-text"><strong>Day 5:</strong> â° 12:00 æº–å‚™BBQåˆé¤ | â° 17:30 é–‹å§‹è¿”å›å¤§é˜ª</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="daily5" onchange="saveReminders()">
                <label for="daily5" class="reminder-text"><strong>Day 6:</strong> â° 18:30 æº–å‚™å‰å¾€Burlesque</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="daily6" onchange="saveReminders()">
                <label for="daily6" class="reminder-text"><strong>Day 8:</strong> â° 16:05 å‰å¾€æ©Ÿå ´ï¼ˆèµ·é£›å‰3å°æ™‚ï¼‰</label>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-money-bill-wave"></i> è²¡å‹™å¾…ä»˜æ¬¾æé†’
            </h4>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="payment1" onchange="saveReminders()">
                <label for="payment1" class="reminder-text">ç§Ÿè»Šè²»ç”¨ JPY 47,000ï¼ˆDay 5é‚„è»Šæ™‚æ”¯ä»˜ï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="payment2" onchange="saveReminders()">
                <label for="payment2" class="reminder-text">æµ·å¥³å°å±‹ JPY 30,800ï¼ˆDay 4ç¾å ´æ”¯ä»˜ï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="payment3" onchange="saveReminders()">
                <label for="payment3" class="reminder-text">Burlesque JPY 35,200ï¼ˆç´„ HKD 1,936ï¼‰ï¼ˆDay 6ç¾å ´æ”¯ä»˜ï¼‰</label>
            </div>
            <div class="reminder-item">
                <input type="checkbox" class="reminder-checkbox" id="payment4" onchange="saveReminders()">
                <label for="payment4" class="reminder-text">Grill Eight BBQ JPY 24,000ï¼ˆç´„ HKD 1,320ï¼‰ï¼ˆDay 5ç¾å ´æ”¯ä»˜ï¼‰</label>
            </div>
            <div style="margin-top: 12px; padding: 12px; background: #FFF3E0; border-radius: 8px; font-weight: 600;">
                <i class="fas fa-calculator"></i> ç¸½è¨ˆæœªä»˜ï¼šJPY 137,000ï¼ˆç´„ HKD 7,535ï¼‰
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-calendar-check"></i> é‡è¦é ç´„ç¢ºèª
            </h4>
            <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                <strong>Day 2:</strong> ä»»å¤©å ‚åšç‰©é¤¨ 12:00
            </div>
            <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                <strong>Day 4:</strong> æµ·å¥³å°å±‹ç›¸å·®ç«ˆ 11:30
            </div>
            <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                <strong>Day 5:</strong> Grill Eight BBQ 13:00-15:00
            </div>
            <div style="background: #E8F5E9; padding: 12px; border-radius: 8px;">
                <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                <strong>Day 6:</strong> Burlesque Osaka 19:30<br>
                <span style="font-size: 12px; color: #666;">é è¨‚è™Ÿï¼š52981</span>
            </div>
        </div>
    </div>


    <!-- Map Code Sidebar -->
    <div class="sidebar" id="mapcodeSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ—ºï¸ åœ°åœ–ç¸½è¦½</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">Day 1 - å¤§é˜ª</h4>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">å¿ƒé½‹æ©‹é…’åº—</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">1 286 374*21</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('1 286 374*21', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('å¤§é˜ªåºœå¤§é˜ªå¸‚ä¸­å¤®åŒºæ±å¿ƒæ–æ©‹1-8-21')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">Day 2 - äº¬éƒ½/æ´¥å¸‚</h4>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">Toyotaç§Ÿè»Š</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">1 728 843*63</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('1 728 843*63', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.678155626496135, 135.50507366924012')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #E8F5E9; border-radius: 8px; border-left: 3px solid #4CAF50;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #2E7D32;">ä»»å¤©å ‚åœè»Šå ´A</div>
                        <div style="font-family: 'Courier New', monospace; color: #2E7D32; font-weight: 700;">7 199 668*31</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('7 199 668*31', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('Kaguraden-23 Oguracho, Uji, Kyoto 611-0042æ—¥æœ¬')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #E3F2FD; border-radius: 8px; border-left: 3px solid #2196F3;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #1976D2;">ä»»å¤©å ‚åœè»Šå ´B</div>
                        <div style="font-family: 'Courier New', monospace; color: #1976D2; font-weight: 700;">7 199 736*61</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('7 199 736*61', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.89302616183889, 135.78619446881103')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #F3E5F5; border-radius: 8px; border-left: 3px solid #9C27B0;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #7B1FA2;">ä»»å¤©å ‚åšç‰©é¤¨ä¸»é¤¨</div>
                        <div style="font-family: 'Courier New', monospace; color: #7B1FA2; font-weight: 700;">7 199 697*86</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('7 199 697*86', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.89285411432016, 135.78418470916705')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">Hotel Global View Tsu</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">531 511 373*46</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('531 511 373*46', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('ä¸‰é‡çœŒæ´¥å¸‚åºƒæ˜ç”º345-4')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">Day 3-5 - Hotel Vison</h4>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">æ¾é‡å£½å–œç‡’</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">531 511 713*55</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('531 511 713*55', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’514-0009 Mie, Tsu, Hadokorocho, 381 ã‚¢ãƒãƒƒã‚¯ã‚¹ 1F ä¸‰äº¤ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">Hotel Vison</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">255 737 756*30</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('255 737 756*30', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('Japan, ã€’519-2170 Mie, Taki District, Taki, Vison, 672ç•ª1')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">ä¸€å‡ç“¶ç‡’è‚‰</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">80 260 766*01</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('80 260 766*01', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('ä¸‰é‡çœŒæ¾é˜ªå¸‚å®®ç”º144-5')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">Day 4 - ä¼Šå‹¢/é³¥ç¾½</h4>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">æµ·å¥³å°å±‹ç›¸å·®ç«ˆ</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">338 499 193</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('338 499 193', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’517-0032 Mie, Toba, Osatsucho, å‰ã®æµœ')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">ä¼Šå‹¢ç¥å®®å…§å®®</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">118 431 598*36</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('118 431 598*36', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('æ—¥æœ¬ã€’516-0024 Mie, Ise, Ujiimazaikecho, ï¼™ï¼“')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">é³¥ç¾½æ°´æ—é¤¨</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">118 536 237*73</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('118 536 237*73', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('3 Chome-3-1484-111 Toba, Mie 517-0011æ—¥æœ¬')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">äºŒè¦‹èˆˆç‰ç¥ç¤¾</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">118 619 558*46</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('118 619 558*46', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.50853922164895, 136.7856158427696')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">é³¥ç¾½å±•æœ›å°åœè»Š</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">338 620 752*17</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('338 620 752*17', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.42705758237021, 136.91454580934243')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">ãŸã‹å±‹ä¼Šå‹¢é…’å ´</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">118 520 895*70</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('118 520 895*70', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.48641540063828, 136.71257744526096')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">Day 5-8 - å¤§é˜ª</h4>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">HOTEL HILLARYS</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">1 286 438*52</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('1 286 438*52', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('1 Chome-17-11 Higashishinsaibashi, Chuo Ward, Osaka, 542-0083æ—¥æœ¬')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px;">Burlesque Osaka</div>
                        <div style="font-family: 'Courier New', monospace; color: #FF5252; font-weight: 700;">1 317 162*85</div>
                    </div>
                    <div style="display: flex; gap: 6px;">
                        <button class="copy-btn" onclick="copyMapCode('1 317 162*85', this)" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="nav-map-btn" onclick="openGoogleMaps('34.697541465682036, 135.4965089273827')" style="padding: 6px 12px; font-size: 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: all 0.3s;">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Currency Converter Sidebar -->
    <div class="sidebar" id="currencySidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ’± åŒ¯ç‡è¨ˆç®—å™¨</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="reminder-section">
            <div style="background: #E3F2FD; padding: 16px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 14px; color: #666; margin-bottom: 8px;">ç•¶å‰åŒ¯ç‡</div>
                <div style="font-size: 28px; font-weight: 700; color: #1976D2;" id="currencyDisplayRate">
                    1 JPY = 0.055 HKD
                </div>
                <div id="currencyExchangeRateStatus" style="font-size: 11px; color: #666; margin-top: 4px;">
                    æ­£åœ¨è¼‰å…¥å³æ™‚åŒ¯ç‡...
                </div>
                <button onclick="fetchLiveExchangeRate('currency')" style="margin-top: 12px; padding: 8px 16px; background: #2196F3; color: white; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> æ›´æ–°åŒ¯ç‡
                </button>
            </div>

            <h4 class="reminder-section-title">
                <i class="fas fa-calculator"></i> JPY â†’ HKD
            </h4>
            <div style="background: #f9f9f9; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <label style="display: block; color: #666; font-size: 14px; margin-bottom: 8px;">è¼¸å…¥æ—¥å…ƒé‡‘é¡:</label>
                <input type="number" id="jpyInput" placeholder="ä¾‹å¦‚ï¼š10000" style="width: 100%; padding: 12px; border: 2px solid #2196F3; border-radius: 8px; font-size: 16px; margin-bottom: 12px;" oninput="convertJPYtoHKD()">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-arrow-down" style="color: #2196F3; font-size: 20px;"></i>
                    <div style="flex: 1; background: white; padding: 12px; border-radius: 8px; border: 2px solid #4CAF50;">
                        <div style="font-size: 12px; color: #666; margin-bottom: 4px;">æ¸¯å¹£é‡‘é¡:</div>
                        <div style="font-size: 24px; font-weight: 700; color: #4CAF50;" id="hkdResult">HKD 0</div>
                    </div>
                </div>
            </div>

            <h4 class="reminder-section-title">
                <i class="fas fa-calculator"></i> HKD â†’ JPY
            </h4>
            <div style="background: #f9f9f9; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <label style="display: block; color: #666; font-size: 14px; margin-bottom: 8px;">è¼¸å…¥æ¸¯å¹£é‡‘é¡:</label>
                <input type="number" id="hkdInput" placeholder="ä¾‹å¦‚ï¼š1000" style="width: 100%; padding: 12px; border: 2px solid #4CAF50; border-radius: 8px; font-size: 16px; margin-bottom: 12px;" oninput="convertHKDtoJPY()">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-arrow-down" style="color: #4CAF50; font-size: 20px;"></i>
                    <div style="flex: 1; background: white; padding: 12px; border-radius: 8px; border: 2px solid #2196F3;">
                        <div style="font-size: 12px; color: #666; margin-bottom: 4px;">æ—¥å…ƒé‡‘é¡:</div>
                        <div style="font-size: 24px; font-weight: 700; color: #2196F3;" id="jpyResult">JPY 0</div>
                    </div>
                </div>
            </div>

            <h4 class="reminder-section-title">
                <i class="fas fa-list"></i> å¸¸ç”¨é‡‘é¡å¿«æŸ¥
            </h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 16px; font-weight: 700; color: #2E7D32;">JPY 1,000</div>
                    <div style="font-size: 14px; color: #666;" class="quick-ref-hkd" data-jpy="1000">â‰ˆ HKD 55</div>
                </div>
                <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 16px; font-weight: 700; color: #2E7D32;">JPY 5,000</div>
                    <div style="font-size: 14px; color: #666;" class="quick-ref-hkd" data-jpy="5000">â‰ˆ HKD 275</div>
                </div>
                <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 16px; font-weight: 700; color: #2E7D32;">JPY 10,000</div>
                    <div style="font-size: 14px; color: #666;" class="quick-ref-hkd" data-jpy="10000">â‰ˆ HKD 550</div>
                </div>
                <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 16px; font-weight: 700; color: #2E7D32;">JPY 50,000</div>
                    <div style="font-size: 14px; color: #666;" class="quick-ref-hkd" data-jpy="50000">â‰ˆ HKD 2,750</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Route Overview Sidebar -->
    <div class="sidebar" id="routeSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ—ºï¸ è·¯ç·šç¸½è¦½</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-map-marked-alt"></i> 8å¤©è¡Œç¨‹è·¯ç·šåœ–
            </h4>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 12px; text-align: center;">
                <div style="font-size: 14px; color: #666; line-height: 2; text-align: left;">
                    ğŸ“ <strong>Day 1:</strong> é¦™æ¸¯ âœˆï¸ å¤§é˜ªï¼ˆå¿ƒé½‹æ©‹ï¼‰<br>
                    ğŸ“ <strong>Day 2:</strong> å¤§é˜ª ğŸš— äº¬éƒ½ï¼ˆä»»å¤©å ‚ï¼‰â†’ æ´¥å¸‚<br>
                    ğŸ“ <strong>Day 3:</strong> æ´¥å¸‚ ğŸš— Hotel Vison<br>
                    ğŸ“ <strong>Day 4:</strong> Hotel Vison ğŸš— é³¥ç¾½/ä¼Šå‹¢ â†’ å›Vison<br>
                    ğŸ“ <strong>Day 5:</strong> Hotel Vison ğŸš— å¤§é˜ªï¼ˆå¿ƒé½‹æ©‹ï¼‰<br>
                    ğŸ“ <strong>Day 6:</strong> å¤§é˜ªï¼ˆæ¢…ç”°ï¼‰ğŸš‡<br>
                    ğŸ“ <strong>Day 7:</strong> å¤§é˜ªè‡ªç”±æ´»å‹• ğŸš‡<br>
                    ğŸ“ <strong>Day 8:</strong> å¤§é˜ª âœˆï¸ é¦™æ¸¯
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-car"></i> è‡ªé§•è·¯ç·šè©³æƒ…ï¼ˆDay 2-5ï¼‰
            </h4>

            <div style="background: #E3F2FD; padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 700; color: #1976D2; margin-bottom: 8px;">Day 2 è·¯ç·š</div>
                <div style="color: #666; font-size: 14px; line-height: 1.8;">
                    å¤§é˜ªå¿ƒé½‹æ©‹ â†’ äº¬éƒ½å®‡æ²»ï¼ˆä»»å¤©å ‚ï¼‰â†’ æ´¥å¸‚<br>
                    <strong>ç¸½è·é›¢:</strong>ç´„120å…¬é‡Œ<br>
                    <strong>è¡Œè»Šæ™‚é–“:</strong>ç´„2.5å°æ™‚
                </div>
            </div>

            <div style="background: #E8F5E9; padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 700; color: #2E7D32; margin-bottom: 8px;">Day 3 è·¯ç·š</div>
                <div style="color: #666; font-size: 14px; line-height: 1.8;">
                    æ´¥å¸‚ â†’ Hotel Vison<br>
                    <strong>ç¸½è·é›¢:</strong>ç´„45å…¬é‡Œ<br>
                    <strong>è¡Œè»Šæ™‚é–“:</strong>ç´„45åˆ†é˜
                </div>
            </div>

            <div style="background: #F3E5F5; padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 700; color: #7B1FA2; margin-bottom: 8px;">Day 4 è·¯ç·š</div>
                <div style="color: #666; font-size: 14px; line-height: 1.8;">
                    Hotel Vison â†’ é³¥ç¾½ï¼ˆæµ·å¥³å°å±‹ï¼‰â†’ ä¼Šå‹¢/é³¥ç¾½æ™¯é» â†’ å›Vison<br>
                    <strong>ç¸½è·é›¢:</strong>ç´„100å…¬é‡Œï¼ˆå¾€è¿”ï¼‰<br>
                    <strong>è¡Œè»Šæ™‚é–“:</strong>ç´„2å°æ™‚
                </div>
            </div>

            <div style="background: #FFF3E0; padding: 16px; border-radius: 8px;">
                <div style="font-weight: 700; color: #F57C00; margin-bottom: 8px;">Day 5 è·¯ç·š</div>
                <div style="color: #666; font-size: 14px; line-height: 1.8;">
                    Hotel Vison â†’ å¤§é˜ªå¿ƒé½‹æ©‹<br>
                    <strong>ç¸½è·é›¢:</strong>ç´„150å…¬é‡Œ<br>
                    <strong>è¡Œè»Šæ™‚é–“:</strong>ç´„2.5-3å°æ™‚
                </div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-info-circle"></i> è¡Œè»Šç¸½è¨ˆ
            </h4>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; text-align: center;">
                <div style="font-size: 16px; margin-bottom: 12px;">è‡ªé§•ç¸½é‡Œç¨‹</div>
                <div style="font-size: 36px; font-weight: 700; margin-bottom: 8px;">ç´„ 415 å…¬é‡Œ</div>
                <div style="font-size: 14px; opacity: 0.9;">ç¸½è¡Œè»Šæ™‚é–“ï¼šç´„ 7.5 å°æ™‚</div>
            </div>
        </div>

        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-subway"></i> å¤§é˜ªå¸‚å€äº¤é€šï¼ˆDay 6-7ï¼‰
            </h4>
            <div style="background: #f9f9f9; padding: 16px; border-radius: 8px;">
                <div style="color: #666; font-size: 14px; line-height: 2;">
                    <strong>ä¸»è¦ä½¿ç”¨è·¯ç·š:</strong><br>
                    â€¢ å¾¡å ‚ç­‹ç·šï¼ˆå¿ƒé½‹æ©‹ â†” æ¢…ç”°ï¼‰<br>
                    â€¢ JRæ±è¥¿ç·šï¼ˆæ¢…ç”° â†” åŒ—æ–°åœ°ï¼‰<br>
                    â€¢ å ºç­‹ç·šï¼ˆé•·å €æ©‹ç«™ï¼‰<br>
                    <br>
                    <strong>å»ºè­°è³¼è²·:</strong><br>
                    å¤§é˜ªå‘¨éŠå¡ æˆ– ICOCAå¡
                </div>
            </div>
        </div>
    </div>

    <!-- Expenses Sidebar -->
    <div class="sidebar" id="expensesSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ’° é–‹æ”¯è¨˜éŒ„</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- é ‚éƒ¨: å„äººç¸½é–‹æ”¯æ‘˜è¦ -->
        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-users"></i> å„äººç¸½é–‹æ”¯æ‘˜è¦
            </h4>
            <div style="display: grid; gap: 12px;" id="expenseSummaryCards">
                <!-- Kahoå¯¦éš›æ¶ˆè²»å¡ç‰‡ -->
                <div class="person-summary-card" style="background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); border-left: 4px solid #2196F3;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <i class="fas fa-male" style="font-size: 24px; color: #1976D2;"></i>
                        <h6 style="font-size: 18px; font-weight: 700; color: #1976D2; margin: 0;">Kaho</h6>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å…±åŒé–‹æ”¯</span>
                            <span style="font-weight: 600; color: #1976D2;" id="kahoCommonExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å€‹äººæ¶ˆè²»</span>
                            <span style="font-weight: 600; color: #FF9800;" id="kahoPersonalExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; margin-top: 4px;">
                            <span style="color: #202020; font-size: 16px; font-weight: 700;">ç¸½æ¶ˆè²»</span>
                            <span style="font-weight: 700; color: #4CAF50; font-size: 18px;" id="kahoTotal">HKD 0</span>
                        </div>
                    </div>
                </div>

                <!-- Dickenå¯¦éš›æ¶ˆè²»å¡ç‰‡ -->
                <div class="person-summary-card" style="background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-left: 4px solid #4CAF50;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <i class="fas fa-user" style="font-size: 24px; color: #2E7D32;"></i>
                        <h6 style="font-size: 18px; font-weight: 700; color: #2E7D32; margin: 0;">Dicken</h6>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å…±åŒé–‹æ”¯</span>
                            <span style="font-weight: 600; color: #2E7D32;" id="dickenCommonExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å€‹äººæ¶ˆè²»</span>
                            <span style="font-weight: 600; color: #FF9800;" id="dickenPersonalExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; margin-top: 4px;">
                            <span style="color: #202020; font-size: 16px; font-weight: 700;">ç¸½æ¶ˆè²»</span>
                            <span style="font-weight: 700; color: #4CAF50; font-size: 18px;" id="dickenTotal">HKD 0</span>
                        </div>
                    </div>
                </div>

                <!-- æ³°æ°å¤«å©¦å¯¦éš›æ¶ˆè²»å¡ç‰‡ -->
                <div class="person-summary-card" style="background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); border-left: 4px solid #9C27B0;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <i class="fas fa-users" style="font-size: 24px; color: #7B1FA2;"></i>
                        <h6 style="font-size: 18px; font-weight: 700; color: #7B1FA2; margin: 0;">æ³°æ°å¤«å©¦</h6>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å…±åŒé–‹æ”¯</span>
                            <span style="font-weight: 600; color: #7B1FA2;" id="taiCommonExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #E0E0E0;">
                            <span style="color: #666; font-size: 14px;">å€‹äººæ¶ˆè²»</span>
                            <span style="font-weight: 600; color: #FF9800;" id="taiPersonalExpense">HKD 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; margin-top: 4px;">
                            <span style="color: #202020; font-size: 16px; font-weight: 700;">ç¸½æ¶ˆè²»</span>
                            <span style="font-weight: 700; color: #4CAF50; font-size: 18px;" id="taiTotal">HKD 0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŒ¯ç‡é¡¯ç¤ºå€åŸŸ -->
        <div style="background: #FFF3E0; padding: 12px; border-radius: 8px; margin-bottom: 16px; border-left: 4px solid #FF9800;">
            <div style="font-size: 13px; color: #666; margin-bottom: 4px;">
                <i class="fas fa-info-circle"></i> ç•¶å‰åŒ¯ç‡ï¼ˆåŒæ­¥è‡ªé–‹æ”¯é ç®—ï¼‰
            </div>
            <div style="font-size: 16px; font-weight: 700; color: #F57C00;">
                1 JPY = <span id="expenseRecordExchangeRate">0.055</span> HKD
            </div>
            <div style="font-size: 11px; color: #999; margin-top: 4px;">
                ğŸ’¡ åœ¨ã€Œé–‹æ”¯é ç®—ã€é é¢ä¿®æ”¹åŒ¯ç‡æœƒåŒæ­¥æ›´æ–°
            </div>
        </div>

        <!-- ä¸­æ®µ: é–‹æ”¯è¼¸å…¥è¡¨å–® -->
        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-edit"></i> æ–°å¢é–‹æ”¯è¨˜éŒ„
            </h4>
            
            <!-- Kahoè¼¸å…¥å€ -->
            <div style="background: #E3F2FD; padding: 16px; border-radius: 12px; margin-bottom: 16px; border-left: 4px solid #2196F3;">
                <div style="font-weight: 700; font-size: 16px; color: #1976D2; margin-bottom: 12px; cursor: pointer;" onclick="toggleExpenseInput('kaho')">
                    <i class="fas fa-chevron-down" id="kahoToggle"></i> ğŸ‘¨ Kaho
                </div>
                <div id="kahoInput" style="display: grid; gap: 10px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">è¡Œç¨‹æ—¥æœŸ</label>
                            <select id="kahoDay" style="width: 100%; padding: 8px; border: 2px solid #2196F3; border-radius: 6px; font-size: 14px; font-weight: 600; color: #202020;">
                                <option value="1">Day 1 (1æœˆ25æ—¥)</option>
                                <option value="2">Day 2 (1æœˆ26æ—¥)</option>
                                <option value="3">Day 3 (1æœˆ27æ—¥)</option>
                                <option value="4">Day 4 (1æœˆ28æ—¥)</option>
                                <option value="5">Day 5 (1æœˆ29æ—¥)</option>
                                <option value="6">Day 6 (1æœˆ30æ—¥)</option>
                                <option value="7">Day 7 (1æœˆ31æ—¥)</option>
                                <option value="8">Day 8 (2æœˆ1æ—¥)</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜é¡åˆ¥</label>
                            <select id="kahoCategory" style="width: 100%; padding: 8px; border: 2px solid #2196F3; border-radius: 6px; font-size: 14px;">
                                <option value="è†³é£Ÿ">è†³é£Ÿ</option>
                                <option value="é›œè²»">é›œè²»</option>
                                <option value="é–€ç¥¨">é–€ç¥¨</option>
                                <option value="å…¶ä»–" selected="">å…¶ä»–</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜æ€§è³ª</label>
                        <div style="display: flex; gap: 8px;" id="kahoNatureButtons">
                            <button type="button" class="nature-btn active" data-nature="å€‹äººæ¶ˆè²»" onclick="selectNature('kaho', 'å€‹äººæ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #2196F3; background: #2196F3; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                å€‹äººæ¶ˆè²»
                            </button>
                            <button type="button" class="nature-btn" data-nature="åœ˜é«”æ¶ˆè²»" onclick="selectNature('kaho', 'åœ˜é«”æ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                åœ˜é«”æ¶ˆè²»
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">è²¨å¹£</label>
                        <div style="display: flex; gap: 8px;" id="kahoCurrencyButtons">
                            <button type="button" class="currency-btn active" data-currency="HKD" onclick="selectCurrency('kaho', 'HKD')" style="flex: 1; padding: 8px; border: 2px solid #4CAF50; background: #4CAF50; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                HKD
                            </button>
                            <button type="button" class="currency-btn" data-currency="JPY" onclick="selectCurrency('kaho', 'JPY')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                JPY
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">é‡‘é¡</label>
                        <input type="number" id="kahoAmount" placeholder="è¼¸å…¥é‡‘é¡" style="width: 100%; padding: 8px; border: 2px solid #2196F3; border-radius: 6px; font-size: 14px;">
                    </div>
                    <button class="add-expense-btn" onclick="addExpense('kaho')">
                        <i class="fas fa-plus"></i> æ·»åŠ è¨˜éŒ„
                    </button>
                </div>
            </div>

            <!-- Dickenè¼¸å…¥å€ -->
            <div style="background: #E8F5E9; padding: 16px; border-radius: 12px; margin-bottom: 16px; border-left: 4px solid #4CAF50;">
                <div style="font-weight: 700; font-size: 16px; color: #2E7D32; margin-bottom: 12px; cursor: pointer;" onclick="toggleExpenseInput('dicken')">
                    <i class="fas fa-chevron-down" id="dickenToggle"></i> ğŸ‘¨ Dicken
                </div>
                <div id="dickenInput" style="display: grid; gap: 10px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">è¡Œç¨‹æ—¥æœŸ</label>
                            <select id="dickenDay" style="width: 100%; padding: 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 14px; font-weight: 600; color: #202020;">
                                <option value="1">Day 1 (1æœˆ25æ—¥)</option>
                                <option value="2">Day 2 (1æœˆ26æ—¥)</option>
                                <option value="3">Day 3 (1æœˆ27æ—¥)</option>
                                <option value="4">Day 4 (1æœˆ28æ—¥)</option>
                                <option value="5">Day 5 (1æœˆ29æ—¥)</option>
                                <option value="6">Day 6 (1æœˆ30æ—¥)</option>
                                <option value="7">Day 7 (1æœˆ31æ—¥)</option>
                                <option value="8">Day 8 (2æœˆ1æ—¥)</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜é¡åˆ¥</label>
                            <select id="dickenCategory" style="width: 100%; padding: 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 14px;">
                                <option value="è†³é£Ÿ">è†³é£Ÿ</option>
                                <option value="é›œè²»">é›œè²»</option>
                                <option value="é–€ç¥¨">é–€ç¥¨</option>
                                <option value="å…¶ä»–" selected="">å…¶ä»–</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜æ€§è³ª</label>
                        <div style="display: flex; gap: 8px;" id="dickenNatureButtons">
                            <button type="button" class="nature-btn active" data-nature="å€‹äººæ¶ˆè²»" onclick="selectNature('dicken', 'å€‹äººæ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #4CAF50; background: #4CAF50; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                å€‹äººæ¶ˆè²»
                            </button>
                            <button type="button" class="nature-btn" data-nature="åœ˜é«”æ¶ˆè²»" onclick="selectNature('dicken', 'åœ˜é«”æ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                åœ˜é«”æ¶ˆè²»
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">è²¨å¹£</label>
                        <div style="display: flex; gap: 8px;" id="dickenCurrencyButtons">
                            <button type="button" class="currency-btn active" data-currency="HKD" onclick="selectCurrency('dicken', 'HKD')" style="flex: 1; padding: 8px; border: 2px solid #4CAF50; background: #4CAF50; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                HKD
                            </button>
                            <button type="button" class="currency-btn" data-currency="JPY" onclick="selectCurrency('dicken', 'JPY')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                JPY
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">é‡‘é¡</label>
                        <input type="number" id="dickenAmount" placeholder="è¼¸å…¥é‡‘é¡" style="width: 100%; padding: 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 14px;">
                    </div>
                    <button class="add-expense-btn" onclick="addExpense('dicken')">
                        <i class="fas fa-plus"></i> æ·»åŠ è¨˜éŒ„
                    </button>
                </div>
            </div>

            <!-- æ³°æ°å¤«å©¦è¼¸å…¥å€ -->
            <div style="background: #F3E5F5; padding: 16px; border-radius: 12px; border-left: 4px solid #9C27B0;">
                <div style="font-weight: 700; font-size: 16px; color: #7B1FA2; margin-bottom: 12px; cursor: pointer;" onclick="toggleExpenseInput('tai')">
                    <i class="fas fa-chevron-down" id="taiToggle"></i> ğŸ‘« æ³°æ°å¤«å©¦
                </div>
                <div id="taiInput" style="display: grid; gap: 10px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">è¡Œç¨‹æ—¥æœŸ</label>
                            <select id="taiDay" style="width: 100%; padding: 8px; border: 2px solid #9C27B0; border-radius: 6px; font-size: 14px; font-weight: 600; color: #202020;">
                                <option value="1">Day 1 (1æœˆ25æ—¥)</option>
                                <option value="2">Day 2 (1æœˆ26æ—¥)</option>
                                <option value="3">Day 3 (1æœˆ27æ—¥)</option>
                                <option value="4">Day 4 (1æœˆ28æ—¥)</option>
                                <option value="5">Day 5 (1æœˆ29æ—¥)</option>
                                <option value="6">Day 6 (1æœˆ30æ—¥)</option>
                                <option value="7">Day 7 (1æœˆ31æ—¥)</option>
                                <option value="8">Day 8 (2æœˆ1æ—¥)</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜é¡åˆ¥</label>
                            <select id="taiCategory" style="width: 100%; padding: 8px; border: 2px solid #9C27B0; border-radius: 6px; font-size: 14px;">
                                <option value="è†³é£Ÿ">è†³é£Ÿ</option>
                                <option value="é›œè²»">é›œè²»</option>
                                <option value="é–€ç¥¨">é–€ç¥¨</option>
                                <option value="å…¶ä»–" selected="">å…¶ä»–</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">æ”¯ä»˜æ€§è³ª</label>
                        <div style="display: flex; gap: 8px;" id="taiNatureButtons">
                            <button type="button" class="nature-btn active" data-nature="å€‹äººæ¶ˆè²»" onclick="selectNature('tai', 'å€‹äººæ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #9C27B0; background: #9C27B0; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                å€‹äººæ¶ˆè²»
                            </button>
                            <button type="button" class="nature-btn" data-nature="åœ˜é«”æ¶ˆè²»" onclick="selectNature('tai', 'åœ˜é«”æ¶ˆè²»')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                åœ˜é«”æ¶ˆè²»
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">è²¨å¹£</label>
                        <div style="display: flex; gap: 8px;" id="taiCurrencyButtons">
                            <button type="button" class="currency-btn active" data-currency="HKD" onclick="selectCurrency('tai', 'HKD')" style="flex: 1; padding: 8px; border: 2px solid #4CAF50; background: #4CAF50; color: white; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                HKD
                            </button>
                            <button type="button" class="currency-btn" data-currency="JPY" onclick="selectCurrency('tai', 'JPY')" style="flex: 1; padding: 8px; border: 2px solid #E0E0E0; background: white; color: #666; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;">
                                JPY
                            </button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px; color: #666; font-weight: 600;">é‡‘é¡</label>
                        <input type="number" id="taiAmount" placeholder="è¼¸å…¥é‡‘é¡" style="width: 100%; padding: 8px; border: 2px solid #9C27B0; border-radius: 6px; font-size: 14px;">
                    </div>
                    <button class="add-expense-btn" onclick="addExpense('tai')">
                        <i class="fas fa-plus"></i> æ·»åŠ è¨˜éŒ„
                    </button>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨: å„äººè¨˜éŒ„æ˜ç´° -->
        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-list-alt"></i> å„äººè¨˜éŒ„æ˜ç´°
            </h4>
            
            <!-- Kahoè¨˜éŒ„ -->
            <div style="background: #E3F2FD; padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 700; color: #1976D2; margin-bottom: 8px;">ğŸ‘¨ Kaho</div>
                <div id="kahoRecordsList" class="expense-list">
                    <div style="text-align: center; color: #999; font-size: 13px; padding: 8px;">æš«ç„¡è¨˜éŒ„</div>
                </div>
            </div>

            <!-- Dickenè¨˜éŒ„ -->
            <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 700; color: #2E7D32; margin-bottom: 8px;">ğŸ‘¨ Dicken</div>
                <div id="dickenRecordsList" class="expense-list">
                    <div style="text-align: center; color: #999; font-size: 13px; padding: 8px;">æš«ç„¡è¨˜éŒ„</div>
                </div>
            </div>

            <!-- æ³°æ°å¤«å©¦è¨˜éŒ„ -->
            <div style="background: #F3E5F5; padding: 12px; border-radius: 8px;">
                <div style="font-weight: 700; color: #7B1FA2; margin-bottom: 8px;">ğŸ‘« æ³°æ°å¤«å©¦</div>
                <div id="taiRecordsList" class="expense-list">
                    <div style="text-align: center; color: #999; font-size: 13px; padding: 8px;">æš«ç„¡è¨˜éŒ„</div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨: è‡ªå‹•æ”¤åˆ†çµç®— -->
        <div class="reminder-section">
            <h4 class="reminder-section-title">
                <i class="fas fa-calculator"></i> è‡ªå‹•æ”¤åˆ†çµç®—
            </h4>
            
            <!-- æ”¤åˆ†æ‘˜è¦ -->
            <div class="split-summary">
                <div class="split-row">
                    <span>å·²ä»˜æ¬¾ç¸½é¡:</span>
                    <span id="totalPrePaid" style="font-weight: 700;">HKD 10,421.2</span>
                </div>
                <div class="split-row">
                    <span>åœ˜é«”æ¶ˆè²»ç¸½é¡:</span>
                    <span id="totalGroupExpense" style="font-weight: 700;">HKD 0</span>
                </div>
                <div class="split-row">
                    <span>ç¸½è¨ˆ:</span>
                    <span id="grandTotal" style="font-weight: 700;">HKD 10,421.2</span>
                </div>
                <div class="split-total">
                    äººå‡æ‡‰åˆ†æ”¤: <span id="perPersonAmount">HKD 2,605.3</span>
                </div>
            </div>

            <!-- å„äººæ‡‰åˆ†æ”¤é‡‘é¡æ˜ç´° -->
            <div id="shouldPayBreakdown">
                <!-- å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>

            <!-- çµç®—çµæœ -->
            <div id="settlementResults">
                <!-- å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>

            <button class="add-expense-btn" style="width: 100%; background: #FF9800;" onclick="calculateSettlement()">
                <i class="fas fa-sync-alt"></i> é‡æ–°è¨ˆç®—
            </button>
        </div>
    </div>

    
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>


    <!-- Budget Sidebar -->
    <div class="sidebar" id="budgetSidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">ğŸ’° é–‹æ”¯é ç®—</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div style="background: #FFF3E0; padding: 16px; border-radius: 12px; margin-bottom: 20px;">
            <div style="font-weight: 700; font-size: 16px; color: #F57C00; margin-bottom: 12px;">
                <i class="fas fa-yen-sign"></i> JPY â†’ HKD åŒ¯ç‡è¨­å®š
            </div>
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <label style="font-size: 14px; color: #666;">1 JPY =</label>
                <input type="number" id="budgetExchangeRate" value="0.055" step="0.001" min="0" style="width: 100px; padding: 8px; border: 2px solid #FF9800; border-radius: 6px; font-size: 14px; font-weight: 600;" oninput="calculateBudgetOverview()">
                <label style="font-size: 14px; color: #666;">HKD</label>
                <button onclick="fetchLiveExchangeRate('budget')" style="padding: 6px 12px; background: #4CAF50; color: white; border: none; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> æ›´æ–°
                </button>
            </div>
            <div id="budgetExchangeRateStatus" style="font-size: 11px; color: #666; margin-bottom: 8px;">
                æ­£åœ¨è¼‰å…¥å³æ™‚åŒ¯ç‡...
            </div>
            <div style="font-size: 12px; color: #999;">
                âš ï¸ ä¿®æ”¹åŒ¯ç‡å¾Œæœƒè‡ªå‹•é‡æ–°è¨ˆç®—æ‰€æœ‰æ—¥å…ƒé–‹æ”¯
            </div>
        </div>

        <!-- å·²çŸ¥é–‹æ”¯æ‘ºç–Šå€åŸŸ -->
        <div style="background: white; border-radius: 12px; border: 2px solid #667eea; overflow: hidden; margin-bottom: 20px;">
            <div onclick="toggleAllBudgetItems()" style="padding: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-list-ul" style="font-size: 20px; color: white;"></i>
                    <div>
                        <div style="font-weight: 700; font-size: 16px; color: white;">å·²çŸ¥é–‹æ”¯æ¸…å–®</div>
                        <div style="font-size: 12px; color: rgba(255,255,255,0.9); margin-top: 4px;">å…± 10 é …é–‹æ”¯é …ç›®</div>
                    </div>
                </div>
                <i class="fas fa-chevron-down" id="allBudgetItemsIcon" style="color: white; font-size: 20px; transition: transform 0.3s;"></i>
            </div>
            
            <div id="allBudgetItemsContent" style="display: none;">
                <!-- é–‹æ”¯é …ç›®åˆ—è¡¨ - æ‰‹é¢¨ç´å¼è¨­è¨ˆ -->
                <div style="display: flex; flex-direction: column; gap: 8px; padding: 16px;">
            
            <!-- æ©Ÿç¥¨ HKD 3120 - é è¨­åˆä»˜ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #2196F3; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_flight')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-plane" style="font-size: 18px; color: #2196F3;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">æ©Ÿç¥¨</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_flight_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">åˆä»˜</span>
                        <i class="fas fa-chevron-down" id="budget_flight_icon" style="color: #2196F3; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_flight" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 14px; font-weight: 600; color: #666;">HKD</span>
                            <input type="number" id="budget_amount_flight" value="3120" step="0.01" min="0" 
                                   style="width: 120px; padding: 6px 8px; border: 2px solid #2196F3; border-radius: 6px; font-size: 16px; font-weight: 700; color: #2196F3;"
                                   oninput="calculateBudgetOverview();">
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_flight" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_flight', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_flight" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_flight', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_flight" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_flight', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_flight" value="åˆä»˜" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_flight', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_flight" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_flight', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Day 1ä½å®¿ HKD 903.1 - é è¨­Kaho -->
            <div style="background: white; border-radius: 12px; border: 2px solid #4CAF50; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_hotel1')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-hotel" style="font-size: 18px; color: #4CAF50;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Day 1ä½å®¿</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_hotel1_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">Kaho</span>
                        <i class="fas fa-chevron-down" id="budget_hotel1_icon" style="color: #4CAF50; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_hotel1" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 14px; font-weight: 600; color: #666;">HKD</span>
                            <input type="number" id="budget_amount_hotel1" value="903.1" step="0.01" min="0" 
                                   style="width: 120px; padding: 6px 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 16px; font-weight: 700; color: #4CAF50;"
                                   oninput="calculateBudgetOverview();">
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel1" value="Kaho" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel1', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel1" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel1', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel1" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel1', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel1" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel1', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel1" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel1', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Day 2ä½å®¿ HKD 764 - é è¨­Kaho -->
            <div style="background: white; border-radius: 12px; border: 2px solid #4CAF50; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_hotel2')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-hotel" style="font-size: 18px; color: #4CAF50;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Day 2ä½å®¿</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_hotel2_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">Kaho</span>
                        <i class="fas fa-chevron-down" id="budget_hotel2_icon" style="color: #4CAF50; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_hotel2" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 14px; font-weight: 600; color: #666;">HKD</span>
                            <input type="number" id="budget_amount_hotel2" value="764" step="0.01" min="0" 
                                   style="width: 120px; padding: 6px 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 16px; font-weight: 700; color: #4CAF50;"
                                   oninput="calculateBudgetOverview();">
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel2" value="Kaho" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel2', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel2" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel2', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel2" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel2', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel2" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel2', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel2" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel2', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Day 3-4ä½å®¿ HKD 3746.28 - é è¨­Kaho -->
            <div style="background: white; border-radius: 12px; border: 2px solid #4CAF50; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_hotel3')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-hotel" style="font-size: 18px; color: #4CAF50;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Day 3-4ä½å®¿</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_hotel3_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">Kaho</span>
                        <i class="fas fa-chevron-down" id="budget_hotel3_icon" style="color: #4CAF50; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_hotel3" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 14px; font-weight: 600; color: #666;">HKD</span>
                            <input type="number" id="budget_amount_hotel3" value="3746.28" step="0.01" min="0" 
                                   style="width: 120px; padding: 6px 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 16px; font-weight: 700; color: #4CAF50;"
                                   oninput="calculateBudgetOverview();">
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel3" value="Kaho" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel3', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel3" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel3', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel3" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel3', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel3" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel3', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel3" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel3', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Day 5-7ä½å®¿ HKD 4281.82 - é è¨­Kaho -->
            <div style="background: white; border-radius: 12px; border: 2px solid #4CAF50; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_hotel4')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-hotel" style="font-size: 18px; color: #4CAF50;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Day 5-7ä½å®¿</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_hotel4_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">Kaho</span>
                        <i class="fas fa-chevron-down" id="budget_hotel4_icon" style="color: #4CAF50; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_hotel4" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 14px; font-weight: 600; color: #666;">HKD</span>
                            <input type="number" id="budget_amount_hotel4" value="4281.82" step="0.01" min="0" 
                                   style="width: 120px; padding: 6px 8px; border: 2px solid #4CAF50; border-radius: 6px; font-size: 16px; font-weight: 700; color: #4CAF50;"
                                   oninput="calculateBudgetOverview();">
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel4" value="Kaho" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel4', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel4" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel4', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel4" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel4', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel4" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel4', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_hotel4" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_hotel4', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ä»»å¤©å ‚é–€ç¥¨ JPY 13,200 - é è¨­æ³°æ°å¤«å©¦ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #4CAF50; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_nintendo')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-ticket-alt" style="font-size: 18px; color: #E91E63;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">ä»»å¤©å ‚é–€ç¥¨</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_nintendo_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">æ³°æ°å¤«å©¦</span>
                        <i class="fas fa-chevron-down" id="budget_nintendo_icon" style="color: #E91E63; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_nintendo" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="font-size: 14px; font-weight: 600; color: #666;">JPY</span>
                                <input type="number" id="budget_amount_nintendo" value="13200" step="1" min="0" 
                                       style="width: 100px; padding: 6px 8px; border: 2px solid #E91E63; border-radius: 6px; font-size: 16px; font-weight: 700; color: #E91E63;"
                                       oninput="calculateBudgetOverview();">
                            </div>
                            <span id="budget_nintendo_hkd" style="font-size: 14px; color: #666;">â‰ˆ HKD 730</span>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_nintendo" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_nintendo', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_nintendo" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_nintendo', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_nintendo" value="æ³°æ°å¤«å©¦" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_nintendo', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_nintendo" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_nintendo', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_nintendo" value="æœªä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_nintendo', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ç§Ÿè»Š JPY 60,610 - é è¨­æœªä»˜ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #FF9800; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_rental_car')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-car" style="font-size: 18px; color: #FF9800;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">ç§Ÿè»Š</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_rental_car_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">æœªä»˜</span>
                        <i class="fas fa-chevron-down" id="budget_rental_car_icon" style="color: #FF9800; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_rental_car" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="font-size: 14px; font-weight: 600; color: #666;">JPY</span>
                                <input type="number" id="budget_amount_rental_car" value="60610" step="1" min="0" 
                                       style="width: 100px; padding: 6px 8px; border: 2px solid #FF9800; border-radius: 6px; font-size: 16px; font-weight: 700; color: #FF9800;"
                                       oninput="calculateBudgetOverview();">
                            </div>
                            <span id="budget_rental_car_hkd" style="font-size: 14px; color: #666;">â‰ˆ HKD 3,334</span>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_rental_car" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_rental_car', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_rental_car" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_rental_car', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_rental_car" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_rental_car', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_rental_car" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_rental_car', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_rental_car" value="æœªä»˜" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_rental_car', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- æµ·å¥³å°å±‹ JPY 30,800 - é è¨­æœªä»˜ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #FF9800; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_ama_hut')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-fish" style="font-size: 18px; color: #00BCD4;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">æµ·å¥³å°å±‹</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_ama_hut_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">æœªä»˜</span>
                        <i class="fas fa-chevron-down" id="budget_ama_hut_icon" style="color: #00BCD4; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_ama_hut" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="font-size: 14px; font-weight: 600; color: #666;">JPY</span>
                                <input type="number" id="budget_amount_ama_hut" value="30800" step="1" min="0" 
                                       style="width: 100px; padding: 6px 8px; border: 2px solid #00BCD4; border-radius: 6px; font-size: 16px; font-weight: 700; color: #00BCD4;"
                                       oninput="calculateBudgetOverview();">
                            </div>
                            <span id="budget_ama_hut_hkd" style="font-size: 14px; color: #666;">â‰ˆ HKD 1,694</span>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_ama_hut" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_ama_hut', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_ama_hut" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_ama_hut', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_ama_hut" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_ama_hut', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_ama_hut" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_ama_hut', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_ama_hut" value="æœªä»˜" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_ama_hut', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Grill Eight BBQ JPY 24,000 - é è¨­æœªä»˜ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #FF9800; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_grill_eight')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-utensils" style="font-size: 18px; color: #FF5722;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Grill Eight BBQ</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_grill_eight_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">æœªä»˜</span>
                        <i class="fas fa-chevron-down" id="budget_grill_eight_icon" style="color: #FF5722; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_grill_eight" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="font-size: 14px; font-weight: 600; color: #666;">JPY</span>
                                <input type="number" id="budget_amount_grill_eight" value="24000" step="1" min="0" 
                                       style="width: 100px; padding: 6px 8px; border: 2px solid #FF5722; border-radius: 6px; font-size: 16px; font-weight: 700; color: #FF5722;"
                                       oninput="calculateBudgetOverview();">
                            </div>
                            <span id="budget_grill_eight_hkd" style="font-size: 14px; color: #666;">â‰ˆ HKD 1,320</span>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_grill_eight" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_grill_eight', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_grill_eight" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_grill_eight', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_grill_eight" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_grill_eight', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_grill_eight" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_grill_eight', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_grill_eight" value="æœªä»˜" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_grill_eight', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Burlesque Osaka JPY 35,200 - é è¨­æœªä»˜ -->
            <div style="background: white; border-radius: 12px; border: 2px solid #FF9800; overflow: hidden;">
                <div onclick="toggleBudgetItem('budget_burlesque')" style="padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-glass-cheers" style="font-size: 18px; color: #9C27B0;"></i>
                        <div style="font-weight: 700; font-size: 15px; color: #202020;">Burlesque Osaka</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span id="budget_burlesque_payer" style="font-size: 12px; color: #666; background: white; padding: 3px 8px; border-radius: 4px;">æœªä»˜</span>
                        <i class="fas fa-chevron-down" id="budget_burlesque_icon" style="color: #9C27B0; transition: transform 0.3s;"></i>
                    </div>
                </div>
                <div id="budget_burlesque" style="display: none; padding: 16px; border-top: 1px solid #E0E0E0;">
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px; font-weight: 600;">é‡‘é¡ï¼š</div>
                        <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="font-size: 14px; font-weight: 600; color: #666;">JPY</span>
                                <input type="number" id="budget_amount_burlesque" value="35200" step="1" min="0" 
                                       style="width: 100px; padding: 6px 8px; border: 2px solid #9C27B0; border-radius: 6px; font-size: 16px; font-weight: 700; color: #9C27B0;"
                                       oninput="calculateBudgetOverview();">
                            </div>
                            <span id="budget_burlesque_hkd" style="font-size: 14px; color: #666;">â‰ˆ HKD 1,936</span>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600;">ä»˜æ¬¾äººï¼š</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_burlesque" value="Kaho" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_burlesque', 'Kaho')">
                            <span style="font-size: 13px;">Kaho</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_burlesque" value="Dicken" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_burlesque', 'Dicken')">
                            <span style="font-size: 13px;">Dicken</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_burlesque" value="æ³°æ°å¤«å©¦" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_burlesque', 'æ³°æ°å¤«å©¦')">
                            <span style="font-size: 13px;">æ³°æ°å¤«å©¦</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_burlesque" value="åˆä»˜" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_burlesque', 'åˆä»˜')">
                            <span style="font-size: 13px;">åˆä»˜</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 4px; cursor: pointer;">
                            <input type="radio" name="budget_payer_burlesque" value="æœªä»˜" checked="" onchange="calculateBudgetOverview(); updateBudgetPayerDisplay('budget_burlesque', 'æœªä»˜')">
                            <span style="font-size: 13px;">æœªä»˜</span>
                        </label>
                    </div>
                </div>
            </div>

                </div> <!-- çµæŸé–‹æ”¯é …ç›®åˆ—è¡¨ -->
            </div> <!-- çµæŸ allBudgetItemsContent -->
        </div> <!-- çµæŸå·²çŸ¥é–‹æ”¯æ‘ºç–Šå€åŸŸ -->

        <!-- çµç®—å€åŸŸ -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; margin-bottom: 20px;">
            <div style="font-weight: 700; font-size: 18px; margin-bottom: 16px; text-align: center;">
                <i class="fas fa-calculator"></i> å·²è¨˜éŒ„é–‹æ”¯çµç®—
            </div>
            
            <div style="background: rgba(255,255,255,0.15); padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 14px;">Kaho å·²ä»˜ï¼š</span>
                    <span id="budget_kaho_paid" style="font-size: 18px; font-weight: 700;">HKD 0</span>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.15); padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 14px;">Dicken å·²ä»˜ï¼š</span>
                    <span id="budget_dicken_paid" style="font-size: 18px; font-weight: 700;">HKD 0</span>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.15); padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 14px;">æ³°æ°å¤«å©¦ å·²ä»˜ï¼š</span>
                    <span id="budget_tai_paid" style="font-size: 18px; font-weight: 700;">HKD 0</span>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.25); padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 16px; font-weight: 600;">ç¸½å·²ä»˜ï¼š</span>
                    <span id="budget_total_paid" style="font-size: 20px; font-weight: 700;">HKD 0</span>
                </div>
            </div>
            
            <div style="background: rgba(255,152,0,0.3); padding: 12px; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-size: 16px; font-weight: 600;">æœªä»˜ï¼š</span>
                    <span id="budget_unpaid" style="font-size: 20px; font-weight: 700;">HKD 0</span>
                </div>
            </div>
        </div>

        <!-- æ•´é«”è¡Œç¨‹è²»ç”¨ä¼°ç®— -->
        <div style="background: #F3E5F5; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
            <div style="font-weight: 700; font-size: 18px; color: #7B1FA2; margin-bottom: 16px; text-align: center;">
                <i class="fas fa-chart-line"></i> æ•´é«”è¡Œç¨‹è²»ç”¨ä¼°ç®—
            </div>
            
            <div style="font-size: 13px; color: #666; margin-bottom: 12px; background: white; padding: 12px; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 8px;">ğŸ“Š è²»ç”¨çµ„æˆï¼š</div>
                <div style="margin-left: 12px; line-height: 1.8;">
                    â€¢ å·²è¨˜éŒ„é–‹æ”¯ï¼š<span id="budget_known_expenses" style="font-weight: 600; color: #7B1FA2;">HKD 0</span><br>
                    â€¢ ä¼°ç®—é¤é£²è²»ç”¨ï¼š<span id="budget_estimated_meals" style="font-weight: 600; color: #FF5722;">HKD 0</span><br>
                    â€¢ ä¼°ç®—è‡ªé§•è²»ç”¨ï¼š<span id="budget_estimated_driving" style="font-weight: 600; color: #2196F3;">HKD 0</span><br>
                    â€¢ ä¼°ç®—æ™¯é»é–€ç¥¨ï¼š<span id="budget_estimated_tickets" style="font-weight: 600; color: #4CAF50;">HKD 0</span><br>
                    â€¢ ä¼°ç®—æ—¥å¸¸é›œè²»ï¼š<span id="budget_estimated_others" style="font-weight: 600; color: #FF9800;">HKD 0</span>
                </div>
            </div>
            
            <div style="background: linear-gradient(135deg, #7B1FA2 0%, #9C27B0 100%); padding: 16px; border-radius: 8px; color: white; text-align: center;">
                <div style="font-size: 14px; margin-bottom: 4px;">ç¸½é ä¼°è²»ç”¨</div>
                <div id="budget_estimated_total" style="font-size: 28px; font-weight: 700; margin-bottom: 12px;">HKD 0</div>
                <div style="font-size: 14px; margin-bottom: 4px;">äººå‡é ä¼°è²»ç”¨ (4äºº)</div>
                <div id="budget_per_person" style="font-size: 24px; font-weight: 700;">HKD 0</div>
            </div>
            
            <div style="font-size: 11px; color: #999; margin-top: 12px; text-align: center;">
                ğŸ’¡ è²»ç”¨ä¼°ç®—åŒ…å«é¤é£²ã€äº¤é€šã€æ™¯é»ç­‰ï¼Œä»¥å¯¬é¬†é ç®—è¨ˆç®—
            </div>
            
            <!-- è¨ˆç®—æ–¹ç¨‹å¼èªªæ˜ -->
            <div style="background: #F5F5F5; padding: 12px; border-radius: 8px; margin-top: 12px; border-left: 4px solid #9E9E9E;">
                <div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;" onclick="toggleBudgetFormula()">
                    <div style="font-size: 12px; color: #666; font-weight: 600;">
                        ğŸ“ è¨ˆç®—æ–¹ç¨‹å¼
                    </div>
                    <i class="fas fa-chevron-down" id="budgetFormulaIcon" style="color: #666; font-size: 12px; transition: transform 0.3s;"></i>
                </div>
                
                <div id="budgetFormulaContent" style="display: none; margin-top: 12px; padding-top: 12px; border-top: 1px solid #E0E0E0;">
                    <div style="font-size: 11px; color: #666; line-height: 1.8;">
                        <strong>1. å·²è¨˜éŒ„é–‹æ”¯ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= æ‰€æœ‰å·²è¨˜éŒ„çš„å›ºå®šé–‹æ”¯ï¼ˆæ©Ÿç¥¨ã€ä½å®¿ã€é–€ç¥¨ã€ç§Ÿè»Šã€é¤å»³é è¨‚ç­‰ï¼‰
= æ¸¯å¹£é …ç›®ç¸½å’Œ + (æ—¥å…ƒé …ç›®ç¸½å’Œ Ã— ç•¶å‰åŒ¯ç‡)</code><br>
                        
                        <strong>2. é ä¼°é¤é£²è²»ç”¨ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
å·²çŸ¥æœªè¨˜éŒ„é¤å»³ = (æ¾é‡å£½å–œç‡’ JPY 7,000/äºº + ä¸€å‡ç“¶ç‡’è‚‰ JPY 6,000/äºº + ãŸã‹å±‹ä¼Šå‹¢é…’å ´ JPY 4,000/äºº) Ã— 4äºº Ã— åŒ¯ç‡
                = (JPY 7,000 + JPY 6,000 + JPY 4,000) Ã— 4äºº Ã— åŒ¯ç‡
                = JPY 68,000 Ã— åŒ¯ç‡

å‰©é¤˜é¤é£² = (ç¸½é¤æ•¸ - å·²è¨˜éŒ„é¤æ•¸ - å·²çŸ¥æœªè¨˜éŒ„é¤æ•¸) Ã— JPY 3,500/äºº Ã— åŒ¯ç‡
         = (8å¤© Ã— 3é¤ Ã— 4äºº - 3é¤ Ã— 4äºº - 3é¤ Ã— 4äºº) Ã— JPY 3,500 Ã— åŒ¯ç‡
         = (96äººæ¬¡ - 12äººæ¬¡ - 12äººæ¬¡) Ã— JPY 3,500 Ã— åŒ¯ç‡
         = 72äººæ¬¡ Ã— JPY 3,500 Ã— åŒ¯ç‡

<strong>ç¸½é¤é£²è²»ç”¨ = å·²çŸ¥æœªè¨˜éŒ„é¤å»³ + å‰©é¤˜é¤é£²</strong>
<span style="font-size: 9px; color: #999;">
â€» å·²è¨˜éŒ„é¤æ•¸ï¼šæµ·å¥³å°å±‹ã€Grill Eight BBQã€Burlesque Osaka (3é¤)
â€» å·²çŸ¥æœªè¨˜éŒ„ï¼šæ¾é‡å£½å–œç‡’ã€ä¸€å‡ç“¶ç‡’è‚‰ã€ãŸã‹å±‹ä¼Šå‹¢é…’å ´ (3é¤)</span></code><br>
                        
                        <strong>3. é ä¼°è‡ªé§•é›œè²»ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= (æ²¹è²» JPY 15,000 + åœè»Šè²» JPY 8,000 + é«˜é€Ÿå…¬è·¯è²» JPY 12,000) Ã— åŒ¯ç‡
= JPY 35,000 Ã— åŒ¯ç‡</code><br>
                        
                        <strong>4. é ä¼°æ™¯é»é–€ç¥¨ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= JPY 12,000 Ã— åŒ¯ç‡
<span style="font-size: 9px; color: #999;">(æ°´æ—é¤¨ã€ç¥å®®ç­‰é–€ç¥¨)</span></code><br>
                        
                        <strong>5. é ä¼°å…¶ä»–é›œè²»ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= JPY 200,000 Ã— åŒ¯ç‡
<span style="font-size: 9px; color: #999;">(è³¼ç‰©ã€äº¤é€šã€é›¶é£Ÿç­‰)</span></code><br>
                        
                        <strong>6. é ä¼°ç¸½è²»ç”¨ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= å·²è¨˜éŒ„é–‹æ”¯ + é ä¼°é¤é£²è²»ç”¨ + é ä¼°è‡ªé§•é›œè²» + é ä¼°æ™¯é»é–€ç¥¨ + é ä¼°å…¶ä»–é›œè²»</code><br>
                        
                        <strong>7. äººå‡é ä¼°è²»ç”¨ï¼š</strong><br>
                        <code style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; display: block; margin: 4px 0; word-wrap: break-word; white-space: pre-wrap;">
= é ä¼°ç¸½è²»ç”¨ Ã· 4äºº</code>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // å…¨å±€è®Šæ•¸
        let currentExchangeRate = 0.055; // é è¨­åŒ¯ç‡ï¼š1 JPY = 0.055 HKD

        // Scroll to specific day
        function scrollToDay(day) {
            const element = document.getElementById(`day${day}`);
            if (element) {
                // iOSå…¼å®¹çš„æ»¾å‹•æ–¹å¼
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

                if (isIOS) {
                    // iOSè¨­å‚™ä½¿ç”¨è¨ˆç®—offsetçš„æ–¹å¼
                    const headerHeight = document.querySelector('.header')?.offsetHeight || 200;
                    const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
                    const offsetPosition = elementPosition - headerHeight - 20;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                } else {
                    // å…¶ä»–è¨­å‚™ä½¿ç”¨scrollIntoView
                    element.scrollIntoView({ behavior: `smooth`, block: `start` });
                }

                // Update active button
                document.querySelectorAll(`.nav-btn`).forEach(btn => btn.classList.remove(`active`));
                if (typeof event !== 'undefined' && event.target) {
                    event.target.classList.add(`active`);
                }
            }
        }

        // Toggle sidebar
        let currentSidebar = null;

        function toggleSidebar(type) {
            console.log(`toggleSidebar called with type: ${type}`);

            const remindersSidebar = document.getElementById(`remindersSidebar`);
            const expenseOverviewSidebar = document.getElementById(`expenseOverviewSidebar`);
            const mapcodeSidebar = document.getElementById(`mapcodeSidebar`);
            const currencySidebar = document.getElementById(`currencySidebar`);
            const routeSidebar = document.getElementById(`routeSidebar`);
            const expensesSidebar = document.getElementById(`expensesSidebar`);
            const budgetSidebar = document.getElementById(`budgetSidebar`);
            const overlay = document.getElementById(`overlay`);

            console.log(`Elements found:`, {
                remindersSidebar: !!remindersSidebar,
                expenseOverviewSidebar: !!expenseOverviewSidebar,
                mapcodeSidebar: !!mapcodeSidebar,
                currencySidebar: !!currencySidebar,
                routeSidebar: !!routeSidebar,
                expensesSidebar: !!expensesSidebar,
                budgetSidebar: !!budgetSidebar,
                overlay: !!overlay
            });

            // Close all sidebars first
            if (remindersSidebar) remindersSidebar.classList.remove(`open`);
            if (expenseOverviewSidebar) expenseOverviewSidebar.classList.remove(`open`);
            if (mapcodeSidebar) mapcodeSidebar.classList.remove(`open`);
            if (currencySidebar) currencySidebar.classList.remove(`open`);
            if (routeSidebar) routeSidebar.classList.remove(`open`);
            if (expensesSidebar) expensesSidebar.classList.remove(`open`);
            if (budgetSidebar) budgetSidebar.classList.remove(`open`);

            // Open the selected sidebar
            if (currentSidebar === type) {
                console.log(`Closing current sidebar: ${type}`);
                overlay.classList.remove(`active`);
                currentSidebar = null;
            } else {
                console.log(`Opening sidebar: ${type}`);
                if (type === `reminders`) {
                    remindersSidebar.classList.add(`open`);
                } else if (type === `expenseOverview`) {
                    expenseOverviewSidebar.classList.add(`open`);
                    // åˆå§‹åŒ–é–‹æ”¯ç¸½è¦½
                    if (typeof updateExpenseSummary === 'function') {
                        updateExpenseSummary();
                    }
                } else if (type === `mapcode`) {
                    mapcodeSidebar.classList.add(`open`);
                } else if (type === `currency` && currencySidebar) {
                    console.log(`Adding 'open' class to currencySidebar`);
                    currencySidebar.classList.add(`open`);
                } else if (type === `route` && routeSidebar) {
                    console.log(`Adding 'open' class to routeSidebar`);
                    routeSidebar.classList.add(`open`);
                } else if (type === `expenses` && expensesSidebar) {
                    console.log(`Adding 'open' class to expensesSidebar`);
                    expensesSidebar.classList.add(`open`);
                } else if (type === `budget` && budgetSidebar) {
                    console.log(`Adding 'open' class to budgetSidebar`);
                    budgetSidebar.classList.add(`open`);
                    // åˆå§‹åŒ–é–‹æ”¯é ç®—è¨ˆç®—
                    if (typeof calculateBudgetOverview === 'function') {
                        calculateBudgetOverview();
                    }
                }
                overlay.classList.add(`active`);
                currentSidebar = type;
                console.log(`Current sidebar set to: ${currentSidebar}`);
            }
        }

        function closeSidebar() {
            document.querySelectorAll(`.sidebar`).forEach(sidebar => {
                sidebar.classList.remove(`open`);
            });
            document.getElementById(`overlay`).classList.remove(`active`);
            currentSidebar = null;
        }

        // Close sidebar when clicking overlay
        document.getElementById(`overlay`).addEventListener(`click`, closeSidebar);

        // Copy Map Code - iOSå…¼å®¹ç‰ˆæœ¬
        async function copyMapCode(code, button) {
            try {
                // ç¾ä»£ç€è¦½å™¨çš„Clipboard API
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(code);
                    showCopySuccess(button);
                } else {
                    // iOS Safariçš„fallbackæ–¹æ¡ˆ
                    const textArea = document.createElement('textarea');
                    textArea.value = code;
                    textArea.style.position = 'fixed';
                    textArea.style.left = '-999999px';
                    textArea.style.top = '-999999px';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();

                    try {
                        const successful = document.execCommand('copy');
                        if (successful) {
                            showCopySuccess(button);
                        } else {
                            showCopyError(button);
                        }
                    } catch (err) {
                        console.error('è¤‡è£½å¤±æ•—:', err);
                        showCopyError(button);
                    }

                    document.body.removeChild(textArea);
                }
            } catch (err) {
                console.error('è¤‡è£½å¤±æ•—:', err);
                showCopyError(button);
            }
        }

        function showCopySuccess(button) {
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> å·²è¤‡è£½';
            button.style.background = '#4CAF50';

            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 2000);
        }

        function showCopyError(button) {
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-times"></i> å¤±æ•—';
            button.style.background = '#f44336';

            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 2000);
        }

        // Open Google Maps - iOSå…¼å®¹ç‰ˆæœ¬
        function openGoogleMaps(address) {
            console.log('openGoogleMaps called:', address); // èª¿è©¦ç”¨

            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

            // æª¢æŸ¥æ˜¯å¦ç‚ºåæ¨™æ ¼å¼ï¼ˆä¾‹å¦‚ï¼š34.50853922164895, 136.7856158427696ï¼‰
            const isCoordinates = /^-?\d+\.?\d*,\s*-?\d+\.?\d*$/.test(address.trim());

            let mapsUrl;

            if (isCoordinates) {
                // å¦‚æœæ˜¯åæ¨™æ ¼å¼ï¼Œç›´æ¥ä½¿ç”¨åæ¨™
                const coords = address.trim();
                mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${coords}&travelmode=driving`;
            } else {
                // å¦‚æœæ˜¯åœ°å€ï¼Œé€²è¡ŒURLç·¨ç¢¼
                const encodedAddress = encodeURIComponent(address);
                mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodedAddress}&travelmode=driving`;
            }

            console.log('Opening maps URL:', mapsUrl); // èª¿è©¦ç”¨

            if (isIOS) {
                // iOSè¨­å‚™ï¼šä½¿ç”¨window.location.hrefæ›´å¯é 
                window.location.href = mapsUrl;
            } else {
                // Androidå’Œå…¶ä»–è¨­å‚™ï¼šä½¿ç”¨window.open
                window.open(mapsUrl, '_blank');
            }
        }

        // Save reminders to localStorage
        function saveReminders() {
            const checkboxes = document.querySelectorAll(`.reminder-checkbox`);
            const states = {};

            checkboxes.forEach(checkbox => {
                states[checkbox.id] = checkbox.checked;

                // Update visual state
                const reminderItem = checkbox.closest(`.reminder-item`);
                if (reminderItem) {
                    if (checkbox.checked) {
                        reminderItem.classList.add(`checked`);
                    } else {
                        reminderItem.classList.remove(`checked`);
                    }
                }
            });

            localStorage.setItem(`japanTripReminders`, JSON.stringify(states));
        }

        // Load reminders from localStorage
        function loadReminders() {
            const saved = localStorage.getItem(`japanTripReminders`);
            if (saved) {
                const states = JSON.parse(saved);
                Object.keys(states).forEach(id => {
                    const checkbox = document.getElementById(id);
                    if (checkbox) {
                        checkbox.checked = states[id];

                        // Update visual state
                        const reminderItem = checkbox.closest(`.reminder-item`);
                        if (reminderItem && states[id]) {
                            reminderItem.classList.add(`checked`);
                        }
                    }
                });
            }
        }



        // æ‰“åŒ…æ¸…å–®ä¿å­˜åŠŸèƒ½
        function savePackingList() {
            const checkboxes = document.querySelectorAll(`#packingSidebar .reminder-checkbox`);
            const states = {};

            checkboxes.forEach(checkbox => {
                states[checkbox.id] = checkbox.checked;
                const reminderItem = checkbox.closest(`.reminder-item`);
                if (reminderItem) {
                    if (checkbox.checked) {
                        reminderItem.classList.add(`checked`);
                    } else {
                        reminderItem.classList.remove(`checked`);
                    }
                }
            });

            localStorage.setItem(`packingList`, JSON.stringify(states));
        }

        function loadPackingList() {
            const saved = localStorage.getItem(`packingList`);
            if (saved) {
                const states = JSON.parse(saved);
                Object.keys(states).forEach(id => {
                    const checkbox = document.getElementById(id);
                    if (checkbox) {
                        checkbox.checked = states[id];
                        const reminderItem = checkbox.closest(`.reminder-item`);
                        if (reminderItem && states[id]) {
                            reminderItem.classList.add(`checked`);
                        }
                    }
                });
            }
        }

        // åŒ¯ç‡è¨ˆç®—åŠŸèƒ½
        function convertJPYtoHKD() {
            const jpy = parseFloat(document.getElementById(`jpyInput`).value) || 0;
            const rate = parseFloat(document.getElementById('budgetExchangeRate')?.value) || currentExchangeRate;
            const hkd = jpy * rate;
            document.getElementById(`hkdResult`).textContent = `HKD ${hkd.toLocaleString(`en-US`, {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
        }

        function convertHKDtoJPY() {
            const hkd = parseFloat(document.getElementById(`hkdInput`).value) || 0;
            const rate = parseFloat(document.getElementById('budgetExchangeRate')?.value) || currentExchangeRate;
            const jpy = hkd / rate;
            document.getElementById(`jpyResult`).textContent = `JPY ${jpy.toLocaleString(`en-US`, {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
        }

        // ========== å³æ™‚åŒ¯ç‡æŠ“å–åŠŸèƒ½ ==========

        // æŠ“å–å³æ™‚åŒ¯ç‡(ä½¿ç”¨å…è²»API)
        async function fetchLiveExchangeRate(source = 'budget') {
            const statusElementId = source === 'budget' ? 'budgetExchangeRateStatus' : 'currencyExchangeRateStatus';
            const statusElement = document.getElementById(statusElementId);
            
            if (statusElement) {
                statusElement.textContent = 'æ­£åœ¨æŠ“å–å³æ™‚åŒ¯ç‡...';
                statusElement.style.color = '#FF9800';
            }
            
            try {
                // ä½¿ç”¨ ExchangeRate-API (å…è²»ï¼Œç„¡éœ€API Key)
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/JPY');
                
                if (!response.ok) {
                    throw new Error('ç„¡æ³•é€£æ¥åˆ°åŒ¯ç‡æœå‹™');
                }
                
                const data = await response.json();
                const rate = data.rates.HKD;
                
                if (rate && rate > 0) {
                    currentExchangeRate = parseFloat(rate.toFixed(4));
                    
                    // æ›´æ–°ã€Œé–‹æ”¯é ç®—ã€é é¢çš„åŒ¯ç‡
                    const budgetRateInput = document.getElementById('budgetExchangeRate');
                    if (budgetRateInput) {
                        budgetRateInput.value = currentExchangeRate;
                        if (typeof calculateBudgetOverview === 'function') {
                            calculateBudgetOverview(); // é‡æ–°è¨ˆç®—é ç®—
                        }
                    }
                    
                    // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€é é¢çš„é¡¯ç¤º
                    const currencyDisplay = document.getElementById('currencyDisplayRate');
                    if (currencyDisplay) {
                        currencyDisplay.textContent = `1 JPY = ${currentExchangeRate} HKD`;
                    }
                    
                    // æ›´æ–°ç‹€æ…‹æç¤º
                    const now = new Date();
                    const timeString = now.toLocaleTimeString('zh-HK', { hour: '2-digit', minute: '2-digit' });
                    
                    if (statusElement) {
                        statusElement.textContent = `âœ… å³æ™‚åŒ¯ç‡å·²æ›´æ–° (${timeString})`;
                        statusElement.style.color = '#4CAF50';
                    }
                    
                    // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€çš„ç‹€æ…‹
                    const currencyStatus = document.getElementById('currencyExchangeRateStatus');
                    if (currencyStatus) {
                        currencyStatus.textContent = `âœ… å³æ™‚åŒ¯ç‡å·²æ›´æ–° (${timeString})`;
                        currencyStatus.style.color = '#4CAF50';
                    }
                    
                    // æ›´æ–°ã€Œé–‹æ”¯é ç®—ã€çš„ç‹€æ…‹
                    const budgetStatus = document.getElementById('budgetExchangeRateStatus');
                    if (budgetStatus) {
                        budgetStatus.textContent = `âœ… å³æ™‚åŒ¯ç‡å·²æ›´æ–° (${timeString})`;
                        budgetStatus.style.color = '#4CAF50';
                    }
                    
                    // æ›´æ–°å¸¸ç”¨é‡‘é¡å¿«æŸ¥
                    updateQuickReference(currentExchangeRate);
                    
                    console.log(`åŒ¯ç‡æ›´æ–°æˆåŠŸ: 1 JPY = ${currentExchangeRate} HKD`);
                } else {
                    throw new Error('åŒ¯ç‡æ•¸æ“šç„¡æ•ˆ');
                }
                
            } catch (error) {
                console.error('æŠ“å–åŒ¯ç‡å¤±æ•—:', error);
                
                if (statusElement) {
                    statusElement.textContent = 'âŒ ç„¡æ³•æŠ“å–å³æ™‚åŒ¯ç‡ï¼Œä½¿ç”¨é è¨­å€¼ (0.055)';
                    statusElement.style.color = '#F44336';
                }
                
                // ä½¿ç”¨é è¨­åŒ¯ç‡
                currentExchangeRate = 0.055;
                const budgetRateInput = document.getElementById('budgetExchangeRate');
                if (budgetRateInput && !budgetRateInput.value) {
                    budgetRateInput.value = currentExchangeRate;
                }
            }
        }

        // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€çš„å¸¸ç”¨é‡‘é¡å¿«æŸ¥
        function updateQuickReference(rate) {
            const quickRefElements = document.querySelectorAll('.quick-ref-hkd');
            quickRefElements.forEach(element => {
                const jpyAmount = parseInt(element.getAttribute('data-jpy'));
                if (jpyAmount) {
                    const hkdAmount = Math.round(jpyAmount * rate);
                    element.textContent = `â‰ˆ HKD ${hkdAmount.toLocaleString('en-US')}`;
                }
            });
        }

        // ========== å³æ™‚åŒ¯ç‡æŠ“å–åŠŸèƒ½ ==========

        // æŠ“å–å³æ™‚åŒ¯ç‡ï¼ˆä½¿ç”¨å…è²»APIï¼‰
        async function fetchLiveExchangeRate(source = 'budget') {
            const statusElementId = source === 'budget' ? 'budgetExchangeRateStatus' : 'currencyExchangeRateStatus';
            const statusElement = document.getElementById(statusElementId);
            
            if (statusElement) {
                statusElement.textContent = 'æ­£åœ¨æŠ“å–å³æ™‚åŒ¯ç‡...';
                statusElement.style.color = '#FF9800';
            }
            
            try {
                // ä½¿ç”¨ ExchangeRate-API (å…è²»ï¼Œç„¡éœ€API Key)
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/JPY');
                
                if (!response.ok) {
                    throw new Error('ç„¡æ³•é€£æ¥åˆ°åŒ¯ç‡æœå‹™');
                }
                
                const data = await response.json();
                const rate = data.rates.HKD;
                
                if (rate && rate > 0) {
                    currentExchangeRate = parseFloat(rate.toFixed(4));
                    
                    // æ›´æ–°ã€Œé–‹æ”¯é ç®—ã€é é¢çš„åŒ¯ç‡
                    const budgetRateInput = document.getElementById('budgetExchangeRate');
                    if (budgetRateInput) {
                        budgetRateInput.value = currentExchangeRate;
                        calculateBudgetOverview(); // é‡æ–°è¨ˆç®—é ç®—
                    }
                    
                    // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€é é¢çš„é¡¯ç¤º
                    const currencyDisplay = document.getElementById('currencyDisplayRate');
                    if (currencyDisplay) {
                        currencyDisplay.textContent = `1 JPY = ${currentExchangeRate} HKD`;
                    }
                    
                    // æ›´æ–°ç‹€æ…‹æç¤º
                    const now = new Date();
                    const timeString = now.toLocaleTimeString('zh-HK', { hour: '2-digit', minute: '2-digit' });
                    
                    if (statusElement) {
                        statusElement.textContent = `âœ… å³æ™‚åŒ¯ç‡å·²æ›´æ–° (${timeString})`;
                        statusElement.style.color = '#4CAF50';
                    }
                    
                    // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€çš„ç‹€æ…‹
                    const currencyStatus = document.getElementById('currencyExchangeRateStatus');
                    if (currencyStatus) {
                        currencyStatus.textContent = `âœ… å³æ™‚åŒ¯ç‡å·²æ›´æ–° (${timeString})`;
                        currencyStatus.style.color = '#4CAF50';
                    }
                    
                    // æ›´æ–°å¸¸ç”¨é‡‘é¡å¿«æŸ¥
                    updateQuickReference(currentExchangeRate);
                    
                    console.log(`åŒ¯ç‡æ›´æ–°æˆåŠŸ: 1 JPY = ${currentExchangeRate} HKD`);
                } else {
                    throw new Error('åŒ¯ç‡æ•¸æ“šç„¡æ•ˆ');
                }
                
            } catch (error) {
                console.error('æŠ“å–åŒ¯ç‡å¤±æ•—:', error);
                
                if (statusElement) {
                    statusElement.textContent = 'âŒ ç„¡æ³•æŠ“å–å³æ™‚åŒ¯ç‡ï¼Œä½¿ç”¨é è¨­å€¼ (0.055)';
                    statusElement.style.color = '#F44336';
                }
                
                // ä½¿ç”¨é è¨­åŒ¯ç‡
                currentExchangeRate = 0.055;
                const budgetRateInput = document.getElementById('budgetExchangeRate');
                if (budgetRateInput && !budgetRateInput.value) {
                    budgetRateInput.value = currentExchangeRate;
                }
            }
        }

        // æ›´æ–°ã€ŒåŒ¯ç‡è¨ˆç®—å™¨ã€çš„å¸¸ç”¨é‡‘é¡å¿«æŸ¥
        function updateQuickReference(rate) {
            const quickRefElements = document.querySelectorAll('.quick-ref-hkd');
            quickRefElements.forEach(element => {
                const jpyAmount = parseInt(element.getAttribute('data-jpy'));
                if (jpyAmount) {
                    const hkdAmount = Math.round(jpyAmount * rate);
                    element.textContent = `â‰ˆ HKD ${hkdAmount.toLocaleString('en-US')}`;
                }
            });
        }



        // Back to top button
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: `smooth` });
        }

        // Show/hide back to top button
        window.addEventListener(`scroll`, () => {
            const backToTop = document.getElementById(`backToTop`);
            if (window.pageYOffset > 300) {
                backToTop.classList.add(`show`);
            } else {
                backToTop.classList.remove(`show`);
            }
        });

        // Update active nav button on scroll
        window.addEventListener(`scroll`, () => {
            const dayCards = document.querySelectorAll(`.day-card`);
            const navButtons = document.querySelectorAll(`.nav-btn`);

            let currentDay = 1;
            dayCards.forEach((card, index) => {
                const rect = card.getBoundingClientRect();
                if (rect.top <= 250 && rect.bottom >= 250) {
                    currentDay = index + 1;
                }
            });

            navButtons.forEach((btn, index) => {
                if (index + 1 === currentDay) {
                    btn.classList.add(`active`);
                } else {
                    btn.classList.remove(`active`);
                }
            });
        });

        // iOSè¨­å‚™æª¢æ¸¬
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

        if (isIOS) {
            console.log('iOS device detected');
            console.log('User Agent:', navigator.userAgent);
        }

        // Initialize
        document.addEventListener(`DOMContentLoaded`, () => {
            console.log('DOM loaded - iOS compatible'); // èª¿è©¦ç”¨

            // iOSç‰¹å®šï¼šç¢ºä¿æ‰€æœ‰æŒ‰éˆ•å¯é»æ“Š
            if (isIOS) {
                const buttons = document.querySelectorAll('button, .nav-btn, .action-btn, .copy-btn, .nav-map-btn');
                buttons.forEach(button => {
                    // iOS Safariéœ€è¦æ˜ç¢ºçš„cursoræ¨£å¼
                    button.style.cursor = 'pointer';

                    // ç‚ºæ‰€æœ‰å¯é»æ“Šå…ƒç´ æ·»åŠ touchstartäº‹ä»¶ï¼ˆiOSå„ªåŒ–ï¼‰
                    button.addEventListener('touchstart', function() {
                        // iOSè§¸æ§å„ªåŒ–ï¼šç©ºå‡½æ•¸å³å¯å•Ÿç”¨å¿«é€Ÿé»æ“Š
                    }, { passive: true });
                });

                console.log(`iOS optimization applied to ${buttons.length} buttons`);
            }

            loadReminders();
            loadExpenses();
            loadBudgetAmounts(); // è¼‰å…¥å„²å­˜çš„é–‹æ”¯é‡‘é¡
            
            // å…ˆåˆå§‹åŒ–é–‹æ”¯é ç®—è¨ˆç®—(å¦‚æœéœ€è¦)
            if (typeof calculateBudgetOverview === 'function') {
                calculateBudgetOverview();
            }
            
            // ç„¶å¾Œè¨ˆç®—é–‹æ”¯è¨˜éŒ„çµç®—(æœƒè®€å–é–‹æ”¯é ç®—çš„æ•¸æ“š)
            calculateSettlement();
            
            // è‡ªå‹•è¨­å®šä»Šå¤©å°æ‡‰çš„è¡Œç¨‹å¤©æ•¸
            const todayDay = getTodayTripDay();
            document.getElementById('kahoDay').value = todayDay;
            document.getElementById('dickenDay').value = todayDay;
            document.getElementById('taiDay').value = todayDay;

            // å»¶é²500mså¾Œè‡ªå‹•æŠ“å–å³æ™‚åŒ¯ç‡ï¼ˆç¢ºä¿é é¢å…ƒç´ å·²è¼‰å…¥ï¼‰
            setTimeout(() => {
                fetchLiveExchangeRate('budget');
            }, 500);

            console.log('Initialization complete'); // èª¿è©¦ç”¨
        });

        // ========== é–‹æ”¯è¨˜éŒ„åŠŸèƒ½ ==========
        
        // è¡Œç¨‹è¨­å®š
        const TRIP_START_DATE = new Date('2026-01-25'); // å‡ºç™¼æ—¥
        const TRIP_END_DATE = new Date('2026-02-01');   // çµæŸæ—¥
        const TRIP_DAYS = 8; // ç¸½å¤©æ•¸ï¼ˆçµ±ä¸€ä½¿ç”¨ TRIP_DAYSï¼‰
        
        // é–‹æ”¯è¨˜éŒ„æ•¸æ“šçµæ§‹
        let expensesData = {
            kaho: [],
            dicken: [],
            tai: []
        };

        // å·²ä»˜æ¬¾æ•¸æ“šå·²ç§»é™¤ - æ”¹ç‚ºå¾é–‹æ”¯é ç®—é é¢å‹•æ…‹è®€å–

        // è¨ˆç®—ä»Šå¤©å°æ‡‰çš„è¡Œç¨‹å¤©æ•¸
        function getTodayTripDay() {
            const today = new Date();
            const diffTime = today - TRIP_START_DATE;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) {
                return 1; // å‡ºç™¼æ—¥ä¹‹å‰éƒ½ç®— Day 1
            } else if (diffDays >= TRIP_DAYS) {
                return TRIP_DAYS; // æœ€å¾Œä¸€å¤©ä¹‹å¾Œéƒ½ç®— Day 8
            } else {
                return diffDays + 1; // Day 1 = 0å¤©å·®, Day 2 = 1å¤©å·®...
            }
        }

        // æŠ˜ç–Š/å±•é–‹è¼¸å…¥å€
        function toggleExpenseInput(person) {
            const inputDiv = document.getElementById(`${person}Input`);
            const toggleIcon = document.getElementById(`${person}Toggle`);
            
            if (inputDiv.style.display === 'none') {
                inputDiv.style.display = 'grid';
                toggleIcon.className = 'fas fa-chevron-down';
            } else {
                inputDiv.style.display = 'none';
                toggleIcon.className = 'fas fa-chevron-right';
            }
        }

        // é¸æ“‡è²¨å¹£æŒ‰éˆ•
        function selectCurrency(person, currency) {
            const buttons = document.querySelectorAll(`#${person}CurrencyButtons .currency-btn`);
            buttons.forEach(btn => {
                if (btn.dataset.currency === currency) {
                    btn.style.border = '2px solid #4CAF50';
                    btn.style.background = '#4CAF50';
                    btn.style.color = 'white';
                    btn.classList.add('active');
                } else {
                    btn.style.border = '2px solid #E0E0E0';
                    btn.style.background = 'white';
                    btn.style.color = '#666';
                    btn.classList.remove('active');
                }
            });
        }

        // é¸æ“‡æ”¯ä»˜æ€§è³ªæŒ‰éˆ•
        function selectNature(person, nature) {
            const buttons = document.querySelectorAll(`#${person}NatureButtons .nature-btn`);
            const borderColor = person === 'kaho' ? '#2196F3' : (person === 'dicken' ? '#4CAF50' : '#9C27B0');
            buttons.forEach(btn => {
                if (btn.dataset.nature === nature) {
                    btn.style.border = `2px solid ${borderColor}`;
                    btn.style.background = borderColor;
                    btn.style.color = 'white';
                    btn.classList.add('active');
                } else {
                    btn.style.border = '2px solid #E0E0E0';
                    btn.style.background = 'white';
                    btn.style.color = '#666';
                    btn.classList.remove('active');
                }
            });
        }

        // æ·»åŠ é–‹æ”¯è¨˜éŒ„
        function addExpense(person) {
            const day = document.getElementById(`${person}Day`).value;
            const category = document.getElementById(`${person}Category`).value;
            
            // å¾æŒ‰éˆ•çµ„è®€å–æ”¯ä»˜æ€§è³ª
            const natureBtn = document.querySelector(`#${person}NatureButtons .nature-btn.active`);
            const nature = natureBtn ? natureBtn.dataset.nature : 'å€‹äººæ¶ˆè²»';
            
            // å¾æŒ‰éˆ•çµ„è®€å–è²¨å¹£
            const currencyBtn = document.querySelector(`#${person}CurrencyButtons .currency-btn.active`);
            const currency = currencyBtn ? currencyBtn.dataset.currency : 'HKD';
            
            const amount = parseFloat(document.getElementById(`${person}Amount`).value);

            if (!day) {
                alert('è«‹é¸æ“‡è¡Œç¨‹æ—¥æœŸï¼');
                return;
            }

            if (!amount || amount <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆé‡‘é¡ï¼');
                return;
            }

            // è½‰æ›ç‚ºHKDï¼ˆä½¿ç”¨é–‹æ”¯é ç®—é é¢çš„åŒ¯ç‡è¨­å®šï¼‰
            const exchangeRate = parseFloat(document.getElementById('budgetExchangeRate')?.value) || currentExchangeRate;
            const amountHKD = currency === 'JPY' ? amount * exchangeRate : amount;

            // å‰µå»ºè¨˜éŒ„å°è±¡
            const expense = {
                id: Date.now(),
                day: `Day ${day}`,
                category,
                nature,
                currency,
                amount,
                amountHKD
            };

            // æ·»åŠ åˆ°æ•¸æ“š
            expensesData[person].push(expense);

            // ä¿å­˜åˆ°localStorage
            saveExpenses();

            // æ›´æ–°é¡¯ç¤º
            updateExpensesList(person);
            updateSummary();
            calculateSettlement();

            // æ¸…ç©ºè¼¸å…¥ä¸¦é‡è¨­ç‚ºä»Šå¤©
            const todayDay = getTodayTripDay();
            document.getElementById(`${person}Day`).value = todayDay;
            document.getElementById(`${person}Amount`).value = '';

            // é¡¯ç¤ºæˆåŠŸæç¤º
            showSuccessMessage('è¨˜éŒ„å·²æ·»åŠ ï¼');
        }

        // åˆªé™¤é–‹æ”¯è¨˜éŒ„
        function deleteExpense(person, expenseId) {
            expensesData[person] = expensesData[person].filter(e => e.id !== expenseId);
            saveExpenses();
            updateExpensesList(person);
            updateSummary();
            calculateSettlement();
            showSuccessMessage('è¨˜éŒ„å·²åˆªé™¤ï¼');
        }

        // æ›´æ–°è¨˜éŒ„åˆ—è¡¨é¡¯ç¤º
        function updateExpensesList(person) {
            const listDiv = document.getElementById(`${person}RecordsList`);
            const expenses = expensesData[person];

            if (expenses.length === 0) {
                listDiv.innerHTML = '<div style="text-align: center; color: #999; font-size: 13px; padding: 8px;">æš«ç„¡è¨˜éŒ„</div>';
                return;
            }

            let html = '';
            expenses.forEach(expense => {
                const borderColor = expense.nature === 'åœ˜é«”æ¶ˆè²»' ? '#4CAF50' : '#2196F3';
                const bgColor = expense.nature === 'åœ˜é«”æ¶ˆè²»' ? '#F1F8F4' : '#F0F7FF';
                
                html += `
                    <div class="expense-item" style="border-color: ${borderColor}; background: ${bgColor};">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 14px; color: #202020; margin-bottom: 4px;">
                                    ${expense.day} | ${expense.category}
                                </div>
                                <div style="font-size: 12px; color: #666;">
                                    ${expense.nature}
                                </div>
                            </div>
                            <button class="delete-expense-btn" onclick="deleteExpense('${person}', ${expense.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 16px; font-weight: 700; color: #2E7D32;">
                                ${expense.currency} ${expense.amount.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}
                            </div>
                            ${expense.currency === 'JPY' ? `
                                <div class="expense-converted">
                                    â‰ˆ HKD ${expense.amountHKD.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            listDiv.innerHTML = html;
        }

        // æ›´æ–°æ‘˜è¦é¡¯ç¤º - é¡¯ç¤ºå¯¦éš›æ¶ˆè²»æ˜ç´°ï¼ˆå…±åŒé–‹æ”¯ + å€‹äººæ¶ˆè²»ï¼‰
        function updateSummary() {
            // 1. å¾é–‹æ”¯é ç®—é é¢è®€å–ç¸½å·²ä»˜é‡‘é¡
            const budgetTotalPaidElement = document.getElementById('budget_total_paid');
            let totalPrePaid = 0;
            if (budgetTotalPaidElement && budgetTotalPaidElement.textContent) {
                const totalPaidText = budgetTotalPaidElement.textContent.replace('HKD ', '').replace(/,/g, '');
                totalPrePaid = parseFloat(totalPaidText) || 0;
            }
            
            // è¨ˆç®—åœ˜é«”æ¶ˆè²»ç¸½é¡
            const kahoGroup = expensesData.kaho.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const dickenGroup = expensesData.dicken.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const taiGroup = expensesData.tai.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const totalGroupExpense = kahoGroup + dickenGroup + taiGroup;
            
            // ç¸½å…±åŒé–‹æ”¯ = å·²ä»˜æ¬¾ç¸½é¡ + åœ˜é«”æ¶ˆè²»ç¸½é¡
            const totalCommonExpenses = totalPrePaid + totalGroupExpense;
            
            // 2. è¨ˆç®—æ¯äººçš„å…±åŒé–‹æ”¯åˆ†æ”¤ï¼ˆæŒ‰ä»½æ•¸ï¼šKaho 1ä»½ã€Dicken 1ä»½ã€æ³°æ°å¤«å©¦ 2ä»½ï¼‰
            const perShareAmount = totalCommonExpenses / 4;
            const shares = {
                'kaho': 1,
                'dicken': 1,
                'tai': 2
            };
            
            const commonExpenseShare = {
                'kaho': perShareAmount * shares['kaho'],
                'dicken': perShareAmount * shares['dicken'],
                'tai': perShareAmount * shares['tai']
            };
            
            // 3. è¨ˆç®—æ¯äººçš„å€‹äººæ¶ˆè²»
            const personalExpenses = {
                'kaho': expensesData.kaho.filter(e => e.nature === 'å€‹äººæ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0),
                'dicken': expensesData.dicken.filter(e => e.nature === 'å€‹äººæ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0),
                'tai': expensesData.tai.filter(e => e.nature === 'å€‹äººæ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0)
            };
            
            // 4. è¨ˆç®—ç¸½æ¶ˆè²»ï¼ˆå…±åŒé–‹æ”¯åˆ†æ”¤ + å€‹äººæ¶ˆè²»ï¼‰
            const totalExpenses = {
                'kaho': commonExpenseShare['kaho'] + personalExpenses['kaho'],
                'dicken': commonExpenseShare['dicken'] + personalExpenses['dicken'],
                'tai': commonExpenseShare['tai'] + personalExpenses['tai']
            };
            
            // 5. æ›´æ–°é¡¯ç¤º
            // Kaho
            document.getElementById('kahoCommonExpense').textContent = `HKD ${commonExpenseShare['kaho'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('kahoPersonalExpense').textContent = `HKD ${personalExpenses['kaho'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('kahoTotal').textContent = `HKD ${totalExpenses['kaho'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            
            // Dicken
            document.getElementById('dickenCommonExpense').textContent = `HKD ${commonExpenseShare['dicken'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('dickenPersonalExpense').textContent = `HKD ${personalExpenses['dicken'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('dickenTotal').textContent = `HKD ${totalExpenses['dicken'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            
            // æ³°æ°å¤«å©¦
            document.getElementById('taiCommonExpense').textContent = `HKD ${commonExpenseShare['tai'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('taiPersonalExpense').textContent = `HKD ${personalExpenses['tai'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
            document.getElementById('taiTotal').textContent = `HKD ${totalExpenses['tai'].toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 1})}`;
        }

        // è¨ˆç®—æ”¤åˆ†çµç®—ï¼ˆä¿®æ­£ç‰ˆï¼šKaho 1ä»½ã€Dicken 1ä»½ã€æ³°æ°å¤«å©¦ 2ä»½ï¼‰
        function calculateSettlement() {
            // å¾é–‹æ”¯é ç®—é é¢è®€å–å„äººå·²ä»˜é‡‘é¡
            const budgetKahoPaidElement = document.getElementById('budget_kaho_paid');
            const budgetDickenPaidElement = document.getElementById('budget_dicken_paid');
            const budgetTaiPaidElement = document.getElementById('budget_tai_paid');
            const budgetTotalPaidElement = document.getElementById('budget_total_paid');

            let kahoPaidFromBudget = 0;
            let dickenPaidFromBudget = 0;
            let taiPaidFromBudget = 0;
            let totalPrePaid = 0;

            if (budgetKahoPaidElement && budgetKahoPaidElement.textContent) {
                const text = budgetKahoPaidElement.textContent.replace('HKD ', '').replace(/,/g, '');
                kahoPaidFromBudget = parseFloat(text) || 0;
            }
            if (budgetDickenPaidElement && budgetDickenPaidElement.textContent) {
                const text = budgetDickenPaidElement.textContent.replace('HKD ', '').replace(/,/g, '');
                dickenPaidFromBudget = parseFloat(text) || 0;
            }
            if (budgetTaiPaidElement && budgetTaiPaidElement.textContent) {
                const text = budgetTaiPaidElement.textContent.replace('HKD ', '').replace(/,/g, '');
                taiPaidFromBudget = parseFloat(text) || 0;
            }
            if (budgetTotalPaidElement && budgetTotalPaidElement.textContent) {
                const text = budgetTotalPaidElement.textContent.replace('HKD ', '').replace(/,/g, '');
                totalPrePaid = parseFloat(text) || 0;
            }

            // è¨ˆç®—åœ˜é«”æ¶ˆè²»ç¸½é¡(å¾è¨˜éŒ„ä¸­)
            const kahoGroup = expensesData.kaho.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const dickenGroup = expensesData.dicken.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const taiGroup = expensesData.tai.filter(e => e.nature === 'åœ˜é«”æ¶ˆè²»').reduce((sum, e) => sum + e.amountHKD, 0);
            const totalGroupExpense = kahoGroup + dickenGroup + taiGroup;

            // ç¸½è¨ˆ
            const grandTotal = totalPrePaid + totalGroupExpense;

            // æ”¤åˆ†é‚è¼¯ï¼šKaho 1ä»½ã€Dicken 1ä»½ã€æ³°æ°å¤«å©¦ 2ä»½ï¼Œç¸½å…± 4 ä»½
            const totalShares = 4;
            const perShareAmount = grandTotal / totalShares;
            
            // å„äººæ‡‰åˆ†æ”¤é‡‘é¡ï¼ˆäººå‡ Ã— ä»½æ•¸ï¼‰
            const kahoShouldPay = perShareAmount * 1;   // Kaho: 1ä»½
            const dickenShouldPay = perShareAmount * 1; // Dicken: 1ä»½
            const taiShouldPay = perShareAmount * 2;    // æ³°æ°å¤«å©¦: 2ä»½

            // è¨ˆç®—å„äººå·²ä»˜(é–‹æ”¯é ç®—å·²ä»˜ + åœ˜é«”æ¶ˆè²»è¨˜éŒ„)
            const kahoPaid = kahoPaidFromBudget + kahoGroup;
            const dickenPaid = dickenPaidFromBudget + dickenGroup;
            const taiPaid = taiPaidFromBudget + taiGroup;

            // è¨ˆç®—å·®é¡ï¼ˆå·²ä»˜ - æ‡‰åˆ†æ”¤ï¼‰
            const kahoDiff = kahoPaid - kahoShouldPay;
            const dickenDiff = dickenPaid - dickenShouldPay;
            const taiDiff = taiPaid - taiShouldPay;

            // æ›´æ–°æ”¤åˆ†æ‘˜è¦é¡¯ç¤º
            document.getElementById('totalPrePaid').textContent = `HKD ${totalPrePaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}`;
            document.getElementById('totalGroupExpense').textContent = `HKD ${totalGroupExpense.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}`;
            document.getElementById('grandTotal').textContent = `HKD ${grandTotal.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}`;
            document.getElementById('perPersonAmount').textContent = `HKD ${perShareAmount.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})} (ç¸½é¡ Ã· 4)`;

            // é¡¯ç¤ºå„äººæ‡‰åˆ†æ”¤é‡‘é¡
            const shouldPayDiv = document.getElementById('shouldPayBreakdown');
            if (shouldPayDiv) {
                shouldPayDiv.innerHTML = `
                    <div style="background: #F5F5F5; padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                        <div style="font-weight: 700; color: #202020; margin-bottom: 8px; font-size: 14px;">ğŸ“Š å„äººæ‡‰åˆ†æ”¤é‡‘é¡</div>
                        <div style="display: grid; gap: 6px; font-size: 13px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>ğŸ‘¨ Kaho (1ä»½):</span>
                                <span style="font-weight: 600;">HKD ${kahoShouldPay.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>ğŸ‘¨ Dicken (1ä»½):</span>
                                <span style="font-weight: 600;">HKD ${dickenShouldPay.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>ğŸ‘« æ³°æ°å¤«å©¦ (2ä»½):</span>
                                <span style="font-weight: 600;">HKD ${taiShouldPay.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            // ç”Ÿæˆçµç®—çµæœ
            const resultsDiv = document.getElementById('settlementResults');
            let html = '';

            const people = [
                { name: 'Kaho', icon: 'ğŸ‘¨', diff: kahoDiff, paid: kahoPaid, shouldPay: kahoShouldPay, color: '#2196F3' },
                { name: 'Dicken', icon: 'ğŸ‘¨', diff: dickenDiff, paid: dickenPaid, shouldPay: dickenShouldPay, color: '#4CAF50' },
                { name: 'æ³°æ°å¤«å©¦', icon: 'ğŸ‘«', diff: taiDiff, paid: taiPaid, shouldPay: taiShouldPay, color: '#9C27B0' }
            ];

            people.forEach(person => {
                let statusClass, statusText, statusColor, bgColor;
                
                if (person.diff > 1) {
                    statusClass = 'positive';
                    statusText = `${person.icon} ${person.name} æ‡‰æ”¶å›`;
                    statusColor = '#2E7D32';
                    bgColor = '#E8F5E9';
                } else if (person.diff < -1) {
                    statusClass = 'negative';
                    statusText = `${person.icon} ${person.name} éœ€è£œçµ¦`;
                    statusColor = '#C62828';
                    bgColor = '#FFEBEE';
                } else {
                    statusClass = 'zero';
                    statusText = `${person.icon} ${person.name} å·²çµæ¸…`;
                    statusColor = '#1976D2';
                    bgColor = '#E3F2FD';
                }

                html += `
                    <div class="settlement-card" style="border-left: 4px solid ${person.color}; background: ${bgColor};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div class="settlement-person" style="color: ${person.color};">
                                ${statusText}
                            </div>
                            <div class="settlement-amount ${statusClass}" style="color: ${statusColor};">
                                ${Math.abs(person.diff) < 1 ? 'âœ“' : `HKD ${Math.abs(person.diff).toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}`}
                            </div>
                        </div>
                        <div style="font-size: 12px; color: #666; display: grid; gap: 4px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>å·²ä»˜æ¬¾ï¼š</span>
                                <span>HKD ${person.paid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>æ‡‰åˆ†æ”¤ï¼š</span>
                                <span>HKD ${person.shouldPay.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 2})}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;

            // ç”Ÿæˆä¸¦é¡¯ç¤ºä»˜æ¬¾æŒ‡å¼•
            displayPaymentInstructions({ kaho: kahoDiff, dicken: dickenDiff, tai: taiDiff });
        }

        // ç”Ÿæˆä»˜æ¬¾æŒ‡å¼•è¨ˆç®—å‡½æ•¸
        function generatePaymentInstructions(settlements) {
            // åˆ†é¡æ‡‰æ”¶å’Œæ‡‰ä»˜çš„äºº
            const receivers = []; // æ‡‰æ”¶æ¬¾çš„äºº
            const payers = [];    // æ‡‰ä»˜æ¬¾çš„äºº
            
            Object.keys(settlements).forEach(person => {
                const diff = settlements[person];
                if (diff > 0.01) { // æ‡‰æ”¶å›ï¼ˆæ­£å€¼ï¼‰
                    receivers.push({ person: person, amount: diff });
                } else if (diff < -0.01) { // éœ€è£œçµ¦ï¼ˆè² å€¼ï¼‰
                    payers.push({ person: person, amount: Math.abs(diff) });
                }
            });
            
            // æŒ‰é‡‘é¡æ’åºï¼ˆå¾å¤§åˆ°å°ï¼‰
            receivers.sort((a, b) => b.amount - a.amount);
            payers.sort((a, b) => b.amount - a.amount);
            
            // ç”Ÿæˆä»˜æ¬¾æŒ‡å¼•
            const instructions = [];
            let receiverIndex = 0;
            let payerIndex = 0;
            
            while (receiverIndex < receivers.length && payerIndex < payers.length) {
                const receiver = receivers[receiverIndex];
                const payer = payers[payerIndex];
                
                const transferAmount = Math.min(receiver.amount, payer.amount);
                
                if (transferAmount > 0.01) {
                    instructions.push({
                        from: payer.person,
                        to: receiver.person,
                        amount: transferAmount.toFixed(1)
                    });
                }
                
                receiver.amount -= transferAmount;
                payer.amount -= transferAmount;
                
                if (receiver.amount < 0.01) receiverIndex++;
                if (payer.amount < 0.01) payerIndex++;
            }
            
            return instructions;
        }

        // é¡¯ç¤ºä»˜æ¬¾æŒ‡å¼•
        function displayPaymentInstructions(settlements) {
            const paymentInstructions = generatePaymentInstructions(settlements);
            const resultsDiv = document.getElementById('settlementResults');
            
            // äººåå°ç…§è¡¨
            const nameMap = {
                'kaho': 'Kaho',
                'dicken': 'Dicken',
                'tai': 'æ³°æ°å¤«å©¦'
            };
            
            let instructionsHTML = `
                <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); padding: 20px; border-radius: 12px; margin-top: 20px; border: 3px solid #FF9800;">
                    <div style="font-weight: 700; font-size: 18px; color: #E65100; margin-bottom: 16px; text-align: center;">
                        <i class="fas fa-hand-holding-usd"></i> ğŸ’¸ ä»˜æ¬¾æŒ‡å¼•
                    </div>
                    <div style="background: white; padding: 16px; border-radius: 8px; margin-bottom: 12px;">
            `;
            
            if (paymentInstructions.length > 0) {
                paymentInstructions.forEach(instruction => {
                    instructionsHTML += `
                        <div style="padding: 12px; background: #FFEBEE; border-left: 4px solid #F44336; border-radius: 6px; margin-bottom: 8px;">
                            <i class="fas fa-arrow-right" style="color: #F44336;"></i>
                            <strong>${nameMap[instruction.from]}</strong> éœ€è¦ä»˜ <strong style="color: #F44336;">HKD ${instruction.amount}</strong> çµ¦ <strong>${nameMap[instruction.to]}</strong>
                        </div>
                    `;
                });
            } else {
                instructionsHTML += `
                    <div style="padding: 12px; background: #E8F5E9; border-left: 4px solid #4CAF50; border-radius: 6px; text-align: center;">
                        <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                        <strong style="color: #4CAF50;">æ‰€æœ‰å¸³ç›®å·²çµæ¸…ï¼</strong>
                    </div>
                `;
            }
            
            instructionsHTML += `
                    </div>
                    <div style="text-align: center; font-size: 12px; color: #666; margin-top: 12px;">
                        <i class="fas fa-info-circle"></i> ä»˜æ¬¾å®Œæˆå¾Œï¼Œæ‰€æœ‰äººçš„å¸³ç›®å°‡çµæ¸…
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML += instructionsHTML;
        }

        // ä¿å­˜åˆ°localStorage
        function saveExpenses() {
            localStorage.setItem('japanTripExpenses', JSON.stringify(expensesData));
        }

        // å¾localStorageè¼‰å…¥
        function loadExpenses() {
            const saved = localStorage.getItem('japanTripExpenses');
            if (saved) {
                expensesData = JSON.parse(saved);
                
                // æ›´æ–°æ‰€æœ‰é¡¯ç¤º
                updateExpensesList('kaho');
                updateExpensesList('dicken');
                updateExpensesList('tai');
                updateSummary();
            }
        }

        // è¼‰å…¥å„²å­˜çš„é–‹æ”¯é‡‘é¡
        function loadBudgetAmounts() {
            const savedAmounts = localStorage.getItem('budgetAmounts');
            if (savedAmounts) {
                try {
                    const amounts = JSON.parse(savedAmounts);
                    
                    // è¼‰å…¥HKDé …ç›®
                    if (amounts.flight !== undefined) {
                        const el = document.getElementById('budget_amount_flight');
                        if (el) el.value = amounts.flight;
                    }
                    if (amounts.hotel1 !== undefined) {
                        const el = document.getElementById('budget_amount_hotel1');
                        if (el) el.value = amounts.hotel1;
                    }
                    if (amounts.hotel2 !== undefined) {
                        const el = document.getElementById('budget_amount_hotel2');
                        if (el) el.value = amounts.hotel2;
                    }
                    if (amounts.hotel3 !== undefined) {
                        const el = document.getElementById('budget_amount_hotel3');
                        if (el) el.value = amounts.hotel3;
                    }
                    if (amounts.hotel4 !== undefined) {
                        const el = document.getElementById('budget_amount_hotel4');
                        if (el) el.value = amounts.hotel4;
                    }
                    
                    // è¼‰å…¥JPYé …ç›®
                    if (amounts.nintendo !== undefined) {
                        const el = document.getElementById('budget_amount_nintendo');
                        if (el) el.value = amounts.nintendo;
                    }
                    if (amounts.rental_car !== undefined) {
                        const el = document.getElementById('budget_amount_rental_car');
                        if (el) el.value = amounts.rental_car;
                    }
                    if (amounts.ama_hut !== undefined) {
                        const el = document.getElementById('budget_amount_ama_hut');
                        if (el) el.value = amounts.ama_hut;
                    }
                    if (amounts.grill_eight !== undefined) {
                        const el = document.getElementById('budget_amount_grill_eight');
                        if (el) el.value = amounts.grill_eight;
                    }
                    if (amounts.burlesque !== undefined) {
                        const el = document.getElementById('budget_amount_burlesque');
                        if (el) el.value = amounts.burlesque;
                    }
                    
                    console.log('å·²è¼‰å…¥å„²å­˜çš„é–‹æ”¯é‡‘é¡');
                } catch (e) {
                    console.error('è¼‰å…¥é–‹æ”¯é‡‘é¡å¤±æ•—:', e);
                }
            }
            
            // è¼‰å…¥å„²å­˜çš„ä»˜æ¬¾äººé¸æ“‡
            const savedPayers = localStorage.getItem('budgetPayers');
            if (savedPayers) {
                try {
                    const payers = JSON.parse(savedPayers);
                    
                    // æ¢å¾©å„é …ç›®çš„ä»˜æ¬¾äººé¸æ“‡
                    if (payers.flight) {
                        const radio = document.querySelector(`input[name="budget_payer_flight"][value="${payers.flight}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_flight', payers.flight);
                        }
                    }
                    if (payers.hotel1) {
                        const radio = document.querySelector(`input[name="budget_payer_hotel1"][value="${payers.hotel1}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_hotel1', payers.hotel1);
                        }
                    }
                    if (payers.hotel2) {
                        const radio = document.querySelector(`input[name="budget_payer_hotel2"][value="${payers.hotel2}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_hotel2', payers.hotel2);
                        }
                    }
                    if (payers.hotel3) {
                        const radio = document.querySelector(`input[name="budget_payer_hotel3"][value="${payers.hotel3}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_hotel3', payers.hotel3);
                        }
                    }
                    if (payers.hotel4) {
                        const radio = document.querySelector(`input[name="budget_payer_hotel4"][value="${payers.hotel4}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_hotel4', payers.hotel4);
                        }
                    }
                    if (payers.nintendo) {
                        const radio = document.querySelector(`input[name="budget_payer_nintendo"][value="${payers.nintendo}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_nintendo', payers.nintendo);
                        }
                    }
                    if (payers.rental_car) {
                        const radio = document.querySelector(`input[name="budget_payer_rental_car"][value="${payers.rental_car}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_rental_car', payers.rental_car);
                        }
                    }
                    if (payers.ama_hut) {
                        const radio = document.querySelector(`input[name="budget_payer_ama_hut"][value="${payers.ama_hut}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_ama_hut', payers.ama_hut);
                        }
                    }
                    if (payers.grill_eight) {
                        const radio = document.querySelector(`input[name="budget_payer_grill_eight"][value="${payers.grill_eight}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_grill_eight', payers.grill_eight);
                        }
                    }
                    if (payers.burlesque) {
                        const radio = document.querySelector(`input[name="budget_payer_burlesque"][value="${payers.burlesque}"]`);
                        if (radio) {
                            radio.checked = true;
                            updateBudgetPayerDisplay('budget_burlesque', payers.burlesque);
                        }
                    }
                    
                    console.log('å·²è¼‰å…¥å„²å­˜çš„ä»˜æ¬¾äººé¸æ“‡');
                } catch (e) {
                    console.error('è¼‰å…¥ä»˜æ¬¾äººé¸æ“‡å¤±æ•—:', e);
                }
            }
        }

        // é–‹æ”¯ç¸½è¦½æ•¸æ“š
        const fixedExpenses = [
            { id: 'flight', name: 'æ©Ÿç¥¨', amount: 3120, currency: 'HKD' },
            { id: 'hotel1', name: 'ä½å®¿1', amount: 903.1, currency: 'HKD' },
            { id: 'hotel2', name: 'ä½å®¿2', amount: 764, currency: 'HKD' },
            { id: 'hotel3', name: 'ä½å®¿3', amount: 3746.28, currency: 'HKD' },
            { id: 'hotel4', name: 'ä½å®¿4', amount: 4281.82, currency: 'HKD' },
            { id: 'rental_car', name: 'ç§Ÿè»Š', amount: 60610, currency: 'JPY' },
            { id: 'ama_hut', name: 'æµ·å¥³å°å±‹', amount: 30800, currency: 'JPY', note: 'ç¬¬4å¤©åˆé¤' },
            { id: 'grill_eight', name: 'Grill Eight BBQ', amount: 24000, currency: 'JPY', note: 'ç¬¬5å¤©åˆé¤' },
            { id: 'burlesque', name: 'Burlesque Osaka', amount: 35200, currency: 'JPY', note: 'ç¬¬6å¤©æ™šé¤' }
        ];

        // æ›´æ–°é–‹æ”¯ç¸½è¦½
        function updateExpenseSummary() {
            const exchangeRate = parseFloat(document.getElementById('exchangeRate')?.value) || 0.055;
            
            // æ›´æ–°æ—¥å…ƒé¡¯ç¤º
            const rentalCarHkd = document.getElementById('rental_car_hkd');
            const amaHutHkd = document.getElementById('ama_hut_hkd');
            const grillEightHkd = document.getElementById('grill_eight_hkd');
            const burlesqueHkd = document.getElementById('burlesque_hkd');
            
            if (rentalCarHkd) rentalCarHkd.textContent = `â‰ˆ HKD ${(60610 * exchangeRate).toFixed(0)}`;
            if (amaHutHkd) amaHutHkd.textContent = `â‰ˆ HKD ${(30800 * exchangeRate).toFixed(0)}`;
            if (grillEightHkd) grillEightHkd.textContent = `â‰ˆ HKD ${(24000 * exchangeRate).toFixed(0)}`;
            if (burlesqueHkd) burlesqueHkd.textContent = `â‰ˆ HKD ${(35200 * exchangeRate).toFixed(0)}`;
            
            // è¨ˆç®—å„äººå·²ä»˜
            let kahoPaid = 0;
            let dickenPaid = 0;
            let taiPaid = 0;
            let totalUnpaid = 0;
            
            fixedExpenses.forEach(expense => {
                const payerElement = document.querySelector(`input[name="payer_${expense.id}"]:checked`);
                if (!payerElement) return;
                
                const payer = payerElement.value;
                const amountHKD = expense.currency === 'JPY' ? expense.amount * exchangeRate : expense.amount;
                
                if (payer === 'Kaho') {
                    kahoPaid += amountHKD;
                } else if (payer === 'Dicken') {
                    dickenPaid += amountHKD;
                } else if (payer === 'æ³°æ°å¤«å©¦') {
                    taiPaid += amountHKD;
                } else if (payer === 'åˆä»˜') {
                    // åˆä»˜ï¼š4äººå¹³å‡åˆ†æ“”ï¼Œä½†æ³°æ°å¤«å©¦ç®—2äºº
                    const perPerson = amountHKD / 4;
                    kahoPaid += perPerson;
                    dickenPaid += perPerson;
                    taiPaid += perPerson * 2;
                } else if (payer === 'æœªä»˜') {
                    totalUnpaid += amountHKD;
                }
            });
            
            // æ›´æ–°é¡¯ç¤º
            const kahoPaidEl = document.getElementById('kahoPaid');
            const dickenPaidEl = document.getElementById('dickenPaid');
            const taiPaidEl = document.getElementById('taiPaid');
            const totalPaidEl = document.getElementById('totalPaid');
            const totalUnpaidEl = document.getElementById('totalUnpaid');
            
            if (kahoPaidEl) kahoPaidEl.textContent = `HKD ${kahoPaid.toFixed(0)}`;
            if (dickenPaidEl) dickenPaidEl.textContent = `HKD ${dickenPaid.toFixed(0)}`;
            if (taiPaidEl) taiPaidEl.textContent = `HKD ${taiPaid.toFixed(0)}`;
            if (totalPaidEl) totalPaidEl.textContent = `HKD ${(kahoPaid + dickenPaid + taiPaid).toFixed(0)}`;
            if (totalUnpaidEl) totalUnpaidEl.textContent = `HKD ${totalUnpaid.toFixed(0)}`;
            
            // è¨ˆç®—è¡Œç¨‹è²»ç”¨ä¼°ç®—
            const knownExpenses = kahoPaid + dickenPaid + taiPaid + totalUnpaid;
            
            // é¤é£²ä¼°ç®—ï¼ˆ8å¤©ï¼Œæ¯äººæ¯é¤ç´„ JPY 2000ï¼Œæ‰£é™¤å·²çŸ¥3é¤ï¼‰
            // æ—©é¤8æ¬¡ + åˆé¤8æ¬¡ + æ™šé¤8æ¬¡ = 24é¤/äºº Ã— 4äºº = 96é¤
            // æ‰£é™¤ï¼šæµ·å¥³å°å±‹4äººã€Grill Eight 4äººã€Burlesque 4äºº = 12é¤
            // å‰©é¤˜ï¼š84é¤ Ã— JPY 2000 Ã— åŒ¯ç‡
            const estimatedMeals = 84 * 2000 * exchangeRate;
            
            // è‡ªé§•é›œè²»ä¼°ç®—
            // æ²¹è²»ï¼šç´„ JPY 13500 (415km Ã· 15km/L Ã— 150JPY/L)
            // åœè»Šè²»ï¼šç´„ JPY 6500
            // é«˜é€Ÿå…¬è·¯è²»ï¼šç´„ JPY 10000
            const estimatedDriving = (13500 + 6500 + 10000) * exchangeRate;
            
            // æ™¯é»é–€ç¥¨ä¼°ç®—ï¼ˆéƒ¨åˆ†æ™¯é»å…è²»ï¼Œéƒ¨åˆ†éœ€ä»˜è²»ï¼‰
            const estimatedTickets = 12500 * exchangeRate;
            
            // æ—¥å¸¸é›œè²»
            const estimatedOthers = 40000 * exchangeRate;
            
            const estimatedTotal = knownExpenses + estimatedMeals + estimatedDriving + estimatedTickets + estimatedOthers;
            
            const knownExpensesEl = document.getElementById('knownExpenses');
            const estimatedMealsEl = document.getElementById('estimatedMeals');
            const estimatedDrivingEl = document.getElementById('estimatedDriving');
            const estimatedTicketsEl = document.getElementById('estimatedTickets');
            const estimatedOthersEl = document.getElementById('estimatedOthers');
            const estimatedTotalEl = document.getElementById('estimatedTotal');
            
            if (knownExpensesEl) knownExpensesEl.textContent = `HKD ${knownExpenses.toFixed(0)}`;
            if (estimatedMealsEl) estimatedMealsEl.textContent = `HKD ${estimatedMeals.toFixed(0)}`;
            if (estimatedDrivingEl) estimatedDrivingEl.textContent = `HKD ${estimatedDriving.toFixed(0)}`;
            if (estimatedTicketsEl) estimatedTicketsEl.textContent = `HKD ${estimatedTickets.toFixed(0)}`;
            if (estimatedOthersEl) estimatedOthersEl.textContent = `HKD ${estimatedOthers.toFixed(0)}`;
            if (estimatedTotalEl) estimatedTotalEl.textContent = `HKD ${estimatedTotal.toFixed(0)}`;
        }

        // é¡¯ç¤ºæˆåŠŸæç¤º
        function showSuccessMessage(message) {
            // å‰µå»ºæç¤ºå…ƒç´ 
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: #4CAF50;
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                font-weight: 600;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideDown 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            // 2ç§’å¾Œç§»é™¤
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 2000);
        }

        // ========== é–‹æ”¯ç¸½è¦½è¨ˆç®—åŠŸèƒ½ ==========
        
        // è¨ˆç®—é–‹æ”¯ç¸½è¦½
        function calculateExpenseOverview() {
            const exchangeRate = parseFloat(document.getElementById('expenseExchangeRate')?.value) || 0.055;
            
            // æ›´æ–°æ—¥å…ƒé¡¯ç¤º
            const nintendoTicketHkd = document.getElementById('nintendo_ticket_hkd');
            const rentalCarHkd = document.getElementById('rental_car_hkd');
            const amaHutHkd = document.getElementById('ama_hut_hkd');
            const grillEightHkd = document.getElementById('grill_eight_hkd');
            const burlesqueHkd = document.getElementById('burlesque_hkd');
            
            if (nintendoTicketHkd) nintendoTicketHkd.textContent = `â‰ˆ HKD ${(13200 * exchangeRate).toFixed(0)}`;
            if (rentalCarHkd) rentalCarHkd.textContent = `â‰ˆ HKD ${(60610 * exchangeRate).toFixed(0)}`;
            if (amaHutHkd) amaHutHkd.textContent = `â‰ˆ HKD ${(30800 * exchangeRate).toFixed(0)}`;
            if (grillEightHkd) grillEightHkd.textContent = `â‰ˆ HKD ${(24000 * exchangeRate).toFixed(0)}`;
            if (burlesqueHkd) burlesqueHkd.textContent = `â‰ˆ HKD ${(35200 * exchangeRate).toFixed(0)}`;
            
            // é–‹æ”¯é …ç›®å®šç¾©
            const expenses = [
                { id: 'flight', amount: 3120, currency: 'HKD' },
                { id: 'hotel1', amount: 903.1, currency: 'HKD' },
                { id: 'hotel2', amount: 764, currency: 'HKD' },
                { id: 'hotel3', amount: 3746.28, currency: 'HKD' },
                { id: 'hotel4', amount: 4281.82, currency: 'HKD' },
                { id: 'nintendo', amount: 13200, currency: 'JPY' },
                { id: 'rental_car', amount: 60610, currency: 'JPY' },
                { id: 'ama_hut', amount: 30800, currency: 'JPY' },
                { id: 'grill_eight', amount: 24000, currency: 'JPY' },
                { id: 'burlesque', amount: 35200, currency: 'JPY' }
            ];
            
            // è¨ˆç®—å„äººå·²ä»˜
            let kahoPaid = 0;
            let dickenPaid = 0;
            let taiPaid = 0;
            let totalUnpaid = 0;
            
            expenses.forEach(expense => {
                const payerElement = document.querySelector(`input[name="payer_${expense.id}"]:checked`);
                if (!payerElement) return;
                
                const payer = payerElement.value;
                const amountHKD = expense.currency === 'JPY' ? expense.amount * exchangeRate : expense.amount;
                
                if (payer === 'Kaho') {
                    kahoPaid += amountHKD;
                } else if (payer === 'Dicken') {
                    dickenPaid += amountHKD;
                } else if (payer === 'æ³°æ°å¤«å©¦') {
                    taiPaid += amountHKD;
                } else if (payer === 'åˆä»˜') {
                    // åˆä»˜ï¼š4äººå¹³å‡åˆ†æ“”
                    const perPerson = amountHKD / 4;
                    kahoPaid += perPerson;
                    dickenPaid += perPerson;
                    taiPaid += perPerson * 2; // æ³°æ°å¤«å©¦ç®—2äºº
                } else if (payer === 'æœªä»˜') {
                    totalUnpaid += amountHKD;
                }
            });
            
            // æ›´æ–°å·²ä»˜é¡¯ç¤º
            const kahoPaidEl = document.getElementById('kahoPaidTotal');
            const dickenPaidEl = document.getElementById('dickenPaidTotal');
            const taiPaidEl = document.getElementById('taiPaidTotal');
            const totalPaidEl = document.getElementById('totalPaidAmount');
            const totalUnpaidEl = document.getElementById('totalUnpaidAmount');
            
            if (kahoPaidEl) kahoPaidEl.textContent = `HKD ${kahoPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (dickenPaidEl) dickenPaidEl.textContent = `HKD ${dickenPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (taiPaidEl) taiPaidEl.textContent = `HKD ${taiPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (totalPaidEl) totalPaidEl.textContent = `HKD ${(kahoPaid + dickenPaid + taiPaid).toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (totalUnpaidEl) totalUnpaidEl.textContent = `HKD ${totalUnpaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            
            // è¨ˆç®—è¡Œç¨‹è²»ç”¨ä¼°ç®—
            const recordedExpenses = kahoPaid + dickenPaid + taiPaid + totalUnpaid;
            
            // é¤é£²ä¼°ç®—
            // å·²çŸ¥é¤å»³ï¼šæ¾é‡å£½å–œç‡’ + ä¸€å‡ç“¶ + ãŸã‹å±‹
            const knownRestaurants = (28000 + 24000 + 16000) * exchangeRate;
            
            // å…¶é¤˜é¤é£²ï¼š72äººæ¬¡ Ã— JPY 3,500/é¤
            const remainingMeals = 72 * 3500 * exchangeRate;
            
            const estimatedMeals = knownRestaurants + remainingMeals;
            
            // è‡ªé§•é›œè²»ï¼šæ²¹è²» + åœè»Š + é«˜é€Ÿ
            const estimatedDriving = (15000 + 8000 + 12000) * exchangeRate;
            
            // æ™¯é»é–€ç¥¨
            const estimatedTickets = 12000 * exchangeRate;
            
            // æ—¥å¸¸é›œè²»
            const estimatedOthers = 200000 * exchangeRate;
            
            const estimatedTotal = recordedExpenses + estimatedMeals + estimatedDriving + estimatedTickets + estimatedOthers;
            const perPersonExpense = estimatedTotal / 4; // 4äººå¹³å‡
            
            // æ›´æ–°è²»ç”¨ä¼°ç®—é¡¯ç¤º
            const recordedExpensesEl = document.getElementById('recordedExpenses');
            const estimatedMealsEl = document.getElementById('estimatedMeals');
            const estimatedDrivingEl = document.getElementById('estimatedDriving');
            const estimatedTicketsEl = document.getElementById('estimatedTickets');
            const estimatedOthersEl = document.getElementById('estimatedOthers');
            const estimatedTotalEl = document.getElementById('estimatedTotalExpense');
            const perPersonExpenseEl = document.getElementById('perPersonExpense');
            
            if (recordedExpensesEl) recordedExpensesEl.textContent = `HKD ${recordedExpenses.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedMealsEl) estimatedMealsEl.textContent = `HKD ${estimatedMeals.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedDrivingEl) estimatedDrivingEl.textContent = `HKD ${estimatedDriving.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedTicketsEl) estimatedTicketsEl.textContent = `HKD ${estimatedTickets.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedOthersEl) estimatedOthersEl.textContent = `HKD ${estimatedOthers.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedTotalEl) estimatedTotalEl.textContent = `HKD ${estimatedTotal.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (perPersonExpenseEl) perPersonExpenseEl.textContent = `HKD ${perPersonExpense.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
        }

        // æ‰‹é¢¨ç´åŠŸèƒ½ - å±•é–‹/æ”¶èµ·é–‹æ”¯é …ç›®
        function toggleExpenseItem(itemId) {
            const content = document.getElementById(itemId);
            const icon = document.getElementById(itemId + '_icon');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                if (icon) icon.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                if (icon) icon.style.transform = 'rotate(0deg)';
            }
        }

        // æ›´æ–°ä»˜æ¬¾äººé¡¯ç¤ºæ¨™ç±¤
        function updatePayerDisplay(itemId, payer) {
            const payerSpan = document.getElementById(itemId + '_payer');
            if (payerSpan) {
                payerSpan.textContent = payer;
            }
        }

        // æ‘ºç–Š/å±•é–‹æ‰€æœ‰é–‹æ”¯é …ç›®
        function toggleAllBudgetItems() {
            const content = document.getElementById('allBudgetItemsContent');
            const icon = document.getElementById('allBudgetItemsIcon');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                if (icon) icon.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                if (icon) icon.style.transform = 'rotate(0deg)';
            }
        }

        // ========== é–‹æ”¯é ç®—å´é‚Šæ¬„åŠŸèƒ½ ==========
        
        // è¨ˆç®—é–‹æ”¯é ç®—ç¸½è¦½
        function calculateBudgetOverview() {
            const exchangeRate = parseFloat(document.getElementById('budgetExchangeRate')?.value) || 0.055;
            
            // åŒæ­¥æ›´æ–°å…¨å±€åŒ¯ç‡è®Šæ•¸
            currentExchangeRate = exchangeRate;
            
            // åŒæ­¥æ›´æ–°é–‹æ”¯è¨˜éŒ„é é¢çš„åŒ¯ç‡é¡¯ç¤º
            const expenseRecordExchangeRateEl = document.getElementById('expenseRecordExchangeRate');
            if (expenseRecordExchangeRateEl) {
                expenseRecordExchangeRateEl.textContent = exchangeRate.toFixed(3);
            }
            
            // å„²å­˜æ‰€æœ‰é–‹æ”¯é‡‘é¡åˆ° localStorage
            const budgetAmounts = {
                flight: parseFloat(document.getElementById('budget_amount_flight')?.value) || 3120,
                hotel1: parseFloat(document.getElementById('budget_amount_hotel1')?.value) || 903.1,
                hotel2: parseFloat(document.getElementById('budget_amount_hotel2')?.value) || 764,
                hotel3: parseFloat(document.getElementById('budget_amount_hotel3')?.value) || 3746.28,
                hotel4: parseFloat(document.getElementById('budget_amount_hotel4')?.value) || 4281.82,
                nintendo: parseFloat(document.getElementById('budget_amount_nintendo')?.value) || 13200,
                rental_car: parseFloat(document.getElementById('budget_amount_rental_car')?.value) || 60610,
                ama_hut: parseFloat(document.getElementById('budget_amount_ama_hut')?.value) || 30800,
                grill_eight: parseFloat(document.getElementById('budget_amount_grill_eight')?.value) || 24000,
                burlesque: parseFloat(document.getElementById('budget_amount_burlesque')?.value) || 35200
            };
            
            localStorage.setItem('budgetAmounts', JSON.stringify(budgetAmounts));
            
            // å„²å­˜æ‰€æœ‰ä»˜æ¬¾äººé¸æ“‡åˆ° localStorage
            const budgetPayers = {
                flight: document.querySelector('input[name="budget_payer_flight"]:checked')?.value || 'åˆä»˜',
                hotel1: document.querySelector('input[name="budget_payer_hotel1"]:checked')?.value || 'Kaho',
                hotel2: document.querySelector('input[name="budget_payer_hotel2"]:checked')?.value || 'Kaho',
                hotel3: document.querySelector('input[name="budget_payer_hotel3"]:checked')?.value || 'Kaho',
                hotel4: document.querySelector('input[name="budget_payer_hotel4"]:checked')?.value || 'Kaho',
                nintendo: document.querySelector('input[name="budget_payer_nintendo"]:checked')?.value || 'æ³°æ°å¤«å©¦',
                rental_car: document.querySelector('input[name="budget_payer_rental_car"]:checked')?.value || 'æœªä»˜',
                ama_hut: document.querySelector('input[name="budget_payer_ama_hut"]:checked')?.value || 'æœªä»˜',
                grill_eight: document.querySelector('input[name="budget_payer_grill_eight"]:checked')?.value || 'æœªä»˜',
                burlesque: document.querySelector('input[name="budget_payer_burlesque"]:checked')?.value || 'æœªä»˜'
            };
            
            localStorage.setItem('budgetPayers', JSON.stringify(budgetPayers));
            
            // æ›´æ–°æ—¥å…ƒé¡¯ç¤º
            const nintendoHkd = document.getElementById('budget_nintendo_hkd');
            const rentalCarHkd = document.getElementById('budget_rental_car_hkd');
            const amaHutHkd = document.getElementById('budget_ama_hut_hkd');
            const grillEightHkd = document.getElementById('budget_grill_eight_hkd');
            const burlesqueHkd = document.getElementById('budget_burlesque_hkd');
            
            // å¾è¼¸å…¥æ¡†è®€å–JPYé‡‘é¡ä¸¦æ›´æ–°HKDé¡¯ç¤º
            const nintendoAmount = parseFloat(document.getElementById('budget_amount_nintendo')?.value) || 13200;
            const rentalCarAmount = parseFloat(document.getElementById('budget_amount_rental_car')?.value) || 60610;
            const amaHutAmount = parseFloat(document.getElementById('budget_amount_ama_hut')?.value) || 30800;
            const grillEightAmount = parseFloat(document.getElementById('budget_amount_grill_eight')?.value) || 24000;
            const burlesqueAmount = parseFloat(document.getElementById('budget_amount_burlesque')?.value) || 35200;
            
            if (nintendoHkd) nintendoHkd.textContent = `â‰ˆ HKD ${(nintendoAmount * exchangeRate).toFixed(0)}`;
            if (rentalCarHkd) rentalCarHkd.textContent = `â‰ˆ HKD ${(rentalCarAmount * exchangeRate).toFixed(0)}`;
            if (amaHutHkd) amaHutHkd.textContent = `â‰ˆ HKD ${(amaHutAmount * exchangeRate).toFixed(0)}`;
            if (grillEightHkd) grillEightHkd.textContent = `â‰ˆ HKD ${(grillEightAmount * exchangeRate).toFixed(0)}`;
            if (burlesqueHkd) burlesqueHkd.textContent = `â‰ˆ HKD ${(burlesqueAmount * exchangeRate).toFixed(0)}`;
            
            // é–‹æ”¯é …ç›®å®šç¾© - å¾è¼¸å…¥æ¡†è®€å–é‡‘é¡
            const budgetExpenses = [
                { id: 'flight', amount: parseFloat(document.getElementById('budget_amount_flight')?.value) || 3120, currency: 'HKD' },
                { id: 'hotel1', amount: parseFloat(document.getElementById('budget_amount_hotel1')?.value) || 903.1, currency: 'HKD' },
                { id: 'hotel2', amount: parseFloat(document.getElementById('budget_amount_hotel2')?.value) || 764, currency: 'HKD' },
                { id: 'hotel3', amount: parseFloat(document.getElementById('budget_amount_hotel3')?.value) || 3746.28, currency: 'HKD' },
                { id: 'hotel4', amount: parseFloat(document.getElementById('budget_amount_hotel4')?.value) || 4281.82, currency: 'HKD' },
                { id: 'nintendo', amount: nintendoAmount, currency: 'JPY' },
                { id: 'rental_car', amount: rentalCarAmount, currency: 'JPY' },
                { id: 'ama_hut', amount: amaHutAmount, currency: 'JPY' },
                { id: 'grill_eight', amount: grillEightAmount, currency: 'JPY' },
                { id: 'burlesque', amount: burlesqueAmount, currency: 'JPY' }
            ];
            
            // è¨ˆç®—å„äººå·²ä»˜
            let kahoPaid = 0;
            let dickenPaid = 0;
            let taiPaid = 0;
            let totalUnpaid = 0;
            
            budgetExpenses.forEach(expense => {
                const payerElement = document.querySelector(`input[name="budget_payer_${expense.id}"]:checked`);
                if (!payerElement) return;
                
                const payer = payerElement.value;
                const amountHKD = expense.currency === 'JPY' ? expense.amount * exchangeRate : expense.amount;
                
                if (payer === 'Kaho') {
                    kahoPaid += amountHKD;
                } else if (payer === 'Dicken') {
                    dickenPaid += amountHKD;
                } else if (payer === 'æ³°æ°å¤«å©¦') {
                    taiPaid += amountHKD;
                } else if (payer === 'åˆä»˜') {
                    // åˆä»˜ï¼š4äººå¹³å‡åˆ†æ“”
                    const perPerson = amountHKD / 4;
                    kahoPaid += perPerson;
                    dickenPaid += perPerson;
                    taiPaid += perPerson * 2; // æ³°æ°å¤«å©¦ç®—2äºº
                } else if (payer === 'æœªä»˜') {
                    totalUnpaid += amountHKD;
                }
            });
            
            // æ›´æ–°å·²ä»˜é¡¯ç¤º
            const kahoPaidEl = document.getElementById('budget_kaho_paid');
            const dickenPaidEl = document.getElementById('budget_dicken_paid');
            const taiPaidEl = document.getElementById('budget_tai_paid');
            const totalPaidEl = document.getElementById('budget_total_paid');
            const totalUnpaidEl = document.getElementById('budget_unpaid');
            
            if (kahoPaidEl) kahoPaidEl.textContent = `HKD ${kahoPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (dickenPaidEl) dickenPaidEl.textContent = `HKD ${dickenPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (taiPaidEl) taiPaidEl.textContent = `HKD ${taiPaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (totalPaidEl) totalPaidEl.textContent = `HKD ${(kahoPaid + dickenPaid + taiPaid).toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (totalUnpaidEl) totalUnpaidEl.textContent = `HKD ${totalUnpaid.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            
            // è¨ˆç®—æ•´é«”è¡Œç¨‹è²»ç”¨ä¼°ç®—
            const knownExpenses = kahoPaid + dickenPaid + taiPaid + totalUnpaid;
            
            // é¤é£²ä¼°ç®—
            // å·²çŸ¥é¤å»³ï¼šæ¾é‡å£½å–œç‡’ + ä¸€å‡ç“¶ + ãŸã‹å±‹
            const knownRestaurants = (28000 + 24000 + 16000) * exchangeRate;
            
            // å…¶é¤˜é¤é£²ï¼š72äººæ¬¡ Ã— JPY 3,500/é¤
            const remainingMeals = 72 * 3500 * exchangeRate;
            
            const estimatedMeals = knownRestaurants + remainingMeals;
            
            // è‡ªé§•é›œè²»ï¼šæ²¹è²» + åœè»Š + é«˜é€Ÿ
            const estimatedDriving = (15000 + 8000 + 12000) * exchangeRate;
            
            // æ™¯é»é–€ç¥¨
            const estimatedTickets = 12000 * exchangeRate;
            
            // æ—¥å¸¸é›œè²»
            const estimatedOthers = 200000 * exchangeRate;
            
            const estimatedTotal = knownExpenses + estimatedMeals + estimatedDriving + estimatedTickets + estimatedOthers;
            const perPersonExpense = estimatedTotal / 4; // 4äººå¹³å‡
            
            // æ›´æ–°è²»ç”¨ä¼°ç®—é¡¯ç¤º
            const knownExpensesEl = document.getElementById('budget_known_expenses');
            const estimatedMealsEl = document.getElementById('budget_estimated_meals');
            const estimatedDrivingEl = document.getElementById('budget_estimated_driving');
            const estimatedTicketsEl = document.getElementById('budget_estimated_tickets');
            const estimatedOthersEl = document.getElementById('budget_estimated_others');
            const estimatedTotalEl = document.getElementById('budget_estimated_total');
            const perPersonExpenseEl = document.getElementById('budget_per_person');
            
            if (knownExpensesEl) knownExpensesEl.textContent = `HKD ${knownExpenses.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedMealsEl) estimatedMealsEl.textContent = `HKD ${estimatedMeals.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedDrivingEl) estimatedDrivingEl.textContent = `HKD ${estimatedDriving.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedTicketsEl) estimatedTicketsEl.textContent = `HKD ${estimatedTickets.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedOthersEl) estimatedOthersEl.textContent = `HKD ${estimatedOthers.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (estimatedTotalEl) estimatedTotalEl.textContent = `HKD ${estimatedTotal.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            if (perPersonExpenseEl) perPersonExpenseEl.textContent = `HKD ${perPersonExpense.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;
            
            // ===== åŒæ­¥æ›´æ–°é–‹æ”¯è¨˜éŒ„é é¢ =====
            // ç•¶é–‹æ”¯é ç®—æ›´æ–°å¾Œï¼Œè‡ªå‹•æ›´æ–°é–‹æ”¯è¨˜éŒ„é é¢çš„è¨ˆç®—
            if (typeof updateSummary === 'function') {
                updateSummary();
            }
            if (typeof calculateSettlement === 'function') {
                calculateSettlement();
            }
        }

        // æ‰‹é¢¨ç´åŠŸèƒ½ - å±•é–‹/æ”¶èµ·é ç®—é …ç›®
        function toggleBudgetItem(itemId) {
            const content = document.getElementById(itemId);
            const icon = document.getElementById(itemId + '_icon');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                if (icon) icon.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                if (icon) icon.style.transform = 'rotate(0deg)';
            }
        }

        // æ›´æ–°é ç®—ä»˜æ¬¾äººé¡¯ç¤ºæ¨™ç±¤
        function updateBudgetPayerDisplay(itemId, payer) {
            const payerSpan = document.getElementById(itemId + '_payer');
            if (payerSpan) {
                payerSpan.textContent = payer;
            }
        }

        // æŠ˜ç–Š/å±•é–‹é ç®—è¨ˆç®—æ–¹ç¨‹å¼
        function toggleBudgetFormula() {
            const content = document.getElementById('budgetFormulaContent');
            const icon = document.getElementById('budgetFormulaIcon');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                icon.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                icon.style.transform = 'rotate(0deg)';
            }
        }

                    </script>
    <script src="https://cdn.kuse.ai/sdk.prd.js"></script>

</body></html>